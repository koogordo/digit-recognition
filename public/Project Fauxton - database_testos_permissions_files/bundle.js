webpackJsonp([1,2],[,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(336),i=a(r),l=n(643),s=a(l),u=n(642),c=a(u),d=n(177),f=a(d),p=n(644),h=a(p),m=n(335),_=a(m),g=n(641),b=a(g),E=n(116),v=a(E),y=n(73),O=a(y),N=n(19),S=a(N),D=n(179),T=a(D);O.default.$=v.default,O.default.ajax=function(){return O.default.$.ajax.apply(O.default.$,arguments)},o(i.default,{Router:s.default,RouteObject:c.default,utils:f.default,Store:h.default,dispatcher:b.default,Promise:T.default,Events:S.default.extend({},O.default.Events)}),i.default.constants=_.default,i.default.dispatch=b.default.dispatch,i.default.navigate=function(e,t){var n=S.default.extend({trigger:!0},t);i.default.router.navigate(e,n),n.trigger&&i.default.router.trigger("trigger-update")},i.default.beforeUnload=function(){i.default.router.beforeUnload.apply(i.default.router,arguments)},i.default.removeBeforeUnload=function(){i.default.router.removeBeforeUnload.apply(i.default.router,arguments)},i.default.addRoute=function(e){i.default.router.route(e.route,e.name,e.callback)};var C={};i.default.registerUrls=function(e,t){C[e]=t},i.default.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+\/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+\/]/g.test(e)?decodeURIComponent(e):e}},i.default.urls=function(e,t){var n,a=i.default.getExtensions("urls:interceptors"),o=arguments;return S.default.find(a,function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)}),S.default.isUndefined(n)?C[e]?C[e][t]?(o=Array.prototype.slice.call(arguments,2),n=C[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},i.default.getIndexTypePropNames=function(){var e=i.default.getExtensions("IndexTypes:propNames");return e.push("views"),e},t.default=i.default},,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(116);var r=n(337),i=a(r),l=n(19),s=a(l),u=n(18),c=a(u),d=n(177),f=a(d),p=n(2),h=a(p);n(794),s.default.isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),o(i.default,{utils:f.default,getParams:h.default.utils.getParams,helpers:c.default}),h.default.config({addHeaderLink:function(e){h.default.dispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){h.default.dispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){h.default.dispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){h.default.dispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){h.default.dispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){h.default.dispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}}),t.default=i.default},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(505),o=n(518),r=n(506),i=n(515),l=n(276),s=n(507),u=n(168),c=n(277),d=n(275),f=n(513),p=n(511),h=n(169),m=n(508),_=n(512),g=n(519),b=n(274),E=n(510),v=n(126),y=n(514),O=n(509),N=n(516),S=n(517);t.default={BadgeList:a.BadgeList,Badge:a.Badge,BulkActionComponent:r.BulkActionComponent,ConfirmButton:m.ConfirmButton,ToggleHeaderButton:o.ToggleHeaderButton,StyledSelect:i.StyledSelect,CodeEditorPanel:s.CodeEditorPanel,CodeEditor:u.CodeEditor,StringEditModal:l.StringEditModal,ZenModeOverlay:c.ZenModeOverlay,Beautify:d.Beautify,PaddedBorderedBox:f.PaddedBorderedBox,Polling:y.Polling,Document:p.Document,LoadLines:h.LoadLines,MenuDropDown:_.MenuDropDown,TrayContents:g.TrayContents,TrayWrapper:g.TrayWrapper,connectToStores:g.connectToStores,ApiBarController:b.ApiBarController,DeleteDatabaseModal:E.DeleteDatabaseModal,TabElement:v.TabElement,TabElementWrapper:v.TabElementWrapper,RefreshBtn:y.RefreshBtn,Copy:O.Copy,TabWindowWrapper:N.TabWindowWrapper,ThrottledReactSelectAsync:S.ThrottledReactSelectAsync}},,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(335),r=a(o),i=n(337),l=a(i),s=n(177),u=a(s),c=n(214),d=a(c),f=n(1073),p=a(f),h=n(24),m=n(19),_=a(m),g={};g.removeSpecialCharacters=u.default.removeSpecialCharacters,g.safeURL=u.default.safeURLName,g.imageUrl=function(e){return e},g.getDocUrl=function(e){return _.default.has(r.default.DOC_URLS,e)?r.default.DOC_URLS[e]:"#"},g.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var a=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<a.length;)o+=1,e/=1024;return e.toFixed(t)+" "+a[o-1]},g.formatDate=function(e){return(0,d.default)(e,"X").format("MMM Do, h:mm:ss a")},g.getDateFromNow=function(e){return(0,d.default)(e,"X").fromNow()},g.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")},g.getApiUrl=function(e){return l.default.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),p.default.resolve(window.location.href,l.default.host+e)},g.getServerUrl=function(e){return l.default.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),l.default.host+e},g.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return p.default.resolve(t+n,l.default.host)},g.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=g.getServerUrl("/_uuids?count="+e);return(0,h.get)(t)},g.isIE1X=function(){return 11==document.documentMode||10==document.documentMode},t.default=g},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFormEncoded=t.putFormEncoded=t.postFormEncoded=t.formEncoded=t.put=t.post=t.deleteRequest=t.get=t.json=t.fetchObserver=void 0,n(477);var a=n(19),o=n(1045);n(1047);var r=t.fetchObserver=new o.Subject,i=t.json=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,(0,a.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"})).then(function(e){return r.next(e),n.raw?e:e.json()})},l=(t.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e,"GET",t)},t.deleteRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e,"DELETE",t)},t.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),i(e,"POST",n)},t.put=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),i(e,"PUT",n)},t.formEncoded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(e,t,(0,a.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))});t.postFormEncoded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),l(e,"POST",n)},t.putFormEncoded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),l(e,"PUT",n)},t.deleteFormEncoded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),l(e,"DELETE",n)}},,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DocEditorLayout=t.DocEditorContent=t.OnePaneSimpleLayout=t.OnePaneFooter=t.OnePaneContent=t.OnePaneHeader=t.OnePane=t.ApiBarWrapper=void 0;var o=n(1),r=a(o),i=n(0),l=a(i),s=n(10),u=(a(s),n(102)),c=n(274),d=n(127),f=n(18),p=a(f),h=t.ApiBarWrapper=function(e){var t=e.docURL,n=e.endpoint;return l.default.createElement("div",{className:"faux__jsondoc-wrapper"},l.default.createElement(c.JSONLink,{endpoint:n}),l.default.createElement(c.DocLink,{docURL:t}))},m=t.OnePane=function(e){var t=e.children;return l.default.createElement("div",{id:"dashboard",className:"one-pane "},t)},_=t.OnePaneHeader=function(e){var t=e.showApiUrl,n=e.docURL,a=e.endpoint,o=e.crumbs,r=e.children,i="right-header-flex";return p.default.isIE1X()&&(i+=" "+i+"--ie1X"),l.default.createElement("header",null,l.default.createElement("div",{className:"flex-layout flex-row"},l.default.createElement("div",{id:"breadcrumbs",className:"flex-body"},l.default.createElement(d.Breadcrumbs,{crumbs:o})),l.default.createElement("div",{id:"right-header"},l.default.createElement("div",{className:i},r)),t?l.default.createElement(h,{docURL:n,endpoint:a}):null,l.default.createElement("div",{id:"notification-center-btn"},l.default.createElement(u.NotificationCenterButton,null))))};_.defaultProps={showApiUrl:!0,crumbs:[]},_.propTypes={docURL:r.default.string,endpoint:r.default.string,crumbs:r.default.array};var g=t.OnePaneContent=function(e){var t=e.children;return l.default.createElement("div",{className:"content-area container-fluid"},l.default.createElement("div",{id:"tabs"}),l.default.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},b=t.OnePaneFooter=function(e){var t=e.children;return l.default.createElement("div",{className:"faux__onepane-footer"},t)},E=(t.OnePaneSimpleLayout=function(e){var t=e.component,n=e.docURL,a=e.endpoint,o=e.crumbs;return l.default.createElement(m,null,l.default.createElement(_,{crumbs:o,endpoint:a,docURL:n}),l.default.createElement(g,null,t),l.default.createElement(b,null))},t.DocEditorContent=function(e){var t=e.children;return l.default.createElement("div",{id:"dashboard-content"},t)});t.DocEditorLayout=function(e){var t=e.component,n=e.docURL,a=e.endpoint,o=e.crumbs;return l.default.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},l.default.createElement(_,{crumbs:o,endpoint:a,docURL:n}),l.default.createElement(E,null,t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LAYOUT_ORIENTATION:{TABLE:"LAYOUT_TABLE",METADATA:"LAYOUT_METADATA",JSON:"LAYOUT_JSON"},INDEX_RESULTS_DOC_TYPE:{MANGO_INDEX:"MangoIndex",MANGO_QUERY:"MangoQueryResult",VIEW:"view"}}},,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(95),u=a(s),c=function(e){return _.isArray(e)?e[1]:e},d=function(e){var t=l.default.getExtensions("sidebar:links"),n="#"+l.default.urls("databaseBaseURL","app",l.default.url.encode(e));return[{title:"Add New",links:_.reduce(t,function(e,t){return e.push({title:t.title,url:n+"/"+t.url,icon:"fonticon-plus-circled"}),e},[{title:"New Doc",url:n+"/new",icon:"fonticon-plus-circled"},{title:"New View",url:n+"/new_view",icon:"fonticon-plus-circled"},f(e)])}]},f=function(e){var t="#"+l.default.urls("databaseBaseURL","app",l.default.url.encode(e));return{title:r.default.i18n.en_US["new-mango-index"],url:t+"/_index",icon:"fonticon-plus-circled"}},p=function(e){return JSON.parse('"'+e+'"')},h=function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:l.default.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:u.default.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},m=function(e,t){var n=e.split("\n"),a=!1;return n.length>t&&(a=!0,n=n.slice(0,t),e=n.join("\n")),{isTruncated:a,content:e}},g=function(e){var t=encodeURIComponent(e);return l.default.urls("new","newDocument",t)},b=function(e,t){if(!t)return!1;var n=!1;if(e&&E(t)){var a="_design/"+t.params.designDocName,o=e.find(function(e){return e._id===a});n=void 0!==o&&o.views&&void 0!==o.views[t.params.indexName]&&void 0!==o.views[t.params.indexName].reduce}return n},E=function(e){return"designDoc"===e.navItem&&e.params&&"Views"===e.params.designDocSection&&e.params.indexName};t.default={getSeqNum:c,getNewButtonLinks:d,getModifyDatabaseLinks:h,getNewDocUrl:g,parseJSON:p,truncateDoc:m,selectedViewContainsReduceFunction:b,isViewSelected:E}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}}},,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e.database.safeID()!==O.getDatabaseName()&&g.default.dispatch({type:E.default.SIDEBAR_FETCHING}),e.designDocs.fetch().then(function(){g.default.dispatch({type:E.default.SIDEBAR_NEW_OPTIONS,options:e})},function(t){var n="Unable to update the sidebar.";t.responseJSON&&"not_found"===t.responseJSON.error&&(n="The "+e.designDocs.database.safeID()+" database does not exist.",g.default.navigate("/",{trigger:!0})),g.default.addNotification({msg:n,type:"error",clear:!0})})}function r(e){g.default.dispatch({type:E.default.SIDEBAR_FETCHING}),e.fetch().then(function(){g.default.dispatch({type:E.default.SIDEBAR_UPDATED_DESIGN_DOCS,options:{designDocs:e}})})}function i(e,t){g.default.dispatch({type:E.default.SIDEBAR_TOGGLE_CONTENT,designDoc:e,indexGroup:t})}function l(e,t){var n=m({designDocName:"",designDocSection:"",indexName:""},t);n.navItem=e,g.default.dispatch({type:E.default.SIDEBAR_SET_SELECTED_NAV_ITEM,options:n})}function s(e,t,n,a){g.default.dispatch({type:E.default.SIDEBAR_SHOW_DELETE_INDEX_MODAL,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:a}})}function u(){g.default.dispatch({type:E.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL})}function c(e,t,n,a){g.default.dispatch({type:E.default.SIDEBAR_SHOW_CLONE_INDEX_MODAL,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:a,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}function d(){g.default.dispatch({type:E.default.SIDEBAR_HIDE_CLONE_INDEX_MODAL})}function f(e){g.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}function p(e){g.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE,options:{value:e}})}function h(e){g.default.dispatch({type:E.default.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME,options:{value:e}})}Object.defineProperty(t,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_=n(2),g=a(_),b=n(101),E=a(b),v=n(172),y=a(v),O=y.default.sidebarStore;t.default={newOptions:o,updateDesignDocs:r,toggleContent:i,selectNavItem:l,showDeleteIndexModal:s,hideDeleteIndexModal:u,showCloneIndexModal:c,hideCloneIndexModal:d,updateNewDesignDocName:f,selectDesignDoc:p,setNewCloneIndexName:h}},,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.processBulkDeleteResponse=t.bulkDeleteDocs=t.validateBulkDelete=t.deleteErrorMessage=t.fetchDocs=t.removeOverflowDocsAndCalculateHasNext=t.mergeParams=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(2),l=o(i),s=n(64),u=o(s),c=n(40),d=o(c),f=n(99),p=n(307),h=a(p),m=n(98),_=1e4,g=t.mergeParams=function(e,t){var n={},a=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=a-n.skip;return{params:r({},t,n),totalDocsRemaining:o}},b=t.removeOverflowDocsAndCalculateHasNext=function(e,t,n){var a=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),a=!0),{finalDocList:e,canShowNext:a}},E=t.fetchDocs=function(e,t,n){var a=g(t,n),o=a.params,r=a.totalDocsRemaining;return o.limit=Math.min(o.limit,_),function(t){return t((0,m.nowLoading)()),e(o).then(function(e){var n=e.docs,a=e.docType,i=e.executionStats,l=e.warning,s=b(n,r,o.limit),u=s.finalDocList,c=s.canShowNext;a===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&t((0,m.changeLayout)(d.default.LAYOUT_ORIENTATION.JSON)),t((0,m.newResultsAvailable)(u,o,c,a,i,l))}).catch(function(e){l.default.addNotification({msg:"Error running query. "+(0,f.errorReason)(e),type:"error",clear:!0}),t((0,m.resetState)())})}},v=t.deleteErrorMessage=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),l.default.addNotification({msg:t,type:"error",clear:!0})},y=t.validateBulkDelete=function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)},O=(t.bulkDeleteDocs=function(e,t,n,a,o,r,i){return!!y(n)&&function(l){var s=void 0,u=void 0;if(i===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)u={docids:n.map(function(e){return e._id})},s=h.postToIndexBulkDelete(e,u);else{if(i!==d.default.INDEX_RESULTS_DOC_TYPE.VIEW&&i!==d.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY)throw new Error("Invalid document type: "+i);u={docs:n},s=h.postToBulkDocs(e,u)}return s.then(function(e){if(e.error)return void v();O(e,n,a,i),l((0,m.newSelectedDocs)()),l(E(t,o,r))})}},t.processBulkDeleteResponse=function(e,t,n,a){l.default.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];a===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?e.fail&&(o=e.fail.map(function(e){return e.id})):o=e.filter(function(e){return!!e.error}).map(function(e){return e.id});var r=!!t.map(function(e){return e._id}).find(function(e){return/_design/.test(e)});o.length>0&&v(o),n&&r&&u.default.updateDesignDocs(n)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(18),l=a(i),s=n(2),u=a(s),c=n(24),d=n(132),f=a(d);f.default.QueryParams=function(){var e=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],function(e){_.has(n,e)&&(n[e]=t(n[e]))}),n};return{parse:function(t){return e(t,JSON.parse)},stringify:function(t){return e(t,JSON.stringify)}}}(),f.default.DdocInfo=u.default.Model.extend({idAttribute:"_id",documentation:function(){return u.default.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),u.default.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){var e=this.id.replace(/^_design\//,"");return"_design/"+r.default.utils.safeURLName(e)}}),f.default.NewDoc=f.default.Doc.extend({fetch:function(){var e=this;return l.default.getUUID().then(function(t){return t.uuids?e.set("_id",t.uuids[0]):e.set("_id","enter_document_id"),t}).catch(function(){e.set("_id","enter_document_id")})}}),f.default.BulkDeleteDoc=u.default.Model.extend({idAttribute:"_id"}),f.default.BulkDeleteDocCollection=u.default.Collection.extend({model:f.default.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return u.default.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new u.default.Promise(function(n,a){(0,c.post)(e.url(),t).then(function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,a)}).catch(function(){var t=_.reduce(e.toArray(),function(e,t){return e.push(t.id),e},[]);e.trigger("error",t),a(t)})})},handleResponse:function(e,t,n){var a=_.reduce(e,function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e},{errorIds:[],successIds:[]});this.removeDocuments(a.successIds),a.errorIds.length&&this.trigger("error",a.errorIds),_.isEmpty(a.successIds)?n(a.errorIds):t(a),this.trigger("updated")},removeDocuments:function(e){_.each(e,function(e){this.remove(this.get(e))},this),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),f.default.MangoBulkDeleteDocCollection=f.default.BulkDeleteDocCollection.extend({url:function(){return l.default.getServerUrl("/"+this.databaseId+"/_index/_bulk_delete")},createPayload:function(e){return{docids:e.filter(function(e){return"_all_docs"!==e._id}).map(function(e){return e._id})}}}),t.default=f.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=(a(h),n(20)),g=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getClasses=function(){var e={js:"lang-js"},t="prettyprint";return _.has(e,a.props.lang)&&(t+=" "+e[a.props.lang]),t},i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return p.default.createElement("div",null,p.default.createElement("pre",{className:this.getClasses()},e))}}]),t}(p.default.Component);g.defaultProps={lang:"js"};var b=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getVisiblePages=function(e,t){var n,o;if(t<a.props.maxNavPages)n=1,o=t+1;else{var r=Math.floor(a.props.maxNavPages/2);n=e-r,o=e+r,n<=1&&(n=1,o=a.props.maxNavPages+1),o>t+1&&(n=t-(a.props.maxNavPages-1),o=t+1)}return{from:n,to:o}},a.createItemsForPage=function(e){return _.range(e.from,e.to).map(function(e){return p.default.createElement("li",{key:e,className:this.props.page===e?"active":null},this.getLink(e,e))}.bind(a))},a.getLink=function(e,t){return a.props.onClick?p.default.createElement("a",{onClick:a.props.onClick.bind(null,e),dangerouslySetInnerHTML:{__html:t}}):p.default.createElement("a",{href:a.props.urlPrefix+e+a.props.urlSuffix,dangerouslySetInnerHTML:{__html:t}})},a.getTotalPages=function(){return 0===a.props.total?1:Math.ceil(a.props.total/a.props.perPage)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),a=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return p.default.createElement("ul",{className:"pagination"},p.default.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(a,"&laquo;")),n,p.default.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),t}(p.default.Component);b.defaultProps={perPage:u.default.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10};var E=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.close=function(e){e&&e.preventDefault(),a.props.onClose()},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=p.default.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass;return p.default.createElement(m.Modal,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},p.default.createElement(m.Modal.Header,{closeButton:!0},p.default.createElement(m.Modal.Title,null,this.props.title)),p.default.createElement(m.Modal.Body,null,e),p.default.createElement(m.Modal.Footer,null,p.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"),p.default.createElement("button",{className:t,onClick:this.props.onSubmit},p.default.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel)))}}]),t}(p.default.Component);E.propTypes={visible:d.default.bool.isRequired,text:d.default.oneOfType([d.default.string,d.default.element]).isRequired,onClose:d.default.func.isRequired,onSubmit:d.default.func.isRequired},E.defaultProps={visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary",onClose:function(){},onSubmit:function(){}},t.default={CodeFormat:g,Pagination:b,ConfirmationModal:E}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],n=t.options;switch(t.type){case i.SETUP_SET_CLUSTERSTATUS:return h(e,"clusterState",n.state);case i.SETUP_SET_USERNAME:return h(e,"username",n.value);case i.SETUP_SET_PASSWORD:return h(e,"password",n.value);case i.SETUP_BIND_ADDRESS_FOR_SINGLE_NODE:return h(e,"setupNode.bindAddress",n.value);case i.SETUP_PORT_FOR_SINGLE_NODE:return p(e,"setupNode.port",parseInt(n.value));case i.SETUP_PORT_ADDITIONAL_NODE:return p(e,"additionalNode.port",parseInt(n.value));case i.SETUP_BIND_ADDRESS_ADDITIONAL_NODE:return h(e,"additionalNode.bindAddress",n.value);case i.SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE:return h(e,"additionalNode.remoteAddress",n.value);case i.SETUP_ADD_NODE_TO_LIST:var a=f(e);return a.nodeList.push(n.value),m(a),a;case i.SETUP_RESET_ADDITIONAL_NODE:return m(f(e));case i.SETUP_NODE_COUNT:return p(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getHostForSetupNode=t.getAdditionalNode=t.getNodeCountForSetupNode=t.getBindAddressForSetupNode=t.getPortForSetupNode=t.getSetupNode=t.getPassword=t.getUsername=t.getIsAdminParty=t.getNodeList=t.getClusterState=t.getState=t.updateStateIfNotNaN=t.getStateCopy=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var i=n(328),l=n(2),s=a(l),u=n(19),c=a(u),d={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}},f=t.getStateCopy=function(e){return r({},e,{setupNode:r({},e.setupNode),additionalNode:r({},e.additionalNode)})},p=t.updateStateIfNotNaN=function(e,t,n){var a=f(e);return c.default.isNaN(n)?a:c.default.set(a,t,n)},h=function(e,t,n){var a=f(e);return c.default.set(a,t,n)},m=function(e){return e.additionalNode=r({},d.additionalNode),e};t.getState=function(e){return e},t.getClusterState=function(e){return e.clusterState},t.getNodeList=function(e){return e.nodeList},t.getIsAdminParty=function(){return s.default.session.isAdminParty()},t.getUsername=function(e){return e.username},t.getPassword=function(e){return e.password},t.getSetupNode=function(e){return e.setupNode},t.getPortForSetupNode=function(e){return e.setupNode.port},t.getBindAddressForSetupNode=function(e){return e.setupNode.bindAddress},t.getNodeCountForSetupNode=function(e){return e.setupNode.nodeCount},t.getAdditionalNode=function(e){return e.additionalNode},t.getHostForSetupNode=function(){return"127.0.0.1"}},,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.hidePasswordModal=t.authenticate=t.createAdmin=t.changePassword=t.login=t.validatePasswords=t.validateUser=void 0;var o=n(2),r=a(o),i=n(11),l=a(i),s=n(271),u=a(s),c=n(491),d=a(c),f=n(167),p=a(f),h=d.default.AUTH_HIDE_PASSWORD_MODAL,m=u.default.nodesStore,g=function(e){var t=e.message;r.default.addNotification({msg:t,type:"error"})},b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return e})},E=t.validateUser=function(e,t){return b(!_.isEmpty(e),!_.isEmpty(t))},v=t.validatePasswords=function(e,t){return b(!_.isEmpty(e),!_.isEmpty(t),e===t)},y=(t.login=function(e,t,n){return E(e,t)?p.default.login({name:e,password:t}).then(function(e){if(e.error)return g({message:e.reason}),e;var t=l.default.i18n.en_US["auth-logged-in"];if(t&&r.default.addNotification({msg:t}),n&&-1===n.indexOf("login"))return r.default.navigate(n);r.default.navigate("/")}).catch(g):g({message:l.default.i18n.en_US["auth-missing-credentials"]})},t.changePassword=function(e,t,n){return function(){if(!v(t,n))return g({message:l.default.i18n.en_US["auth-passwords-not-matching"]});var a=m.getNodes();p.default.createAdmin({name:e,password:t,node:a[0].node}).then(function(){r.default.addNotification({msg:l.default.i18n.en_US["auth-change-password"]})},g)}},t.createAdmin=function(e,t,n){return function(){var a=m.getNodes()[0].node;if(!E(e,t))return g({message:l.default.i18n.en_US["auth-missing-credentials"]});p.default.createAdmin({name:e,password:t,node:a}).then(function(e){return e.error?g({message:l.default.i18n.en_US["auth-admin-creation-failed-prefix"]+" "+e.reason}):(r.default.addNotification({msg:l.default.i18n.en_US["auth-admin-created"]}),n?r.default.navigate("/login"):void 0)})}},t.authenticate=function(e,t,n){p.default.login({name:e,password:t}).then(function(a){if(a.error)throw a;y(),n(e,t)}).catch(function(){r.default.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})})},t.hidePasswordModal=function(){r.default.dispatch({type:h})});t.logout=function(){r.default.addNotification({msg:"You have been logged out."}),p.default.logout().then(p.default.getSession).then(function(){return r.default.navigate("/")}).catch(g)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(272),l=a(i),s=n(270),u=a(s);t.default={fetchNodes:function(){var e=this,t=new l.default.ClusterNodes;t.fetch().then(function(){e.updateNodes({nodes:t.get("nodes_mapped")})})},updateNodes:function(e){r.default.dispatch({type:u.default.CLUSTER_FETCH_NODES,options:e})},navigateToNodeBasedOnNodeCount:function(e){var t=new l.default.ClusterNodes;t.fetch().then(function(){var n=t.get("all_nodes");return 1===n.length?r.default.navigate(e+n[0]):r.default.navigate("/cluster/disabled",{trigger:!0})})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){l.default.dispatch({type:u.default.CMPNTS_DATABASES_SHOWDELETE_MODAL,options:e})}function r(e){var t=l.default.urls("databaseBaseURL","server",e,"");$.ajax({url:t,dataType:"json",type:"DELETE"}).then(function(){this.showDeleteDatabaseModal({showModal:!0}),l.default.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(l.default.urls("allDBs","app"))}.bind(this)).fail(function(e,t,n){l.default.addNotification({msg:"Could not delete the database, reason "+n+".",type:"error",clear:!0})})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),l=a(i),s=n(273),u=a(s);t.default={deleteDatabase:r,showDeleteDatabaseModal:o}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(18),l=a(i),s=n(2),u=a(s),c=n(533),d=a(c);n(786),d.default.initialize=function(){u.default.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"})},d.default.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",r.default.utils.safeURLName(t),"/_all_docs?limit="+d.default.DocLimit].join("")},u.default.registerUrls("changes",{server:function(e,t){return l.default.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t){return"/database/"+e+"/_changes"+t},apiurl:function(e,t){return l.default.getApiUrl("/"+e+"/_changes"+t)}}),u.default.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.default.getServerUrl("/_all_dbs"+e)},app:function(){return"_all_dbs"},apiurl:function(){return l.default.getApiUrl("/_all_dbs")}}),u.default.registerUrls("databaseBaseURL",{server:function(e){return l.default.getServerUrl("/"+r.default.utils.safeURLName(e))},apiurl:function(e){return l.default.getApiUrl("/"+r.default.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),u.default.registerUrls("permissions",{server:function(e){return l.default.getServerUrl("/"+e+"/_security")},app:function(e){return"/database/"+e+"/permissions"},apiurl:function(e){return l.default.getApiUrl("/"+e+"/_security")}}),t.default=d.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(18),l=a(i),s=n(2),u=a(s),c=n(79),d=a(c),f=u.default.addon();f.DocLimit=100,f.Model=u.default.Model.extend({documentation:function(){return u.default.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new d.default.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return r.default.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+f.DocLimit:"apiurl"===e?l.default.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?u.default.urls("changes","app",this.safeID(),"?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?u.default.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():l.default.getServerUrl("/"+this.safeID())},safeID:function(){return r.default.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new f.Changes({database:this,params:e}),this.changes}}),f.Changes=u.default.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return u.default.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+r.default.utils.queryParams(this.params)),e||(e="server"),u.default.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}}),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeTableHeaderAttribute=t.changeLayout=t.bulkCheckOrUncheck=t.selectDoc=t.newSelectedDocs=t.newResultsAvailable=t.resetState=t.nowLoading=void 0;var o=n(129),r=a(o),i=n(99),l=(t.nowLoading=function(){return{type:r.default.INDEX_RESULTS_REDUX_IS_LOADING}},t.resetState=function(){return{type:r.default.INDEX_RESULTS_REDUX_RESET_STATE}},t.newResultsAvailable=function(e,t,n,a,o,i){return{type:r.default.INDEX_RESULTS_REDUX_NEW_RESULTS,docs:e,params:t,canShowNext:n,docType:a,executionStats:o,warning:i}},t.newSelectedDocs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:r.default.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS,selectedDocs:e}});t.selectDoc=function(e,t){var n=t.findIndex(function(t){return t._id===e._id});return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),l(t)},t.bulkCheckOrUncheck=function(e,t,n,a){return e.forEach(function(e){if((0,i.isJSONDocBulkDeletable)(e,a)){var o=t.findIndex(function(t){return(0,i.getDocId)(e,a)===t._id});n?t.splice(o,1):-1===o&&t.push({_id:(0,i.getDocId)(e,a),_rev:(0,i.getDocRev)(e,a),_deleted:!0})}}),l(t)},t.changeLayout=function(e){return{type:r.default.INDEX_RESULTS_REDUX_CHANGE_LAYOUT,layout:e}},t.changeTableHeaderAttribute=function(e,t){return t[e.index]=e.newSelectedRow,{type:r.default.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE,selectedFieldsTableView:t}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.errorReason=t.getDocRev=t.getDocId=t.getDefaultPerPage=t.hasBulkDeletableDoc=t.isJSONDocBulkDeletable=t.isJSONDocEditable=t.isGhostDoc=t.getDocUrl=void 0;var o=n(11),r=a(o),i=n(2),l=a(i),s=n(40),u=a(s),c=function(e,t,n){void 0===e&&(e="server");var a=r.default.utils.getSafeIdForDoc(t);a||(a="");var o=encodeURIComponent(n);return l.default.urls("document",e,o,a,"?conflicts=true")},d=function(e,t){if(e)return t!==u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&!!Object.keys(e).length&&!!e._id},f=function(e,t){return t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"!==e.type:!(!e._id&&!e.id||!(e._rev||e.value&&e.value.rev))},p=function(e,t){return!!e.find(function(e){return f(e,t)})},h=function(){if(window.localStorage){var e=r.default.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return l.default.constants.MISC.DEFAULT_PAGE_SIZE},m=function(e){return!e||!e.attributes||!Object.keys(e.attributes).length},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.INDEX_RESULTS_DOC_TYPE.VIEW;return t===u.default.INDEX_RESULTS_DOC_TYPE.VIEW?e.id||e._id:t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"===e.type?"_all_docs":e.ddoc:t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._id:e.id||e._id},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.INDEX_RESULTS_DOC_TYPE.VIEW;return t===u.default.INDEX_RESULTS_DOC_TYPE.VIEW?e.value?e.value.rev:e._rev:t!==u.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&t===u.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._rev:void 0},b=function(e){return"Reason: "+(e&&e.message||"n/a")};t.getDocUrl=c,t.isGhostDoc=m,t.isJSONDocEditable=d,t.isJSONDocBulkDeletable=f,t.hasBulkDeletableDoc=p,t.getDefaultPerPage=h,t.getDocId=_,t.getDocRev=g,t.errorReason=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case c.default.INDEX_RESULTS_REDUX_RESET_STATE:return i({},_,{selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:(0,m.getDefaultPerPage)()+1,skip:0},pagination:i({},_.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:i({},_.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1});case c.default.INDEX_RESULTS_REDUX_IS_LOADING:return i({},e,{isLoading:!0});case c.default.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:return i({},e,{selectedDocs:t.selectedDocs});case c.default.INDEX_RESULTS_REDUX_NEW_RESULTS:var n=e.selectedLayout;return t.docType===f.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY&&e.selectedLayout===f.default.LAYOUT_ORIENTATION.METADATA&&(n=f.default.LAYOUT_ORIENTATION.TABLE),i({},e,{docs:t.docs,isLoading:!1,isEditable:!0,fetchParams:i({},e.fetchParams,t.params),pagination:i({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:n,executionStats:t.executionStats,warning:t.warning});case c.default.INDEX_RESULTS_REDUX_CHANGE_LAYOUT:return i({},e,{selectedLayout:t.layout});case c.default.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:return i({},e,{tableView:i({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case c.default.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:return i({},e,{tableView:i({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case c.default.INDEX_RESULTS_REDUX_SET_PER_PAGE:return s.default.utils.localStorageSet("fauxton:perpageredux",t.perPage),i({},e,{pagination:i({},_.pagination,{perPage:t.perPage})});case c.default.INDEX_RESULTS_REDUX_PAGINATE_NEXT:return i({},e,{pagination:i({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case c.default.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:return i({},e,{pagination:i({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case c.default.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:return t.options.includeDocs&&t.options.reduce?t.options.reduce=!1:t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),i({},e,{queryOptionsPanel:i({},e.queryOptionsPanel,t.options)});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFetchParams=t.getPerPage=t.getQueryOptionsPanel=t.getCanShowNext=t.getPrioritizedEnabled=t.getPageStart=t.getDocType=t.getTextEmptyIndex=t.getSelectedLayout=t.getIsEditable=t.getIsLoading=t.getSelectedDocs=t.getDocs=t.getQueryOptionsParams=t.getDisplayedFields=t.getCanShowPrevious=t.getNumDocsSelected=t.getHasDocsSelected=t.getAllDocsSelected=t.getHasResults=t.getPageEnd=t.getShowPrioritizedEnabled=t.getDataForRendering=t.removeGeneratedMangoDocs=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var l=n(11),s=a(l),u=n(129),c=a(u),d=n(40),f=a(d),p=n(565),h=n(566),m=n(99),_={docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:f.default.LAYOUT_ORIENTATION.METADATA,textEmptyIndex:"No Documents Found",docType:f.default.INDEX_RESULTS_DOC_TYPE.VIEW,fetchParams:{limit:(0,m.getDefaultPerPage)()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:(0,m.getDefaultPerPage)(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}},g=t.removeGeneratedMangoDocs=function(e){return"query"!==e.language},b=t.getDataForRendering=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},r=a.filter(g);return f.default.LAYOUT_ORIENTATION.JSON===o.selectedLayout?(0,p.getJsonViewData)(r,o):(0,h.getTableViewData)(r,o)},E=(t.getShowPrioritizedEnabled=function(e){return e.selectedLayout===f.default.LAYOUT_ORIENTATION.TABLE},t.getPageEnd=function(e){return!!E(e)&&e.pagination.pageStart+e.docs.length-1},t.getHasResults=function(e){return!e.isLoading&&e.docs.length>0});t.getAllDocsSelected=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];if(!(0,m.isJSONDocBulkDeletable)(n,e.docType))return"continue";var a=function(t){return(0,m.getDocId)(n,e.docType)===t._id};return e.selectedDocs.some(a)?void 0:{v:!1}},n=0;n<e.docs.length;n++){var a=t(n);switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":r(a)))return a.v}}return!0},t.getHasDocsSelected=function(e){return e.selectedDocs.length>0},t.getNumDocsSelected=function(e){return e.selectedDocs.length},t.getCanShowPrevious=function(e){return e.pagination.currentPage>1},t.getDisplayedFields=function(e,t){return b(e,t).displayedFields||{}},t.getQueryOptionsParams=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var a=t.betweenKeys;n.inclusive_end=a.include,a.startkey&&""!=a.startkey&&(n.start_key=a.startkey),a.endkey&&""!=a.endkey&&(n.end_key=a.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},t.getDocs=function(e){return e.docs},t.getSelectedDocs=function(e){return e.selectedDocs},t.getIsLoading=function(e){return e.isLoading},t.getIsEditable=function(e){return e.isEditable},t.getSelectedLayout=function(e){return e.selectedLayout},t.getTextEmptyIndex=function(e){return e.textEmptyIndex},t.getDocType=function(e){return e.docType},t.getPageStart=function(e){return e.pagination.pageStart},t.getPrioritizedEnabled=function(e){return e.tableView.showAllFieldsTableView},t.getCanShowNext=function(e){return e.pagination.canShowNext},t.getQueryOptionsPanel=function(e){return e.queryOptionsPanel},t.getPerPage=function(e){return e.pagination.perPage},t.getFetchParams=function(e){return e.fetchParams}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SIDEBAR_SET_SELECTED_NAV_ITEM:"SIDEBAR_SET_SELECTED_NAV_ITEM",SIDEBAR_NEW_OPTIONS:"SIDEBAR_NEW_OPTIONS",SIDEBAR_TOGGLE_CONTENT:"SIDEBAR_TOGGLE_CONTENT",SIDEBAR_FETCHING:"SIDEBAR_FETCHING",SIDEBAR_SHOW_DELETE_INDEX_MODAL:"SIDEBAR_SHOW_DELETE_INDEX_MODAL",SIDEBAR_HIDE_DELETE_INDEX_MODAL:"SIDEBAR_HIDE_DELETE_INDEX_MODAL",SIDEBAR_SHOW_CLONE_INDEX_MODAL:"SIDEBAR_SHOW_CLONE_INDEX_MODAL",SIDEBAR_HIDE_CLONE_INDEX_MODAL:"SIDEBAR_HIDE_CLONE_INDEX_MODAL",SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:"SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",SIDEBAR_UPDATED_DESIGN_DOCS:"SIDEBAR_UPDATED_DESIGN_DOCS"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PermanentNotification=t.NotificationCenterButton=t.NotificationController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(602)),h=a(p),m=n(603),g=a(m),b=n(14),E=a(b),v=n(231),y=n(92),O=a(y),N=g.default.notificationStore,S=E.default.Copy,D=t.NotificationController=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{notificationCenterVisible:N.isNotificationCenterVisible(),notificationCenterFilter:N.getNotificationFilter(),notifications:N.getNotifications()}},a.onChange=function(){a.setState(a.getStoreState())},a.getStyles=function(){var e=a.state.notificationCenterVisible,t={key:"1",style:{x:320}};return e&&(t.style={x:(0,v.spring)(0)}),e||(t.style={x:(0,v.spring)(320)}),[t]},a.getNotificationCenterPanel=function(e){var t=e.map(function(e){var t=e.style;return d.default.createElement(A,{key:"1",style:t,visible:a.state.notificationCenterVisible,filter:a.state.notificationCenterFilter,notifications:a.state.notifications})});return d.default.createElement("span",null,t)},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){N.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){N.off("change",this.onChange)}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(T,{notifications:this.state.notifications}),d.default.createElement(v.TransitionMotion,{styles:this.getStyles},this.getNotificationCenterPanel))}}]),t}(d.default.Component),T=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onKeyDown=function(e){27===(e.keyCode||e.which)&&h.default.hideAllVisibleNotifications()},a.getNotifications=function(){return a.props.notifications.length?_.map(a.props.notifications,function(e,t){if(e.visible)return d.default.createElement(C,{notificationId:e.notificationId,isHiding:e.isHiding,key:t,msg:e.msg,type:e.type,escape:e.escape,visibleTime:e.visibleTime,onStartHide:h.default.startHidingNotification,onHideComplete:h.default.hideNotification})},a):null},a.getchildren=function(e){var t=e.map(function(e){var t=e.key,n=e.data,a=e.style,o=n;return d.default.createElement(C,{key:t,style:a,notificationId:o.notificationId,isHiding:o.isHiding,msg:o.msg,type:o.type,escape:o.escape,visibleTime:o.visibleTime,onStartHide:h.default.startHidingNotification,onHideComplete:h.default.hideNotification})});return d.default.createElement("div",null,t)},a.getStyles=function(e){return e||(e=[]),a.props.notifications.filter(function(e){return e.visible}).map(function(t){var n=e.find(function(e){return e.key===t.notificationId.toString()}),a=!n&&{opacity:.5,minHeight:50};return a||t.isHiding?!a&&t.isHiding&&(a={opacity:(0,v.spring)(0,v.presets.stiff),minHeight:(0,v.spring)(0,v.presets.stiff)}):a={opacity:(0,v.spring)(1,v.presets.stiff),minHeight:(0,v.spring)(64)},{key:t.notificationId.toString(),style:a,data:t}})},i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){return d.default.createElement("div",{id:"global-notifications"},d.default.createElement(v.TransitionMotion,{styles:this.getStyles},this.getchildren))}}]),t}(d.default.Component);T.propTypes={notifications:u.default.array.isRequired};var C=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.hide=function(e){e&&e.preventDefault(),a.props.onStartHide(a.props.notificationId)},a.getMsg=function(){return{__html:a.props.escape?_.escape(a.props.msg):a.props.msg}},a.onAnimationComplete=function(){a.props.isHiding&&window.setTimeout(function(){return a.props.onHideComplete(a.props.notificationId)})},i=n,r(a,i)}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.timeout&&window.clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.hide,this.props.visibleTime)}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,a=t.notificationId,o={error:"fonticon-attention-circled",info:"fonticon-info-circled",success:"fonticon-ok-circled"};return 0===n.opacity&&this.props.isHiding&&this.onAnimationComplete(),d.default.createElement("div",{key:a.toString(),className:"notification-wrapper",style:{opacity:n.opacity,minHeight:n.minHeight+"px"}},d.default.createElement("div",{style:{opacity:n.opacity,minHeight:n.minHeight+"px"},className:"global-notification alert alert-"+this.props.type,ref:function(t){return e.notification=t}},d.default.createElement("a",{"data-bypass":!0,href:"#",onClick:this.hide},d.default.createElement("i",{className:"pull-right fonticon-cancel"})),d.default.createElement("i",{className:"notification-icon "+o[this.props.type]}),d.default.createElement("span",{dangerouslySetInnerHTML:this.getMsg()})))}}]),t}(d.default.Component);C.propTypes={msg:u.default.string.isRequired,onStartHide:u.default.func.isRequired,onHideComplete:u.default.func.isRequired,type:u.default.oneOf(["error","info","success"]),escape:u.default.bool,isHiding:u.default.bool.isRequired,visibleTime:u.default.number},C.defaultProps={type:"info",visibleTime:8e3,escape:!0};var w=t.NotificationCenterButton=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={visible:!0},a.hide=function(){a.setState({visible:!1})},a.show=function(){a.setState({visible:!0})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.state.visible?"":" hide");return d.default.createElement("div",{className:e,onClick:h.default.showNotificationCenter})}}]),t}(d.default.Component),A=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNotifications=function(e){var t=void 0;return t=e.length||a.props.notifications.length?e.map(function(e){var t=e.key,n=e.data,o=e.style;return d.default.createElement(I,{isVisible:a.props.visible,item:n,filter:a.props.filter,key:t,style:o})}):d.default.createElement("li",{className:"no-notifications"},"No notifications."),d.default.createElement("ul",{className:"notification-list"},t)},a.getStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.props.notifications.map(function(t){var n=e.find(function(e){return e.key===t.notificationId.toString()}),o=!n&&{opacity:0,height:0};return o||t.type!==a.props.filter&&"all"!==a.props.filter?t.type!==a.props.filter&&(o={opacity:(0,v.spring)(0,v.presets.stiff),height:(0,v.spring)(0,v.presets.stiff)}):o={opacity:(0,v.spring)(1,v.presets.stiff),height:(0,v.spring)(61,v.presets.stiff)},{key:t.notificationId.toString(),style:o,data:t}})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){if(!this.props.visible&&0===this.props.style.x)return null;var e={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};e[this.props.filter]+=" selected";var t="notification-page-mask "+(this.props.visible?" visible":"");return d.default.createElement("div",{id:"notification-center"},d.default.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate("+this.props.style.x+"px)"}},d.default.createElement("header",{className:"flex-layout flex-row"},d.default.createElement("span",{className:"fonticon fonticon-bell"}),d.default.createElement("h1",{className:"flex-body"},"Notifications"),d.default.createElement("button",{type:"button",onClick:h.default.hideNotificationCenter},"×")),d.default.createElement("ul",{className:"notification-filter flex-layout flex-row"},d.default.createElement("li",{className:e.all,title:"All notifications","data-filter":"all",onClick:h.default.selectNotificationFilter.bind(this,"all")},"All"),d.default.createElement("li",{className:e.success,title:"Success notifications","data-filter":"success",onClick:h.default.selectNotificationFilter.bind(this,"success")},d.default.createElement("span",{className:"fonticon fonticon-ok-circled"})),d.default.createElement("li",{className:e.error,title:"Error notifications","data-filter":"error",onClick:h.default.selectNotificationFilter.bind(this,"error")},d.default.createElement("span",{className:"fonticon fonticon-attention-circled"})),d.default.createElement("li",{className:e.info,title:"Info notifications","data-filter":"info",onClick:h.default.selectNotificationFilter.bind(this,"info")},d.default.createElement("span",{className:"fonticon fonticon-info-circled"}))),d.default.createElement("div",{className:"flex-body"},d.default.createElement(v.TransitionMotion,{styles:this.getStyles},this.getNotifications)),d.default.createElement("footer",null,d.default.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:h.default.clearAllNotifications}))),d.default.createElement("div",{className:t,onClick:h.default.hideNotificationCenter}))}}]),t}(d.default.Component);A.propTypes={visible:u.default.bool.isRequired,filter:u.default.string.isRequired,notifications:u.default.array.isRequired};var I=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.clearNotification=function(){var e=a.props.item.notificationId;h.default.clearSingleNotification(e)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e={success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"},t=this.props.item.time.fromNow(),n="fonticon "+e[this.props.item.type],a="all"!==this.props.filter&&this.props.filter!==this.props.item.type,o=this.props.style,r=o.opacity,i=o.height;return 0===r&&0===i?null:d.default.createElement("li",{style:{opactiy:r,height:i+"px",borderBottomColor:"rgba(34, 34, 34, "+r+")"},"aria-hidden":a},d.default.createElement("div",{className:"flex-layout flex-row"},d.default.createElement("span",{className:n}),d.default.createElement("div",{className:"flex-body"},d.default.createElement("p",null,this.props.item.cleanMsg),d.default.createElement("div",{className:"notification-actions"},d.default.createElement("span",{className:"time-elapsed"},t),d.default.createElement("span",{className:"divider"},"|"),d.default.createElement(S,{uniqueKey:O.default.v4(),text:this.props.item.cleanMsg,displayType:"text"}))),d.default.createElement("button",{type:"button",onClick:this.clearNotification},"×")))}}]),t}(d.default.Component);I.propTypes={item:u.default.object.isRequired},t.PermanentNotification=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"getStoreState",value:function(){return{display:N.isPermanentNotificationVisible(),msg:N.getPermanentNotificationMessage()}}},{key:"onChange",value:function(){this.setState(this.getStoreState)}},{key:"componentDidMount",value:function(){N.on("change",this.onChange,this)}},{key:"getMsg",value:function(){return{__html:this.state.msg}}},{key:"getContent",value:function(){if(this.state.display&&this.state.msg)return d.default.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()})}},{key:"render",value:function(){return d.default.createElement("div",{id:"perma-warning"},this.getContent())}}]),t}(d.default.Component),t.default={NotificationController:D,NotificationCenterButton:w,NotificationCenterPanel:A,NotificationPanelRow:I,Notification:C}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TabElementWrapper=t.TabElement=void 0;var o=n(1),r=a(o),i=n(0),l=a(i);a(n(10)),(t.TabElement=function(e){var t=e.selected,n=e.text,a=e.onChange,o=e.iconClass,r=e.badgeText,i=t?"tab-element-checked":"",s=null;return r&&(s=l.default.createElement("span",{className:"tab-element-badge"},r)),l.default.createElement("li",{className:"component-tab-element "+i},l.default.createElement("label",null,l.default.createElement("div",{className:"tab-element-indicator-wrapper"},l.default.createElement("div",{className:"tab-element-indicator"})),l.default.createElement("div",{className:"tab-element-content"},l.default.createElement("i",{className:o}),l.default.createElement("input",{type:"radio",value:n,checked:t,onChange:a}),n,s)))}).propTypes={selected:r.default.bool.isRequired,text:r.default.string.isRequired,onChange:r.default.func.isRequired,iconClass:r.default.string,badgeText:r.default.string},t.TabElementWrapper=function(e){var t=e.children;return l.default.createElement("ul",{className:"component-tab-element-wrapper"},t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.length-1;return e.map(function(e,n){var a=[s.default.createElement(u,{key:n},e.name)];return e.link&&(a=[s.default.createElement(u,{key:n},s.default.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&a.push(s.default.createElement(c,{key:"divider_"+n})),a):a})}Object.defineProperty(t,"__esModule",{value:!0}),t.Breadcrumbs=void 0;var r=n(1),i=a(r),l=n(0),s=a(l);a(n(10)),(t.Breadcrumbs=function(e){var t=e.crumbs;return s.default.createElement("div",{className:"faux-header__breadcrumbs"},o(t))}).propTypes={crumbs:i.default.array.isRequired};var u=function(e){var t=e.children;return s.default.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},c=function(){return s.default.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){T.default.dispatch({type:I.default.SELECT_REDUCE_CHANGE,reduceSelectedOption:e})}function r(e){T.default.dispatch({type:I.default.VIEW_NAME_CHANGE,name:e})}function i(e){T.default.dispatch({type:I.default.EDIT_INDEX,options:e})}function l(){T.default.dispatch({type:I.default.CLEAR_INDEX})}function s(e){var t=this;e.designDocs.fetch({reset:!0}).then(function(){t.editIndex(e)},function(t){var n="Error";t.responseJSON&&"not_found"===t.responseJSON.error&&(n="The "+e.designDocs.database.safeID()+" database does not exist",T.default.navigate("/",{trigger:!0})),T.default.addNotification({msg:n,type:"error",clear:!0})})}function u(e){return!e.newView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName}function c(e){var t=e.designDoc;t.setDdocView(e.viewName,e.map,e.reduce),T.default.addNotification({msg:"Saving View...",type:"info",clear:!0}),u(e)&&t.removeDdocView(e.originalViewName),t.save().then(function(){T.default.addNotification({msg:"View Saved.",type:"success",clear:!0}),e.newView||e.originalDesignDocName===e.designDocId||v(y(e.designDocs,e.originalDesignDocName),e.designDocs,"views",e.originalViewName,{onSuccess:function(){P.default.updateDesignDocs(e.designDocs)}}),"new-doc"===e.designDocId&&d(t),T.default.dispatch({type:I.default.VIEW_SAVED});var n=T.default.urls("view","showView",e.database.safeID(),t.safeID(),S.default.utils.safeURLName(e.viewName));T.default.navigate(n,{trigger:!0})},function(e){T.default.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: "+e.responseJSON.reason:""),type:"error",clear:!0})})}function d(e){T.default.dispatch({type:I.default.VIEW_ADD_DESIGN_DOC,designDoc:e.toJSON()})}function f(e){function t(){if(e.isOnIndex){var t=T.default.urls("allDocs","app",e.database.safeID(),"?limit="+T.default.constants.DATABASES.DOCUMENT_LIMIT);T.default.navigate(t)}P.default.updateDesignDocs(e.designDocs),T.default.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),T.default.dispatch({type:k.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL})}return v(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:t})}function p(e){var t=O(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("views");if(n&&_.has(n,e.newIndexName))return void T.default.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});n||(n={});var a=y(e.designDocs,"_design/"+e.sourceDesignDocName),o=a.toJSON();n[e.newIndexName]=o.views[e.sourceIndexName],t.set({views:n}),t.save().then(function(){e.onComplete(),T.default.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),P.default.updateDesignDocs(e.designDocs)},function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;T.default.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})})}function h(e,t,n){T.default.navigate("#"+T.default.urls("view","edit",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)))}function m(e){T.default.dispatch({type:I.default.VIEW_UPDATE_MAP_CODE,code:e})}function g(e){T.default.dispatch({type:I.default.VIEW_UPDATE_REDUCE_CODE,code:e})}function b(e){T.default.dispatch({type:I.default.DESIGN_DOC_CHANGE,options:{value:e}})}function E(e){T.default.dispatch({type:I.default.DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}function v(e,t,n,a,o){var r=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;T.default.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),i=e.get(n)||{};delete i[a];var l={};l[n]=i,e.set(l);var s,u=T.default.getIndexTypePropNames(),c=_.some(u,function(t){return e.get(t)&&_.keys(e.get(t)).length>0}),d=!1;return c?s=e.save():(s=e.destroy(),d=!0),s.then(function(){d&&t.remove(e.id),r.onSuccess()},r.onError)}function y(e,t){return e.find(function(e){return e.id===t}).dDocModel()}function O(e,t,n,a){if("new-doc"===t){var o={_id:"_design/"+n,views:{},language:"javascript"};return new w.default.Doc(o,{database:a})}var r=e.find(function(e){return e.id===t});return r?r.dDocModel():null}Object.defineProperty(t,"__esModule",{value:!0});var N=n(11),S=a(N),D=n(2),T=a(D),C=n(79),w=a(C),A=n(300),I=a(A),R=n(64),P=a(R),L=n(101),k=a(L);t.default={helpers:{findDesignDoc:y,getDesignDoc:O},safeDeleteIndex:v,selectReduceChanged:o,changeViewName:r,editIndex:i,clearIndex:l,fetchDesignDocsBeforeEdit:s,shouldRemoveDdocView:u,saveView:c,addDesignDoc:d,deleteView:f,cloneView:p,gotoEditViewPage:h,updateMapCode:m,updateReduceCode:g,selectDesignDoc:b,updateNewDesignDocName:E}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INDEX_RESULTS_NEW_RESULTS:"INDEX_RESULTS_NEW_RESULTS",INDEX_RESULTS_RESET:"INDEX_RESULTS_RESET",INDEX_RESULTS_SELECT_DOC:"INDEX_RESULTS_SELECT_DOC",INDEX_RESULTS_CLEAR_RESULTS:"INDEX_RESULTS_CLEAR_RESULTS",INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS:"INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS",INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE:"INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE",INDEX_RESULTS_CLEAR_SELECTED_ITEMS:"INDEX_RESULTS_CLEAR_SELECTED_ITEMS",INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW:"INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW",INDEX_RESULTS_REDUX_NEW_RESULTS:"INDEX_RESULTS_REDUX_NEW_RESULTS",INDEX_RESULTS_REDUX_IS_LOADING:"INDEX_RESULTS_REDUX_IS_LOADING",INDEX_RESULTS_REDUX_CHANGE_LAYOUT:"INDEX_RESULTS_REDUX_CHANGE_LAYOUT",INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:"INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",INDEX_RESULTS_REDUX_SET_PER_PAGE:"INDEX_RESULTS_REDUX_SET_PER_PAGE",INDEX_RESULTS_REDUX_PAGINATE_NEXT:"INDEX_RESULTS_REDUX_PAGINATE_NEXT",INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:"INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:"INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:"INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",INDEX_RESULTS_REDUX_RESET_STATE:"INDEX_RESULTS_REDUX_RESET_STATE",INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:"INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mangoQueryDocs=t.mangoQuery=t.mergeFetchParams=t.fetchIndexes=t.createIndex=t.fetchQueryExplain=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(11),i=a(r),l=n(24),s=n(2),u=a(s),c=n(40),d=a(c),f=(t.fetchQueryExplain=function(e,t){var n=u.default.urls("mango","explain-server",encodeURIComponent(e));return(0,l.post)(n,t,{rawBody:!0}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e})},t.createIndex=function(e,t){var n=u.default.urls("mango","index-server",i.default.utils.safeURLName(e));return(0,l.post)(n,t,{rawBody:!0}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e})},t.fetchIndexes=function(e,t){var n=i.default.utils.queryString(t),a=u.default.urls("mango","index-server",i.default.utils.safeURLName(e));return a=a+(-1!==a.indexOf("?")?"&":"?")+n,(0,l.get)(a).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX}})},null),p=function(e){return null===f?new u.default.Promise(function(t){m(e,{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then(function(e){f=200==e.status,t(f)})}):Promise.resolve(f)},h=t.mergeFetchParams=function(e,t){var n=t.limit,a=t.limit-1,r=Math.floor(t.skip/a)+1,i=r*a-e.limit;return i>=0&&(n=a-i),o({},e,{limit:n,skip:e.skip?t.skip+e.skip:t.skip})},m=t.mangoQuery=function(e,t,n){var a=u.default.urls("mango","query-server",encodeURIComponent(e)),o=h(t,n);return(0,l.post)(a,o,{raw:!0})};t.mangoQueryDocs=function(e,t,n){return p(e).then(function(a){return a&&(t.execution_stats=!0),m(e,t,n).then(function(e){return e.json()}).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:d.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY,executionStats:e.execution_stats,warning:e.warning}})})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),i=a(r),l=function(e){var t=e.def,n=e.type,a=[],o=void 0;return a=t.fields.reduce(function(e,t,a){return 0===a?e.push(n+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e},[]),a.length||(o=i.default.getExtensions("mango:additionalIndexes")[0],a=o?o.createHeader({def:t,type:n}):[n+": "+(t.selector?JSON.stringify(t.selector):"{}")]),a.join(", ")},s=function(e){return JSON.stringify(e,null,3)},u=function(e){var t=o({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")};t.default={getIndexName:l,formatCode:s,getIndexContent:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(11),i=a(r),l=n(2),s=a(l),u=n(24),c=n(647),d=a(c),f=s.default.addon();f.Doc=s.default.Model.extend({idAttribute:"_id",documentation:function(){return s.default.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return s.default.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0)},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return i.default.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!(!this.isDdoc()||"query"!==this.get("language")&&(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var a=this.get("views");a||(a={},this.set({language:"javascript"}));var o=a[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,a[e]=o,this.set({views:a}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new f.Doc(e,{database:this.database})):this},safeID:function(){return i.default.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return(0,u.deleteRequest)(e).then(function(e){if(e.error)throw new Error(e.reason||e.error);return e})},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=o({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),f.AllDocs=d.default.extend({model:f.Doc,documentation:function(){return s.default.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+i.default.utils.queryParams(t):this.params&&(n="?"+i.default.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),s.default.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map(function(e){return{_id:e.id,_rev:e.get("_rev")}});return new f.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return!!this.viewMeta&&(this.viewMeta.update_seq||!1)},parse:function(e){var t=e.rows,n=_.filter(t,function(e){return e.value});return e.rows=_.map(n,function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t}),d.default.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}}),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictModal=t.ErrorModal=t.DeleteModal=void 0;var o=n(1),r=a(o),i=n(0),l=a(i),s=n(20),u=n(14),c=a(u),d=c.default.ConfirmButton,f=t.DeleteModal=function(e){var t=e.visible,n=e.onClose,a=e.onClick,o=e.multipleDocs,r=e.isReplicationDB;if(!t)return null;var i="",u="Delete "+(r?"Document":"Replication Job"),c="Deleting a replication "+(r?"document":"job")+" stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.";return o>1&&(i="You are deleting <strong>"+o+"</strong> replication "+(r?"documents":"jobs")+".",u="Delete "+(r?"Documents":"Replication Jobs")),l.default.createElement(s.Modal,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,"Verify Deletion")),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",{dangerouslySetInnerHTML:{__html:i}}),l.default.createElement("p",null,c)),l.default.createElement(s.Modal.Footer,null,l.default.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),l.default.createElement(d,{customIcon:"icon-trash",text:u,onClick:a})))};f.propTypes={visible:r.default.bool.isRequired,isReplicationDB:r.default.bool.isRequired,onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,multipleDocs:r.default.number.isRequired},f.defaultProps={isReplicationDB:!0},(t.ErrorModal=function(e){var t=e.visible,n=e.onClose,a=e.errorMsg,o=e.status;if(!t)return null;var r="Replication Error",i=l.default.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(r="Replication Error - Failed",i=null),l.default.createElement(s.Modal,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,r)),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",null,a),i),l.default.createElement(s.Modal.Footer,null))}).propTypes={visible:r.default.bool.isRequired,onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,errorMsg:r.default.string.isRequired},(t.ConflictModal=function(e){var t=e.visible,n=e.docId,a=e.onClose,o=e.onClick;return t?l.default.createElement(s.Modal,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return a()}},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,"Custom ID Conflict")),l.default.createElement(s.Modal.Body,null,l.default.createElement("p",null,"A replication document with ID ",l.default.createElement("code",null,n)," already exists."),l.default.createElement("p",null,"You can overwrite the existing document, or change the new replication job’s document ID."),l.default.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),l.default.createElement(s.Modal.Footer,null,l.default.createElement("button",{onClick:a,className:"btn replication__error-cancel"},"Change Document ID"),l.default.createElement("button",{onClick:o,className:"btn replication__error-continue"},l.default.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null}).propTypes={visible:r.default.bool.isRequired,onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,docId:r.default.string.isRequired}},function(e,t,n){"use strict";var a=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=d[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),"\\"!==e&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function a(e){for(var a=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],o=[],r="^"===a[0],i=r?1:0,l=a.length;i<l;++i){var s=a[i];if(/\\[bdsw]/i.test(s))e.push(s);else{var u,s=t(s);i+2<l&&"-"===a[i+1]?(u=t(a[i+2]),i+=2):u=s,o.push([s,u]),u<65||s>122||(u<65||s>90||o.push([32|Math.max(65,s),32|Math.min(u,90)]),u<97||s>122||o.push([-33&Math.max(97,s),-33&Math.min(u,122)]))}}for(o.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]}),a=[],s=[NaN,NaN],i=0;i<o.length;++i)l=o[i],l[0]<=s[1]+1?s[1]=Math.max(s[1],l[1]):a.push(s=l);for(o=["["],r&&o.push("^"),o.push.apply(o,e),i=0;i<a.length;++i)l=a[i],o.push(n(l[0])),l[1]>l[0]&&(l[1]+1>l[0]&&o.push("-"),o.push(n(l[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],l=0,s=0;l<n;++l){var u=t[l];"("===u?++s:"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(o[u]=-1)}for(l=1;l<o.length;++l)-1===o[l]&&(o[l]=++r);for(s=l=0;l<n;++l)u=t[l],"("===u?(++s,void 0===o[s]&&(t[l]="(?:")):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(t[l]="\\"+o[s]);for(s=l=0;l<n;++l)"^"===t[l]&&"^"!==t[l+1]&&(t[l]="");if(e.ignoreCase&&i)for(l=0;l<n;++l)u=t[l],e=u.charAt(0),u.length>=2&&"["===e?t[l]=a(u):"\\"!==e&&(t[l]=u.replace(/[A-Za-z]/g,function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"}));return t.join("")}for(var r=0,i=!1,l=!1,s=0,u=e.length;s<u;++s){var c=e[s];if(c.ignoreCase)l=!0;else if(/[a-z]/i.test(c.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){i=!0,l=!1;break}}for(var d={b:8,t:9,n:10,v:11,f:12,r:13},f=[],s=0,u=e.length;s<u;++s){if(c=e[s],c.global||c.multiline)throw Error(""+c);f.push("(?:"+o(c)+")")}return RegExp(f.join("|"),l?"gi":"g")}function t(e){function t(e){switch(e.nodeType){case 1:if(o.test(e.className))break;for(var n=e.firstChild;n;n=n.nextSibling)t(n);"BR"!==(n=e.nodeName)&&"LI"!==n||(r[s]="\n",l[s<<1]=i++,l[s++<<1|1]=e);break;case 3:case 4:n=e.nodeValue,n.length&&(n=u?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),r[s]=n,l[s<<1]=i,i+=n.length,l[s++<<1|1]=e)}}var n,o=/(?:^|\s)nocode(?:\s|$)/,r=[],i=0,l=[],s=0;e.currentStyle?n=e.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,a).getPropertyValue("white-space"));var u=n&&"pre"===n.substring(0,3);return t(e),{a:r.join("").replace(/\n$/,""),c:l}}function n(e,t,n,a){t&&(e={a:t,d:e},n(e),a.push.apply(a,e.e))}function o(t,o){function r(e){for(var t=e.d,a=[t,"pln"],c=0,d=e.a.match(i)||[],f={},p=0,h=d.length;p<h;++p){var m,_=d[p],g=f[_],b=void 0;if("string"==typeof g)m=!1;else{var E=l[_.charAt(0)];if(E)b=_.match(E[1]),g=E[0];else{for(m=0;m<u;++m)if(E=o[m],b=_.match(E[1])){g=E[0];break}b||(g="pln")}!(m=g.length>=5&&"lang-"===g.substring(0,5))||b&&"string"==typeof b[1]||(m=!1,g="src"),m||(f[_]=g)}if(E=c,c+=_.length,m){m=b[1];var v=_.indexOf(m),y=v+m.length;b[2]&&(y=_.length-b[2].length,v=y-m.length),g=g.substring(5),n(t+E,_.substring(0,v),r,a),n(t+E+v,m,s(g,m),a),n(t+E+y,_.substring(y),r,a)}else a.push(t+E,g)}e.e=a}var i,l={};!function(){for(var n=t.concat(o),r=[],s={},u=0,c=n.length;u<c;++u){var d=n[u],f=d[3];if(f)for(var p=f.length;--p>=0;)l[f.charAt(p)]=d;d=d[1],f=""+d,s.hasOwnProperty(f)||(r.push(d),s[f]=a)}r.push(/[\S\s]/),i=e(r)}();var u=o.length;return r}function r(e){var t=[],n=[];e.tripleQuotedStrings?t.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,a,"'\""]):e.multiLineStrings?t.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,a,"'\"`"]):t.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,a,"\"'"]),e.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,a]);var r=e.hashComments;return r&&(e.cStyleComments?(r>1?t.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,a,"#"]):t.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,a,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,a])):t.push(["com",/^#[^\n\r]*/,a,"#"])),e.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,a]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,a])),e.regexLiterals&&n.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*\/])(?:[^\/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(r=e.types)&&n.push(["typ",r]),e=(""+e.keywords).replace(/^ | $/g,""),e.length&&n.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),a]),t.push(["pln",/^\s+/,a," \r\n\t "]),n.push(["lit",/^@[$_a-z][\w$@]*/i,a],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,a],["pln",/^[$_a-z][\w$@]*/i,a],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,a,"0123456789"],["pln",/^\\[\S\s]?/,a],["pun",/^.[^\s\w"-$'.\/@\\`]*/,a]),o(t,n)}function i(e,t){function n(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)n(e);break;case 3:case 4:if(u){var t=e.nodeValue,a=t.match(l);if(a){var r=t.substring(0,a.index);e.nodeValue=r,(t=t.substring(a.index+a[0].length))&&e.parentNode.insertBefore(s.createTextNode(t),e.nextSibling),o(e),r||e.parentNode.removeChild(e)}}}}function o(e){function t(e,n){var a=n?e.cloneNode(!1):e,o=e.parentNode;if(o){var o=t(o,1),r=e.nextSibling;o.appendChild(a);for(var i=r;i;i=r)r=i.nextSibling,o.appendChild(i)}return a}for(;!e.nextSibling;)if(!(e=e.parentNode))return;for(var n,e=t(e.nextSibling,0);(n=e.parentNode)&&1===n.nodeType;)e=n;c.push(e)}var r,i=/(?:^|\s)nocode(?:\s|$)/,l=/\r\n?|\n/,s=e.ownerDocument;e.currentStyle?r=e.currentStyle.whiteSpace:window.getComputedStyle&&(r=s.defaultView.getComputedStyle(e,a).getPropertyValue("white-space"));var u=r&&"pre"===r.substring(0,3);for(r=s.createElement("LI");e.firstChild;)r.appendChild(e.firstChild);for(var c=[r],d=0;d<c.length;++d)n(c[d]);t===(0|t)&&c[0].setAttribute("value",t);var f=s.createElement("OL");f.className="linenums";for(var p=Math.max(0,t-1|0)||0,d=0,h=c.length;d<h;++d)r=c[d],r.className="L"+(d+p)%10,r.firstChild||r.appendChild(s.createTextNode(" ")),f.appendChild(r);e.appendChild(f)}function l(e,t){for(var n=t.length;--n>=0;){var a=t[n];v.hasOwnProperty(a)?window.console&&console.warn("cannot override language handler %s",a):v[a]=e}}function s(e,t){return e&&v.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),v[e]}function u(e){var n=e.g;try{var a=t(e.h),o=a.a;e.a=o,e.c=a.c,e.d=0,s(n,o)(e);var r=/\bMSIE\b/.test(navigator.userAgent),n=/\n/g,i=e.a,l=i.length,a=0,u=e.c,c=u.length,o=0,d=e.e,f=d.length,e=0;d[f]=l;var p,h;for(h=p=0;h<f;)d[h]!==d[h+2]?(d[p++]=d[h++],d[p++]=d[h++]):h+=2;for(f=p,h=p=0;h<f;){for(var m=d[h],_=d[h+1],g=h+2;g+2<=f&&d[g+1]===_;)g+=2;d[p++]=m,d[p++]=_,h=g}for(d.length=p;o<c;){var b,E=u[o+2]||l,v=d[e+2]||l,g=Math.min(E,v),y=u[o+1];if(1!==y.nodeType&&(b=i.substring(a,g))){r&&(b=b.replace(n,"\r")),y.nodeValue=b;var O=y.ownerDocument,N=O.createElement("SPAN");N.className=d[e+1];var S=y.parentNode;S.replaceChild(N,y),N.appendChild(y),a<E&&(u[o+1]=y=O.createTextNode(i.substring(g,E)),S.insertBefore(y,N.nextSibling))}a=g,a>=E&&(o+=2),a>=v&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c=["break,continue,do,else,for,if,return,while"],d=[[c,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],f=[d,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[d,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],h=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[d,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],m=[c,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],_=[c,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],c=[c,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],g=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,b=/\S/,E=r({keywords:[f,h,d,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+m,_,c],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),v={};l(E,["default-code"]),l(o([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(o([["pln",/^\s+/,a," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,a,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'\/>]|\/(?=\s)))/],["pun",/^[\/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),l(o([],[["atv",/^[\S\s]+/]]),["uq.val"]),l(r({keywords:f,hashComments:!0,cStyleComments:!0,types:g}),["c","cc","cpp","cxx","cyc","m"]),l(r({keywords:"null,true,false"}),["json"]),l(r({keywords:h,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:g}),["cs"]),l(r({keywords:p,cStyleComments:!0}),["java"]),l(r({keywords:c,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),l(r({keywords:m,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),l(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),l(r({keywords:_,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),l(r({keywords:d,cStyleComments:!0,regexLiterals:!0}),["js"]),l(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(o([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var a=document.createElement("PRE");return a.innerHTML=e,n&&i(a,n),u({g:t,i:n,h:a}),a.innerHTML},window.prettyPrint=function(e){function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?c.now()+250:1/0;f<o.length&&c.now()<n;f++){var a=o[f],r=a.className;if(r.indexOf("prettyprint")>=0){var l,s,r=r.match(p);if(s=!r){s=a;for(var h=void 0,m=s.firstChild;m;m=m.nextSibling)var _=m.nodeType,h=1===_?h?s:m:3===_&&b.test(m.nodeValue)?s:h;s=(l=h===s?void 0:h)&&"CODE"===l.tagName}for(s&&(r=l.className.match(p)),r&&(r=r[1]),s=!1,h=a.parentNode;h;h=h.parentNode)if(("pre"===h.tagName||"code"===h.tagName||"xmp"===h.tagName)&&h.className&&h.className.indexOf("prettyprint")>=0){s=!0;break}s||((s=!!(s=a.className.match(/\blinenums\b(?::(\d+))?/))&&(!s[1]||!s[1].length||+s[1]))&&i(a,s),d={g:r,h:a,i:s},u(d))}}f<o.length?setTimeout(t,250):e&&e()}for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],o=[],r=0;r<n.length;++r)for(var l=0,s=n[r].length;l<s;++l)o.push(n[r][l]);var n=a,c=Date;c.now||(c={now:function(){return+new Date}});var d,f=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;t()},window.PR={createSimpleLexer:o,registerLangHandler:l,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.name,n=e.password,a=e.node,o=d.default.getServerUrl("/_node/"+a+"/_config/admins/"+t);return(0,f.put)(o,n)}function r(){if(p)return p;var e=d.default.getServerUrl("/_session"),t=(0,f.get)(e).then(function(e){return e.userCtx.name&&(p=t),e.userCtx});return t}function i(e){var t=d.default.getServerUrl("/_session");return(0,f.postFormEncoded)(t,u.default.utils.queryParams(e))}function l(){p=null;var e=d.default.getServerUrl("/_session");return(0,f.deleteFormEncoded)(e,u.default.utils.queryParams({username:"_",password:"_"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.createAdmin=o,t.getSession=r,t.login=i,t.logout=l;var s=n(11),u=a(s),c=n(18),d=a(c),f=n(24),p=void 0;t.default={createAdmin:o,login:i,logout:l,getSession:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditor=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(2)),f=a(d),p=n(180),h=a(p);n(649);var m=n(276);n(338),n(181),n(182),(t.CodeEditor=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={originalCode:a.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""},a.hasChanged=function(){return!_.isEqual(a.state.originalCode,a.getValue())},a.clearChanges=function(){a.setState({originalCode:a.getValue()})},a.setupAce=function(e,t){a.editor=h.default.edit(a.ace),a.editor.$blockScrolling=1/0,t&&a.setValue(e.defaultCode),a.editor.setShowPrintMargin(e.showPrintMargin),a.editor.autoScrollEditorIntoView=e.autoScrollEditorIntoView,a.editor.setOption("highlightActiveLine",a.props.highlightActiveLine),a.props.setHeightToLineCount&&a.setHeightToLineCount(),a.props.ignorableErrors&&a.removeIgnorableAnnotations(),a.addCommands(),a.editor.getSession().setMode("ace/mode/"+e.mode),a.editor.setTheme("ace/theme/"+e.theme),a.editor.setFontSize(e.fontSize),a.editor.getSession().setTabSize(2),a.editor.getSession().setUseSoftTabs(!0),a.props.autoFocus&&a.editor.focus()},a.addCommands=function(){_.each(a.props.editorCommands,function(e){this.editor.commands.addCommand(e)},a)},a.setupEvents=function(){a.editor.on("blur",_.bind(a.onBlur,a)),a.editor.on("change",_.bind(a.onContentChange,a)),a.props.stringEditModalEnabled&&(a.editor.on("changeSelection",_.bind(a.showHideEditStringGutterIcon,a)),a.editor.getSession().on("changeBackMarker",_.bind(a.showHideEditStringGutterIcon,a)),a.editor.getSession().on("changeScrollTop",_.bind(a.updateEditStringGutterIconPosition,a))),a.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",a.quitWarningMsg),f.default.beforeUnload("editor_"+a.props.id,a.quitWarningMsg))},a.onBlur=function(){a.props.blur(a.getValue())},a.onContentChange=function(){a.props.setHeightToLineCount&&a.setHeightToLineCount(),a.props.change(a.getValue())},a.quitWarningMsg=function(){if(a.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."},a.removeEvents=function(){a.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",a.quitWarningMsg),f.default.removeBeforeUnload("editor_"+a.props.id))},a.setHeightToLineCount=function(){var e=a.editor.getSession().getDocument().getLength(),t=e>a.props.maxLines?a.props.maxLines:e;a.editor.setOptions({maxLines:t,minLines:a.props.minLines})},a.getAnnotations=function(){return a.editor.getSession().getAnnotations()},a.isIgnorableError=function(e){return-1!==_.indexOf(a.props.ignorableErrors,e)},a.removeIgnorableAnnotations=function(){var e=a.isIgnorableError;a.editor.getSession().on("changeAnnotation",function(){var t=this.editor.getSession().getAnnotations(),n=_.reduce(t,function(t,n){return e(n.raw)||t.push(n),t},[]);t.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(a))},a.showHideEditStringGutterIcon=function(){return a.hasErrors()||!a.parseLineForStringMatch()?(a.setState({stringEditIconVisible:!1}),!1):(a.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:a.getGutterIconPosition()}}),!0)},a.updateEditStringGutterIconPosition=function(){a.state.stringEditIconVisible&&a.setState({stringEditIconStyle:{top:a.getGutterIconPosition()}})},a.getGutterIconPosition=function(){var e=a.getRowHeight(),t=a.editor.session.getScrollTop();return e*a.documentToScreenRow(a.getSelectionStart().row)-t+"px"},a.parseLineForStringMatch=function(){var e=a.getSelectionStart().row,t=a.getSelectionEnd().row;if(e>=0&&t>=0&&e===t&&a.isRowExpanded(e)){var n=a.getLine(e),o=n.match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(o)return o}return!1},a.openStringEditModal=function(){var e=a.parseLineForStringMatch(),t=e[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),a.setState({stringEditModalVisible:!0,stringEditModalValue:t})},a.saveStringEditModal=function(e){var t=a.parseLineForStringMatch(),n=t[1]||"",o=t[2]||"",r=t[3],i="";","===r.substring(r.length-1)&&(i=","),a.replaceCurrentLine(n+o+JSON.stringify(e)+i+"\n"),a.closeStringEditModal()},a.closeStringEditModal=function(){a.setState({stringEditModalVisible:!1})},a.hasErrors=function(){return!_.every(a.getAnnotations(),function(e){return this.isIgnorableError(e.raw)},a)},a.setReadOnly=function(e){a.editor.setReadOnly(e)},a.setValue=function(e,t){t=t||-1,a.editor.setValue(e,t)},a.getValue=function(){return a.editor.getValue()},a.getEditor=function(){return a},a.getLine=function(e){return a.editor.session.getLine(e)},a.getSelectionStart=function(){return a.editor.getSelectionRange().start},a.getSelectionEnd=function(){return a.editor.getSelectionRange().end},a.getRowHeight=function(){return a.editor.renderer.layerConfig.lineHeight},a.isRowExpanded=function(e){return!a.editor.getSession().isRowFolded(e)},a.documentToScreenRow=function(e){return a.editor.getSession().documentToScreenRow(e,0)},a.replaceCurrentLine=function(e){a.editor.getSelection().selectLine(),a.editor.insert(e),a.editor.getSelection().moveCursorUp()},i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",null,u.default.createElement("div",{ref:function(t){return e.ace=t},className:"js-editor",id:this.props.id}),u.default.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},u.default.createElement("i",{className:"icon icon-edit"})),u.default.createElement(m.StringEditModal,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}]),t}(u.default.Component)).defaultProps={id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadLines=void 0;var o=n(0),r=a(o);a(n(10)),t.LoadLines=function(){return r.default.createElement("div",{className:"loading-lines"},r.default.createElement("div",{id:"line1"}," "),r.default.createElement("div",{id:"line2"}," "),r.default.createElement("div",{id:"line3"}," "),r.default.createElement("div",{id:"line4"}," "))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewsTabsSidebarLayout=t.ChangesSidebarLayout=t.DocsTabsSidebarLayout=t.TabsSidebarContent=t.TabsSidebarHeader=void 0;var o=n(1),r=a(o),i=n(0),l=a(i),s=n(102),u=n(590),c=a(u),d=n(540),f=a(d),p=n(538),h=a(p),m=n(301),_=a(m),g=n(544),b=a(g),E=n(541),v=a(E),y=n(309),O=a(y),N=n(310),S=a(N),D=n(308),T=a(D),C=n(307),w=n(40),A=a(w),I=n(52),R=a(I),P=t.TabsSidebarHeader=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,a=e.database,o=e.dbName,r=e.dropDownLinks,i=e.docURL,u=e.endpoint,c=e.endpointAddQueryOptions,d=e.fetchUrl,p=e.ddocsOnly,h=e.queryDocs,m=e.selectedNavItem;return l.default.createElement("header",{className:"two-panel-header"},l.default.createElement("div",{className:"flex-layout flex-row"},l.default.createElement("div",{id:"header-docs-left"},l.default.createElement(f.default,{dbName:o,dropDownLinks:r})),l.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},l.default.createElement("div",{id:"right-header",className:"flex-fill"},l.default.createElement(v.default,{hideQueryOptions:t,hideJumpToDoc:n,database:a,fetchUrl:d,ddocsOnly:p,queryDocs:h,selectedNavItem:m})),l.default.createElement(T.default,{docURL:i,endpoint:u,endpointAddQueryOptions:c}),l.default.createElement("div",{id:"notification-center-btn",className:"flex-fill"},l.default.createElement(s.NotificationCenterButton,null)))))};P.propTypes={dbName:r.default.string.isRequired,dropDownLinks:r.default.array.isRequired,docURL:r.default.string,endpoint:r.default.string,showIncludeAllDocs:r.default.bool,hideQueryOptions:r.default.bool,hideJumpToDoc:r.default.bool,database:r.default.object.isRequired,queryDocs:r.default.func,selectedNavItem:r.default.object},P.defaultProps={hideHeaderBar:!1};var L=t.TabsSidebarContent=function(e){var t=e.hideFooter,n=e.lowerContent,a=e.upperContent,o=e.fetchUrl,r=e.databaseName,i=e.queryDocs;return l.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},l.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},l.default.createElement(c.default,null)),l.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},l.default.createElement("div",{id:"dashboard-upper-content"},a),l.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),l.default.createElement("div",{id:"footer"},t?null:l.default.createElement(S.default,{databaseName:r,fetchUrl:o,queryDocs:i}))))};L.defaultProps={hideFooter:!1},L.propTypes={hideFooter:r.default.bool,lowerContent:r.default.object,upperContent:r.default.object};var k=(t.DocsTabsSidebarLayout=function(e){var t=e.database,n=e.designDocs,a=e.docURL,o=e.endpoint,r=e.dbName,i=e.dropDownLinks,s=e.fetchUrl,u=e.ddocsOnly,c=e.deleteEnabled,d=void 0===c||c,f=e.selectedNavItem,p=function(e){return(0,C.queryAllDocs)(s,e)};R.default.isViewSelected(f)&&(p=function(e){return(0,C.queryMapReduceView)(s,e)});var h=l.default.createElement(O.default,{fetchUrl:s,designDocs:n,ddocsOnly:u,databaseName:r,fetchAtStartup:!0,queryDocs:p,docType:A.default.INDEX_RESULTS_DOC_TYPE.VIEW,deleteEnabled:d});return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{docURL:a,endpoint:o,endpointAddQueryOptions:!0,dbName:r,dropDownLinks:i,database:t,fetchUrl:s,ddocsOnly:u,queryDocs:p,selectedNavItem:f}),l.default.createElement(L,{lowerContent:h,fetchUrl:s,databaseName:r,queryDocs:p}))},t.ChangesSidebarLayout=function(e){var t=e.docURL,n=e.database,a=e.endpoint,o=e.dbName,r=e.dropDownLinks;return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{docURL:t,endpoint:a,dbName:o,dropDownLinks:r,database:n,hideQueryOptions:!0}),l.default.createElement(L,{upperContent:l.default.createElement(h.default.ChangesTabContent,null),lowerContent:l.default.createElement(h.default.ChangesController,null),hideFooter:!0}))},t.ViewsTabsSidebarLayout=function(e){var t=e.showEditView,n=e.database,a=e.docURL,o=e.endpoint,r=e.dbName,i=e.dropDownLinks,s=t?l.default.createElement(_.default.EditorController,null):l.default.createElement(b.default.DesignDocInfo,null);return l.default.createElement("div",{id:"dashboard",className:"with-sidebar"},l.default.createElement(P,{endpoint:o,docURL:a,dbName:r,dropDownLinks:i,database:n,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),l.default.createElement(L,{lowerContent:s,hideFooter:!0}))});k.defaultProps={showEditView:!0},k.propTypes={showEditView:r.default.bool,docURL:r.default.string.isRequired,endpoint:r.default.string,dbName:r.default.string.isRequired,dropDownLinks:r.default.array.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(132),u=a(s),c=n(64),d=a(c),f=l.default.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new u.default.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),d.default.newOptions(t)},getCrumbs:function(e){return[{type:"back",link:l.default.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=r.default.getParams(e);return{urlParams:t,docParams:u.default.QueryParams.parse(t)}}});t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(0),u=a(s),c=n(101),d=a(c),f={};f.SidebarStore=l.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._designDocs=new Backbone.Collection,this._selected={navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},this._loading=!0,this._toggledSections={},this._deleteIndexModalVisible=!1,this._deleteIndexModalDesignDocName="",this._deleteIndexModalText="",this._deleteIndexModalIndexName="",this._deleteIndexModalOnSubmit=function(){},this._cloneIndexModalVisible=!1,this._cloneIndexDesignDocProp="",this._cloneIndexModalTitle="",this._cloneIndexModalSelectedDesignDoc="",this._cloneIndexModalNewDesignDocName="",this._cloneIndexModalNewIndexName="",this._cloneIndexModalIndexLabel="",this._cloneIndexModalOnSubmit=function(){}},newOptions:function(e){this._database=e.database,this._designDocs=e.designDocs,this._loading=!1,e.selectedNavItem&&(this._selected={navItem:e.selectedNavItem,designDocName:"",designDocSection:"",indexName:""})},updatedDesignDocs:function(e){this._designDocs=e},isDeleteIndexModalVisible:function(){return this._deleteIndexModalVisible},getDeleteIndexModalText:function(){return this._deleteIndexModalText},getDeleteIndexModalOnSubmit:function(){return this._deleteIndexModalOnSubmit},isLoading:function(){return this._loading},getDatabase:function(){return this.isLoading()?{}:this._database},toggleContent:function(e,t){return this._toggledSections[e]?t?this.toggleIndexGroup(e,t):void(this._toggledSections[e].visible=!this._toggledSections[e].visible):void(this._toggledSections[e]={visible:!0,indexGroups:{}})},toggleIndexGroup:function(e,t){var n=this._toggledSections[e].indexGroups[t];if(_.isUndefined(n))return void(this._toggledSections[e].indexGroups[t]=!0);this._toggledSections[e].indexGroups[t]=!n},isVisible:function(e,t){return!!this._toggledSections[e]&&(t?this._toggledSections[e].indexGroups[t]:this._toggledSections[e].visible)},getSelected:function(){return this._selected},setSelected:function(e){this._selected={navItem:e.navItem,designDocName:e.designDocName,designDocSection:e.designDocSection,indexName:e.indexName},e.designDocName&&(_.has(this._toggledSections,e.designDocName)||(this._toggledSections[e.designDocName]={visible:!0,indexGroups:{}}),this._toggledSections[e.designDocName].visible=!0,e.designDocSection&&(this._toggledSections[e.designDocName].indexGroups[e.designDocSection]=!0))},getToggledSections:function(){return this._toggledSections},getDatabaseName:function(){return this.isLoading()?"":this._database.safeID()},getDesignDocs:function(){return this._designDocs},getAvailableDesignDocs:function(){var e=this.getDesignDocs().filter(function(e){return!e.isMangoDoc()});return _.map(e,function(e){return e.id})},getDesignDocList:function(){if(this.isLoading())return{};var e=this._designDocs.toJSON();return e=_.filter(e,function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}),e.map(function(e){return e.safeId=r.default.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)})},showDeleteIndexModal:function(e){this._deleteIndexModalIndexName=e.indexName,this._deleteIndexModalDesignDocName=e.designDocName,this._deleteIndexModalVisible=!0,this._deleteIndexModalText=u.default.createElement("div",null,"Are you sure you want to delete the ",u.default.createElement("code",null,this._deleteIndexModalIndexName)," ",e.indexLabel,"?"),this._deleteIndexModalOnSubmit=e.onDelete},getDeleteIndexModalIndexName:function(){return this._deleteIndexModalIndexName},getDeleteIndexDesignDoc:function(){var e=this._designDocs.find(function(e){return"_design/"+this._deleteIndexModalDesignDocName===e.id},this);return e?e.dDocModel():null},isCloneIndexModalVisible:function(){return this._cloneIndexModalVisible},getCloneIndexModalTitle:function(){return this._cloneIndexModalTitle},showCloneIndexModal:function(e){this._cloneIndexModalIndexLabel=e.indexLabel,this._cloneIndexModalTitle=e.cloneIndexModalTitle,this._cloneIndexModalSourceIndexName=e.sourceIndexName,this._cloneIndexModalSourceDesignDocName=e.sourceDesignDocName,this._cloneIndexModalSelectedDesignDoc="_design/"+e.sourceDesignDocName,this._cloneIndexDesignDocProp="",this._cloneIndexModalVisible=!0,this._cloneIndexModalOnSubmit=e.onSubmit},getCloneIndexModalIndexLabel:function(){return this._cloneIndexModalIndexLabel},getCloneIndexModalOnSubmit:function(){return this._cloneIndexModalOnSubmit},getCloneIndexModalSourceIndexName:function(){return this._cloneIndexModalSourceIndexName},getCloneIndexModalSourceDesignDocName:function(){return this._cloneIndexModalSourceDesignDocName},getCloneIndexDesignDocProp:function(){return this._cloneIndexDesignDocProp},getCloneIndexModalSelectedDesignDoc:function(){return this._cloneIndexModalSelectedDesignDoc},getCloneIndexModalNewDesignDocName:function(){return this._cloneIndexModalNewDesignDocName},getCloneIndexModalNewIndexName:function(){return this._cloneIndexModalNewIndexName},dispatch:function(e){switch(e.type){case d.default.SIDEBAR_SET_SELECTED_NAV_ITEM:this.setSelected(e.options);break;case d.default.SIDEBAR_NEW_OPTIONS:this.newOptions(e.options);break;case d.default.SIDEBAR_TOGGLE_CONTENT:this.toggleContent(e.designDoc,e.indexGroup);break;case d.default.SIDEBAR_FETCHING:this._loading=!0;break;case d.default.SIDEBAR_SHOW_DELETE_INDEX_MODAL:this.showDeleteIndexModal(e.options);break;case d.default.SIDEBAR_HIDE_DELETE_INDEX_MODAL:this._deleteIndexModalVisible=!1;break;case d.default.SIDEBAR_SHOW_CLONE_INDEX_MODAL:this.showCloneIndexModal(e.options);break;case d.default.SIDEBAR_HIDE_CLONE_INDEX_MODAL:this._cloneIndexModalVisible=!1;break;case d.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:this._cloneIndexModalSelectedDesignDoc=e.options.value;break;case d.default.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:this._cloneIndexModalNewDesignDocName=e.options.value;break;case d.default.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:this._cloneIndexModalNewIndexName=e.options.value;break;case d.default.SIDEBAR_UPDATED_DESIGN_DOCS:this.updatedDesignDocs(e.options.designDocs),this._loading=!1;break;default:return}this.triggerChange()}}),f.sidebarStore=new f.SidebarStore,f.sidebarStore.dispatchToken=l.default.dispatcher.register(f.sidebarStore.dispatch),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(316),l=a(i);t.default={toggleNavbarMenu:function(){r.default.dispatch({type:l.default.TOGGLE_NAVBAR_MENU})},addHeaderLink:function(e){r.default.dispatch({type:l.default.ADD_NAVBAR_LINK,link:e})},removeHeaderLink:function(e){r.default.dispatch({type:l.default.REMOVE_NAVBAR_LINK,link:e})},setNavbarVersionInfo:function(e){r.default.dispatch({type:l.default.NAVBAR_SET_VERSION_INFO,version:e})},setNavbarActiveLink:function(e){r.default.dispatch({type:l.default.NAVBAR_ACTIVE_LINK,name:e})},showNavBar:function(){r.default.dispatch({type:l.default.NAVBAR_SHOW})},hideNavBar:function(){r.default.dispatch({type:l.default.NAVBAR_HIDE})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createReplicatorDB=t.deleteReplicatesApi=t.fetchReplicateInfo=t.parseReplicateInfo=t.checkReplicationDocID=t.fetchSchedulerDocs=t.fetchReplicationDocs=t.combineDocsAndScheduler=t.convertState=t.parseReplicationDocs=t.getDocUrl=t.removeSensitiveUrlInfo=t.createReplicationDoc=t.addDocIdAndRev=t.continuous=t.createTarget=t.getTarget=t.getSource=t.removeCredentialsFromUrl=t.getCredentialsFromUrl=t.getAuthHeaders=t.getUsername=t.decodeFullUrl=t.encodeFullUrl=t.supportNewApi=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(264);var r=n(56),i=a(r),l=n(2),s=a(l),u=n(18),c=a(u),d=n(24),f=n(178),p=a(f),h=n(19),m=a(h),_=null,g=t.supportNewApi=function(e){return _&&!e||(_=new s.default.Promise(function(e){var t=c.default.getServerUrl("/_scheduler/jobs");(0,d.get)(t,{raw:!0}).then(function(t){if(t.status>202)return e(!1);e(!0)})})),_},b=t.encodeFullUrl=function(e){if(!e)return"";var t=new URL(e);return t.origin+"/"+encodeURIComponent(t.pathname.slice(1))},E=(t.decodeFullUrl=function(e){if(!e)return"";var t=new URL(e);return t.origin+"/"+decodeURIComponent(t.pathname.slice(1))},t.getUsername=function(){return s.default.session.user().name}),v=t.getAuthHeaders=function(e,t){return e&&t?{Authorization:"Basic "+p.default.encode(e+":"+t)}:{}},y=(t.getCredentialsFromUrl=function(e){var t=e.lastIndexOf("@");if(-1===t)return{username:"",password:""};var n=e.startsWith("https")?8:7,a=e.slice(n,t),o=a.indexOf(":");return{username:a.slice(0,o),password:a.slice(o+1,a.length)}},t.removeCredentialsFromUrl=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)}),O=t.getSource=function(e){var t=e.replicationSource,n=e.localSource,a=e.remoteSource,o=e.sourceAuthType,r=e.sourceAuth,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=l.origin,u=l.pathname,d={};if(t===i.default.REPLICATION_SOURCE.LOCAL){var f=encodeURIComponent(n),p=c.default.getRootUrl({origin:s,pathname:u});d.url=""+p+f}else d.url=b(y(a));return S(d,o,r),d},N=t.getTarget=function(e){var t=e.replicationTarget,n=e.localTarget,a=e.remoteTarget,o=e.targetAuthType,r=e.targetAuth,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=l.origin,u=l.pathname,d={};if(t===i.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===i.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)d.url=b(y(a));else{var f=encodeURIComponent(n),p=c.default.getRootUrl({origin:s,pathname:u});d.url=""+p+f}return S(d,o,r),d},S=function(e,t,n){if(t&&t!==i.default.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===i.default.REPLICATION_AUTH_METHOD.BASIC)e.headers=v(n.username,n.password);else{var a=s.default.getExtensions("Replication:Auth");a&&a.filter(function(e){return e.typeValue===t}).map(function(t){t.setCredentials&&t.setCredentials(e,n)})}else e.headers={}},D=t.createTarget=function(e){return-1!==m.default.indexOf([i.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE,i.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},T=t.continuous=function(e){return e===i.default.REPLICATION_TYPE.CONTINUOUS},C=t.addDocIdAndRev=function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n},w=(t.createReplicationDoc=function(e){var t=e.replicationTarget,n=e.replicationSource,a=e.replicationType,o=e.replicationDocName,r=e.localTarget,i=e.localSource,l=e.remoteTarget,s=e.remoteSource,u=e._rev,c=e.sourceAuthType,d=e.sourceAuth,f=e.targetAuthType,p=e.targetAuth,h=E();return C(o,u,{user_ctx:{name:h,roles:["_admin","_reader","_writer"]},source:O({replicationSource:n,localSource:i,remoteSource:s,sourceAuthType:c,sourceAuth:d}),target:N({replicationTarget:t,replicationSource:n,remoteTarget:l,localTarget:r,targetAuthType:f,targetAuth:p}),create_target:D(t),continuous:T(a)})},t.removeSensitiveUrlInfo=function(e){try{var t=new URL(e);return t.origin+"/"+decodeURIComponent(t.pathname.slice(1))}catch(t){return e}}),A=t.getDocUrl=function(e){var t=e;return e?("object"===(void 0===e?"undefined":o(e))&&(t=e.url),w(t)):""},I=t.parseReplicationDocs=function(e){return e.map(function(e){return e.doc}).map(function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:A(e.source),target:A(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/"+encodeURIComponent(e._id),raw:e}})},R=t.convertState=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},P=t.combineDocsAndScheduler=function(e,t){return e.map(function(e){var n=t.find(function(t){return t.doc_id===e._id});return n?(e.status=R(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e})},L=(t.fetchReplicationDocs=function(){return g().then(function(e){var t=c.default.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=(0,d.get)(t).then(function(e){return e.error?[]:I(e.rows.filter(function(e){return-1===e.id.indexOf("_design/")}))});if(!e)return n;var a=L();return s.default.Promise.join(n,a,function(e,t){return P(e,t)}).catch(function(){return[]})})},t.fetchSchedulerDocs=function(){var e=c.default.getServerUrl("/_scheduler/docs?include_docs=true");return(0,d.get)(e).then(function(e){return e.error?[]:e.docs})}),k=(t.checkReplicationDocID=function(e){return new Promise(function(t){var n=c.default.getServerUrl("/_replicator/"+e);(0,d.get)(n).then(function(e){if("not_found"===e.error)return void t(!1);t(!0)})})},t.parseReplicateInfo=function(e){return e.jobs.filter(function(e){return null===e.database}).map(function(e){return{_id:e.id,source:A(e.source.slice(0,e.source.length-1)),target:A(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:R(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}})});t.fetchReplicateInfo=function(){return g().then(function(e){if(!e)return[];var t=c.default.getServerUrl("/_scheduler/jobs");return(0,d.get)(t).then(function(e){return k(e)})})},t.deleteReplicatesApi=function(e){var t=e.map(function(e){var t={replication_id:e._id,cancel:!0},n=c.default.getServerUrl("/_replicate");return(0,d.post)(n,t)});return s.default.Promise.all(t)},t.createReplicatorDB=function(){var e=c.default.getServerUrl("/_replicator");return(0,d.put)(e).then(function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(o,r){try{var i=t[o](r),l=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setNodeCount=t.setBindAddressForSetupNode=t.setPortForSetupNode=t.setPassword=t.setUsername=t.alterBindAddressAdditionalNode=t.alterRemoteAddressAdditionalNode=t.alterPortAdditionalNode=t.resetAddtionalNodeForm=t.addNode=t.setupSingleNode=t.finishClusterSetup=t.getClusterStateFromCouch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(2),l=a(i),s=n(634),u=n(328),c=n(24),d=n(167),f=a(d),p=function(e,t){var n=t?" Error:"+t:"";l.default.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})};t.getClusterStateFromCouch=function(){return function(){var e=o(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.default.urls("cluster_setup","server"),e.next=3,(0,c.get)(n);case 3:a=e.sent,t({type:u.SETUP_SET_CLUSTERSTATUS,options:{state:a.state}});case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},t.finishClusterSetup=function(e){return o(regeneratorRuntime.mark(function t(){var n,a,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.default.urls("cluster_setup","server"),a={action:"finish_cluster"},t.prev=2,t.next=5,(0,c.post)(n,a,{raw:!0});case 5:if(o=t.sent,!o.ok){t.next=11;break}l.default.addNotification({msg:e,type:"success",fade:!1,clear:!0}),l.default.navigate("#setup/finish"),t.next=15;break;case 11:return t.next=13,o.json();case 13:r=t.sent,p("The cluster is already finished",r.reason);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),p("There was an error. Please check your setup and try again.",t.t0);case 20:case"end":return t.stop()}},t,void 0,[[2,17]])}))},t.setupSingleNode=function(e,t){return o(regeneratorRuntime.mark(function n(){var a,o,r,i,u,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=l.default.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(r=(0,s.isInvalid)(o))){n.next=5;break}return n.abrupt("return",p(r));case 5:return n.prev=5,n.next=8,(0,c.post)(a,o,{raw:!0});case 8:if(i=n.sent,i.ok){n.next=15;break}return n.next=12,i.json();case 12:return u=n.sent,d=u.reason?u.reason:u.error,n.abrupt("return",p(d));case 15:return n.next=17,f.default.login({name:e.username,password:e.password});case 17:l.default.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),l.default.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),p("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}},n,void 0,[[5,21]])}))},t.addNode=function(e,t,n,a){return function(){var i=o(regeneratorRuntime.mark(function i(d){var h,m,_,g,b,E;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(h=l.default.urls("cluster_setup","server"),m={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(_=(0,s.isInvalid)(r({username:t.username,password:t.password},n)))){i.next=5;break}return i.abrupt("return",p(_));case 5:if(g={action:"enable_cluster",username:t.username,password:t.password,bind_address:a.bindAddress,port:a.port,node_count:n.nodeCount,remote_node:a.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete g.remote_current_user,delete g.remote_current_password),!(b=(0,s.isInvalid)(g))){i.next=10;break}return i.abrupt("return",p(b));case 10:return E=function(){var e=o(regeneratorRuntime.mark(function e(){var n,o,r,i,s,f,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:a.remoteAddress,port:a.port,singlenode:!1},e.next=3,(0,c.post)(h,g,{raw:!0});case 3:if(o=e.sent,o.ok){e.next=10;break}return e.next=7,o.json();case 7:return r=e.sent,i=r.reason?r.reason:r.error,e.abrupt("return",p(i));case 10:return e.next=12,(0,c.post)(h,n,{raw:!0});case 12:if(s=e.sent,s.ok){e.next=19;break}return e.next=16,s.json();case 16:return f=e.sent,m=f.reason?f.reason:f.error,e.abrupt("return",p(m));case 19:d({type:u.SETUP_ADD_NODE_TO_LIST,options:{value:{port:a.port,remoteAddress:a.remoteAddress}}}),l.default.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),i.prev=11,i.next=14,(0,c.post)(h,m,{raw:!0});case 14:return i.next=16,f.default.login({name:t.username,password:t.password});case 16:return i.next=18,E();case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(11),p("An error occured while adding the node.",i.t0);case 23:case"end":return i.stop()}},i,void 0,[[11,20]])}));return function(e){return i.apply(this,arguments)}}()},t.resetAddtionalNodeForm=function(){return{type:u.SETUP_RESET_ADDITIONAL_NODE}},t.alterPortAdditionalNode=function(e){return{type:u.SETUP_PORT_ADDITIONAL_NODE,options:{value:e}}},t.alterRemoteAddressAdditionalNode=function(e){return{type:u.SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE,options:{value:e}}},t.alterBindAddressAdditionalNode=function(e){return{type:u.SETUP_BIND_ADDRESS_ADDITIONAL_NODE,options:{value:e}}},t.setUsername=function(e){return{type:u.SETUP_SET_USERNAME,options:{value:e}}},t.setPassword=function(e){return{type:u.SETUP_SET_PASSWORD,options:{value:e}}},t.setPortForSetupNode=function(e){return{type:u.SETUP_PORT_FOR_SINGLE_NODE,options:{value:e}}},t.setBindAddressForSetupNode=function(e){return{type:u.SETUP_BIND_ADDRESS_FOR_SINGLE_NODE,options:{value:e}}},t.setNodeCount=function(e){return{type:u.SETUP_NODE_COUNT,options:{value:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={TESTS:{CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"}};t.default=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=a(o),i=n(803),l=a(i),s={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},a=/\+/g,o=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(a," "))},i=e;if(e)for(var l=void 0;l=o.exec(i);)n[r(l[1])]=r(l[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return(0,l.default)(e)},queryString:function(e){return Object.keys(e).forEach(function(t){void 0===e[t]&&delete e[t]}),(0,l.default)(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===s.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+s.safeURLName(t)}return s.safeURLName(e)},localStorageSet:function(e,t){(r.default.isObject(t)||r.default.isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t=void 0;if(r.default.has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}};t.default=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(266),l=a(i);t.default={init:function(e){this.fetchAndSetActiveTasks(e.table,e),r.default.when(e.fetch()).then(function(){this.fetchAndSetActiveTasks(e.table,e),this.setActiveTaskIsLoading(!1)}.bind(this))},fetchAndSetActiveTasks:function(e,t){r.default.dispatch({type:l.default.ACTIVE_TASKS_FETCH_AND_SET,options:{collectionTable:e,backboneCollection:t}})},changePollingInterval:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL,options:e})},switchTab:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_SWITCH_TAB,options:e})},setCollection:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_SET_COLLECTION,options:e})},setSearchTerm:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_SET_SEARCH_TERM,options:e})},sortByColumnHeader:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:{columnName:e}})},setActiveTaskIsLoading:function(e){r.default.dispatch({type:l.default.ACTIVE_TASKS_SET_IS_LOADING,options:e})},runPollingUpdate:function(e){e.pollingFetch().then(function(){r.default.dispatch({type:l.default.ACTIVE_TASKS_POLLING_COLLECTION,options:e.table})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),r=a(o),i=n(265),l=a(i),s={};s.AllTasks=Backbone.Collection.extend({url:function(){return r.default.getServerUrl("/_active_tasks")},pollingFetch:function(){return l.default.setActiveTaskIsLoading(!0),this.fetch({reset:!0,parse:!0})},parse:function(e){l.default.setActiveTaskIsLoading(!1);var t=[];return _.each(e,function(e){t.push(e)}),this.table=t,e},table:[]}),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(495),r=a(o),i=n(496),l=a(i),s=n(494),u=a(s),c=n(493),d=a(c);t.default={LoginForm:r.default,PasswordModal:l.default,CreateAdminForm:u.default,ChangePasswordForm:d.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AdminLayout=t.AuthLayout=t.OnePaneHeader=void 0;var o=n(0),r=a(o),i=n(39),l=n(127),s=n(268),u=a(s),c=n(126),d=n(2),f=a(d),p=u.default.CreateAdminForm,h=u.default.ChangePasswordForm,m=t.OnePaneHeader=function(e){var t=e.crumbs;return r.default.createElement("header",null,r.default.createElement("div",{className:"flex-layout flex-row"},r.default.createElement("div",{id:"breadcrumbs",className:"flex-body"},r.default.createElement(l.Breadcrumbs,{crumbs:t}))))},_=t.AuthLayout=function(e){var t=e.crumbs,n=e.component;return r.default.createElement(i.OnePane,null,r.default.createElement(m,{crumbs:t}),r.default.createElement(i.OnePaneContent,null,n))},g=function(e){var t=e.changePassword;return r.default.createElement(c.TabElementWrapper,null,r.default.createElement(c.TabElement,{key:1,selected:t,text:"Change Password",onChange:function(){f.default.navigate("#changePassword")}}),r.default.createElement(c.TabElement,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){f.default.navigate("#addAdmin")}}))};t.AdminLayout=function(e){var t=e.crumbs,n=e.changePassword,a=n?r.default.createElement(h,null):r.default.createElement(p,{loginAfter:!1});return r.default.createElement(i.OnePane,null,r.default.createElement(m,{crumbs:t}),r.default.createElement(i.OnePaneContent,null,r.default.createElement("div",{className:"template-content flex-body flex-layout flex-col"},r.default.createElement(g,{changePassword:n}),r.default.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},a))))},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CLUSTER_FETCH_NODES:"CLUSTER_FETCH_NODES"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(270),l=a(i),s=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._nodes=[]},setNodes:function(e){this._nodes=e.nodes},getNodes:function(){return this._nodes},dispatch:function(e){switch(e.type){case l.default.CLUSTER_FETCH_NODES:this.setNodes(e.options);break;default:return}this.triggerChange()}}),u=new s;u.dispatchToken=r.default.dispatcher.register(u.dispatch.bind(u)),t.default={nodesStore:u}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(18),l=a(i),s=r.default.addon();s.ClusterNodes=Backbone.Model.extend({url:function(){return l.default.getServerUrl("/_membership")},parse:function(e){var t;return t=e.all_nodes.reduce(function(t,n){var a=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:a}),t},[]),e.nodes_mapped=t,e}}),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CMPNTS_DATABASES_SHOWDELETE_MODAL:"CMPNTS_DATABASES_SHOWDELETE_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DocLink=t.JSONLink=void 0;var o=n(0),r=a(o);a(n(10)),t.JSONLink=function(e){var t=e.endpoint;return t?r.default.createElement("div",{className:"faux__jsonlink"},r.default.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},r.default.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ }"),r.default.createElement("span",null,"JSON"))):null},t.DocLink=function(e){var t=e.docURL;return t?r.default.createElement("div",{className:"faux__doclink"},r.default.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},r.default.createElement("i",{className:"icon fonticon-bookmark"}))):null}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Beautify=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(646)),f=a(d),p=n(20),h=f.default.js_beautify?f.default.js_beautify:f.default;t.Beautify=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.noOfLines=function(){return a.props.code.split(/\r\n|\r|\n/).length},a.canBeautify=function(){return 1===a.noOfLines()},a.beautify=function(e){e.preventDefault();var t=h(a.props.code);a.props.beautifiedCode(t)},a.getTooltip=function(){return u.default.createElement(p.Tooltip,{id:"tooltip"},"Switch to editable code format.")},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return u.default.createElement(p.OverlayTrigger,{placement:"right",overlay:e},u.default.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StringEditModal=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(20)),h=n(180),m=a(h),_=n(52),g=a(_);n(338),n(181),n(182);var b=t.StringEditModal=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.initAceEditor=function(e){a.editor=m.default.edit(e),a.editor.$blockScrolling=1/0,a.editor.setShowPrintMargin(!1),a.editor.setOption("highlightActiveLine",!0),a.editor.setTheme("ace/theme/idle_fingers");var t=g.default.parseJSON(a.props.value);a.editor.setValue(t,-1)},a.closeModal=function(){a.props.onClose()},a.save=function(){a.props.onSave(a.editor.getValue())},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return d.default.createElement(p.Modal,{dialogClassName:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},d.default.createElement(p.Modal.Header,{closeButton:!0},d.default.createElement(p.Modal.Title,null,"Edit Value ",d.default.createElement("span",{id:"string-edit-header"}))),d.default.createElement(p.Modal.Body,null,d.default.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),d.default.createElement("div",{id:"string-editor-wrapper"},d.default.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),d.default.createElement(p.Modal.Footer,null,d.default.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),d.default.createElement("button",{id:"string-edit-save-btn",onClick:this.save,className:"btn btn-primary save"},d.default.createElement("i",{className:"fonticon-circle-check"})," Modify Text")))}}]),t}(d.default.Component);b.propTypes={value:u.default.string.isRequired,visible:u.default.bool.isRequired,onClose:u.default.func.isRequired,onSave:u.default.func.isRequired},b.defaultProps={visible:!1,onClose:function(){},onSave:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ZenModeOverlay=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(168),h=n(20);n(651);var m={dark:"idle_fingers",light:"dawn"};(t.ZenModeOverlay=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{theme:a.getZenTheme(),code:a.props.defaultCode}},a.getZenTheme=function(){var e=f.default.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e},a.onChange=function(){a.setState(a.getStoreState())},a.exitZenMode=function(){a.props.onExit(a.getValue())},a.getValue=function(){return a.ace.getValue()},a.toggleTheme=function(){var e="dark"===a.state.theme?"light":"dark";a.setState({theme:e,code:a.getValue()}),f.default.utils.localStorageSet("zenTheme",e)},a.setValue=function(e,t){t=t||-1,a.editor.setValue(e,t)},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],a=u.default.createElement(h.Tooltip,{id:"tooltip"},"Exit zen mode (`esc`)"),o=u.default.createElement(h.Tooltip,{id:"tooltip"},"Switch zen theme");return u.default.createElement("div",{className:t},u.default.createElement("div",{className:"zen-mode-controls"},u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement(h.OverlayTrigger,{placement:"left",overlay:a},u.default.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),u.default.createElement("li",null,u.default.createElement(h.OverlayTrigger,{placement:"left",overlay:o},u.default.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),u.default.createElement("div",{className:"tooltips"})),u.default.createElement(p.CodeEditor,{ref:function(t){return e.ace=t},autoFocus:!0,theme:m[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}]),t}(u.default.Component)).defaultProps={mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(11),l=a(i),s=n(273),u=a(s),c={};c.DeleteDbModalStore=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=l.default.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){switch(e.type){case u.default.CMPNTS_DATABASES_SHOWDELETE_MODAL:this.setDeleteModal(e.options);break;default:return}this.triggerChange()}}),c.deleteDbModalStore=new c.DeleteDbModalStore,c.deleteDbModalStore.dispatchToken=r.default.dispatcher.register(c.deleteDbModalStore.dispatch),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(280),r=a(o),i=n(2),l=a(i),s=n(281),u=a(s);t.default={fetchAndEditConfig:function(e){var t=this;l.default.dispatch({type:r.default.LOADING_CONFIG});var n=new u.default.ConfigModel({node:e});n.fetch().then(function(){return t.editSections({sections:n.get("sections"),node:e})})},editSections:function(e){l.default.dispatch({type:r.default.EDIT_CONFIG,options:e})},editOption:function(e){l.default.dispatch({type:r.default.EDIT_OPTION,options:e})},cancelEdit:function(e){l.default.dispatch({type:r.default.CANCEL_EDIT,options:e})},saveOption:function(e,t){var n=this;l.default.dispatch({type:r.default.SAVING_OPTION,options:t});var a=t;return a.node=e,new u.default.OptionModel(a).save().then(function(){return n.optionSaveSuccess(t)},function(e){return n.optionSaveFailure(t,JSON.parse(e.responseText).reason)})},optionSaveSuccess:function(e){l.default.dispatch({type:r.default.OPTION_SAVE_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" saved",type:"success"})},optionSaveFailure:function(e,t){l.default.dispatch({type:r.default.OPTION_SAVE_FAILURE,options:e}),l.default.addNotification({msg:"Option save failed: "+t,type:"error"})},addOption:function(e,t){var n=this;l.default.dispatch({type:r.default.ADDING_OPTION});var a=t;return a.node=e,new u.default.OptionModel(a).save().then(function(){return n.optionAddSuccess(t)},function(e){return n.optionAddFailure(t,JSON.parse(e.responseText).reason)})},optionAddSuccess:function(e){l.default.dispatch({type:r.default.OPTION_ADD_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" added",type:"success"})},optionAddFailure:function(e,t){l.default.dispatch({type:r.default.OPTION_ADD_FAILURE,options:e}),l.default.addNotification({msg:"Option add failed: "+t,type:"error"})},deleteOption:function(e,t){var n=this;l.default.dispatch({type:r.default.DELETING_OPTION,options:t});var a=t;return a.node=e,new u.default.OptionModel(a).destroy().then(function(){return n.optionDeleteSuccess(t)}).catch(function(e){return n.optionDeleteFailure(t,e.message)})},optionDeleteSuccess:function(e){l.default.dispatch({type:r.default.OPTION_DELETE_SUCCESS,options:e}),l.default.addNotification({msg:"Option "+e.optionName+" deleted",type:"success"})},optionDeleteFailure:function(e,t){l.default.dispatch({type:r.default.OPTION_DELETE_FAILURE,options:e}),l.default.addNotification({msg:"Option delete failed: "+t,type:"error"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EDIT_CONFIG:"EDIT_CONFIG",LOADING_CONFIG:"LOADING_CONFIG",EDIT_OPTION:"EDIT_OPTION",CANCEL_EDIT:"CANCEL_EDIT",SAVING_OPTION:"SAVING_OPTION",OPTION_SAVE_SUCCESS:"OPTION_SAVE_SUCCESS",OPTION_SAVE_FAILURE:"OPTION_SAVE_FAILURE",DELETING_OPTION:"DELETING_OPTION",OPTION_DELETE_SUCCESS:"OPTION_DELETE_SUCCESS",OPTION_DELETE_FAILURE:"OPTION_DELETE_FAILURE",ADDING_OPTION:"ADDING_OPTION",OPTION_ADD_SUCCESS:"OPTION_ADD_SUCCESS",OPTION_ADD_FAILURE:"OPTION_ADD_FAILURE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(18),l=a(i),s=n(24),u=r.default.addon();u.OptionModel=Backbone.Model.extend({documentation:r.default.constants.DOC_URLS.CONFIG,url:function(){if(!this.get("node"))throw new Error("no node set");var e="/_node/"+this.get("node")+"/_config/"+this.get("sectionName")+"/"+encodeURIComponent(this.get("optionName"));return l.default.getServerUrl(e)},isNew:function(){return!1},sync:function(e,t){var n=void 0;return n="delete"===e?(0,s.deleteRequest)(t.url()):(0,s.put)(t.url(),t.get("value")),n.then(function(e){if(e.error)throw new Error(e.reason||e.error);return e})}}),u.ConfigModel=Backbone.Model.extend({documentation:r.default.constants.DOC_URLS.CONFIG,url:function(){if(!this.get("node"))throw new Error("no node set");return l.default.getServerUrl("/_node/"+this.get("node")+"/_config")},parse:function(e){return{sections:e}}}),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EDIT_CORS:"EDIT_CORS",CORS_SET_IS_LOADING:"CORS_SET_IS_LOADING",CORS_SHOW_DELETE_DOMAIN_MODAL:"CORS_SHOW_DELETE_DOMAIN_MODAL",CORS_HIDE_DELETE_DOMAIN_MODAL:"CORS_HIDE_DELETE_DOMAIN_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(11),f=a(d),p=n(14),h=a(p),m=n(80),g=a(m),b=n(287),E=a(b),v=n(284),y=a(v),O=n(286),N=a(O),S=h.default.LoadLines,D=g.default.ConfirmationModal,T=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,a=e.node;(!t||_.isEmpty(n)||window.confirm(f.default.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:a})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),a=_.indexOf(n,t);-1!==a&&(n[a]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,a=e.node,r=e.domainToDelete,i=this.props.origins.indexOf(r);if(-1!==i){var l=[].concat(o(n.slice(0,i)),o(n.slice(i+1)));this.props.saveCORS({corsEnabled:t,origins:l,node:a})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every(function(e){return!0===e}),t=c.default.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},c.default.createElement(E.default,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),c.default.createElement(N.default,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),c.default.createElement(y.default,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=c.default.createElement(S,null));var n=c.default.createElement("span",null,"Are you sure you want to delete ",c.default.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return c.default.createElement("div",{className:"cors-page flex-body"},c.default.createElement("header",{id:"cors-header"},c.default.createElement("p",null,f.default.i18n.en_US["cors-notice"])),c.default.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},c.default.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",c.default.createElement("br",null),c.default.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),c.default.createElement(D,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}]),t}(u.Component);t.default=T},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(288),p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={origin:""},n}return i(t,e),l(t,[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!(0,f.validateDomain)(this.state.origin))return!1;var t=(0,f.normalizeUrls)(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?d.default.createElement("div",{id:"origin-domains-container"},d.default.createElement("div",{className:"origin-domains"},d.default.createElement("div",{className:"input-append"},d.default.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),d.default.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},d.default.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}]),t}(c.Component);t.default=p,p.propTypes={isVisible:u.default.bool.isRequired,addOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(288),p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={edit:!1,updatedOrigin:n.props.origin},n}return i(t,e),l(t,[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),(0,f.validateDomain)(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?d.default.createElement("div",{className:"input-append edit-domain-section"},d.default.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),d.default.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):d.default.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return d.default.createElement("tr",null,d.default.createElement("td",null,e),d.default.createElement("td",{width:"30"},d.default.createElement("span",null,d.default.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),d.default.createElement("td",{width:"30"},d.default.createElement("span",null,d.default.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}]),t}(c.Component);t.default=p,p.propTypes={origin:u.default.string.isRequired,updateOrigin:u.default.func.isRequired,deleteOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(285),p=a(f),h=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"createRows",value:function(){var e=this;return this.props.origins.map(function(t,n){return d.default.createElement(p.default,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})})}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var a=this.createRows();return d.default.createElement("table",{id:"origin-domain-table",className:"table table-striped"},d.default.createElement("tbody",null,a))}}]),t}(c.Component);t.default=h,h.propTypes={isVisible:u.default.bool.isRequired,origins:u.default.arrayOf(u.default.string),updateOrigin:u.default.func.isRequired,deleteOrigin:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("strong",null," Origin Domains ")," "),d.default.createElement("p",null,"Databases will accept requests from these domains: "),d.default.createElement("label",{className:"radio"},d.default.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),d.default.createElement("label",{className:"radio"},d.default.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}]),t}(c.Component);t.default=f,f.propTypes={corsEnabled:u.default.bool,isAllOrigins:u.default.bool,originChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUrls=t.validateCORSDomain=t.validateDomain=void 0;var o=n(2),r=a(o),i=(t.validateDomain=function(e){return!!i(e)||(r.default.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},t.validateCORSDomain=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)});t.normalizeUrls=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=[],a=[],o=0;e.forEach(function(i){r(h.default.urls("databaseBaseURL","server",i)).then(function(e){n.push(e)}).catch(function(){a.push(i)}).then(function(){++o===e.length&&s({dbList:e,databaseDetails:n,failedDbs:a,fullDbList:t})})})}function r(e){return(0,m.get)(e).then(function(e){if(e.error)throw new Error(e.reason||e.error);return e})}function i(){return r(h.default.urls("allDBs","server"))}function l(e,t,n){var a=(t-1)*n,o=t*n;return e.slice(a,o)}function s(e){h.default.dispatch({type:v.default.DATABASES_UPDATE,options:e})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),c=a(u),d=n(18),f=a(d),p=n(2),h=a(p),m=n(24),g=n(291),b=a(g),E=n(290),v=a(E),y=n(97),O=a(y);t.default={getDatabaseList:i,paginate:l,getDatabaseDetails:o,fetch:r,init:function(){var e=this,t=c.default.getParams(),n=t.page?parseInt(t.page,10):1,a=h.default.constants.MISC.DEFAULT_PAGE_SIZE;this.setStartLoading(),this.setPage(n),i(a,n).then(function(t){var r=l(t,n,a);e.updateDatabases({dbList:r,databaseDetails:[],failedDbs:[],fullDbList:t}),o(r,t)})},updateDatabases:s,setPage:function(e){h.default.dispatch({type:v.default.DATABASES_SETPAGE,options:{page:e}})},setStartLoading:function(){h.default.dispatch({type:v.default.DATABASES_STARTLOADING})},setLoadComplete:function(){h.default.dispatch({type:v.default.DATABASES_LOADCOMPLETE})},createNewDatabase:function(e){if(_.isNull(e)||0===e.trim().length)return void h.default.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});e=e.trim(),h.default.dispatch({type:v.default.DATABASES_SET_PROMPT_VISIBLE,options:{visible:!1}});var t=b.default.databasesStore.obtainNewDatabaseModel(e);h.default.addNotification({msg:"Creating database."}),t.save().done(function(){h.default.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=h.default.urls("allDocs","app",c.default.utils.safeURLName(e),"?limit="+O.default.DocLimit);c.default.router.navigate(t,{trigger:!0})}).fail(function(e){var t=JSON.parse(e.responseText).reason;h.default.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})})},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=h.default.urls("allDocs","app",c.default.utils.safeURLName(e),"");return setTimeout(function(){h.default.navigate(t)})}},fetchAllDbsWithKey:function(e,t){var n="?"+c.default.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"香"),limit:30}),a=f.default.getServerUrl("/_all_dbs"+n);(0,m.get)(a).then(function(e){var n=e.map(function(e){return{value:e,label:e}});t(null,{options:n})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DATABASES_SETPAGE:"DATABASES_SETPAGE",DATABASES_SET_PROMPT_VISIBLE:"DATABASES_SET_PROMPT_VISIBLE",DATABASES_STARTLOADING:"DATABASES_STARTLOADING",DATABASES_LOADCOMPLETE:"DATABASES_LOADCOMPLETE",DATABASES_UPDATE:"DATABASES_UPDATE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),i=a(r),l=n(290),s=a(l),u=n(97),c=a(u),d=n(18),f=a(d),p=c.default.Model,h=i.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._loading=!1,this._promptVisible=!1,this._page=1,this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[]},getPage:function(){return this._page},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e){return new p({id:e,name:e})},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map(function(t){var n=e._databaseDetails.filter(function(e){return e.db_name===t}),a={id:t,encodedId:encodeURIComponent(t),url:i.default.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)};return o({},a,e._getDetails(n[0]))})},_getDetails:function(e){if(!e)return{};var t=e.data_size||e.disk_size||0;return{dataSize:f.default.formatSize(t),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count}},dispatch:function(e){switch(e.type){case s.default.DATABASES_SETPAGE:this._page=e.options.page;break;case s.default.DATABASES_SET_PROMPT_VISIBLE:this.setPromptVisible(e.options.visible);break;case s.default.DATABASES_STARTLOADING:this.setLoading(!0);break;case s.default.DATABASES_LOADCOMPLETE:this.setLoading(!1);break;case s.default.DATABASES_UPDATE:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;default:return}this.triggerChange()}}),m=new h;m.dispatchToken=i.default.dispatcher.register(m.dispatch.bind(m)),t.default={databasesStore:m,DatabasesStoreConstructor:h}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),i=a(r),l=n(2),s=a(l),u=n(24),c=n(293),d=a(c),f=n(294),p=a(f),h=n(52),m=a(h),_=p.default.changesStore;t.default={addFilter:function(e){s.default.dispatch({type:d.default.ADD_CHANGES_FILTER_ITEM,filter:e})},removeFilter:function(e){s.default.dispatch({type:d.default.REMOVE_CHANGES_FILTER_ITEM,filter:e})},initChanges:function(e){s.default.dispatch({type:d.default.INIT_CHANGES,options:e}),o=null,this.getLatestChanges()},getLatestChanges:function(){var e=this,t={limit:100};o&&(t.since=_.getLastSeqNum(),t.timeout=6e4,t.feed="longpoll");var n=i.default.utils.queryParams(t),a=i.default.utils.safeURLName(_.getDatabaseName()),r=s.default.urls("changes","server",a,"?"+n);(0,u.get)(r).then(function(t){if(t.error)throw new Error(t.reason||t.error);e.updateChanges(t)}).catch(function(e){s.default.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})})},updateChanges:function(e){var t=m.default.getSeqNum(e.last_seq);t!==_.getLastSeqNum()&&s.default.dispatch({type:d.default.UPDATE_CHANGES,changes:e.results,seqNum:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INIT_CHANGES:"INIT_CHANGES",UPDATE_CHANGES:"UPDATE_CHANGES",ADD_CHANGES_FILTER_ITEM:"ADD_CHANGES_FILTER_ITEM",REMOVE_CHANGES_FILTER_ITEM:"REMOVE_CHANGES_FILTER_ITEM",UPDATE_CHANGES_FILTER:"UPDATE_CHANGES_FILTER",TOGGLE_CHANGES_CODE_VISIBILITY:"TOGGLE_CHANGES_CODE_VISIBILITY"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(293),l=a(i),s=n(52),u=a(s),c=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isLoaded=!1,this._filters=[],this._changes=[],this._databaseName="",this._maxChangesListed=100,this._showingSubset=!1,this._lastSequenceNum=null},initChanges:function(e){this.reset(),this._databaseName=e.databaseName},isLoaded:function(){return this._isLoaded},updateChanges:function(e,t){this._lastSequenceNum=e;var n=0===this._changes.length;_.each(this._changes,function(e){e.isNew=!1});var a=_.map(t,function(e){var t=u.default.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!n}});this._changes=a.concat(this._changes),this._isLoaded=!0},getChanges:function(){this._showingSubset=!1;var e=0;return _.filter(this._changes,function(t){if(e>=this._maxChangesListed)return this._showingSubset=!0,!1;var n=JSON.stringify(t),a=_.every(this._filters,function(e){return new RegExp(e,"i").test(n)});return a&&e++,a},this)},addFilter:function(e){this._filters.push(e)},removeFilter:function(e){this._filters=_.without(this._filters,e)},getFilters:function(){return this._filters},hasFilter:function(e){return-1!==_.indexOf(this._filters,e)},getDatabaseName:function(){return this._databaseName},isShowingSubset:function(){return this._showingSubset},setMaxChanges:function(e){this._maxChangesListed=e},getLastSeqNum:function(){return this._lastSequenceNum},dispatch:function(e){switch(e.type){case l.default.INIT_CHANGES:this.initChanges(e.options);break;case l.default.UPDATE_CHANGES:this.updateChanges(e.seqNum,e.changes);break;case l.default.ADD_CHANGES_FILTER_ITEM:this.addFilter(e.filter);break;case l.default.REMOVE_CHANGES_FILTER_ITEM:this.removeFilter(e.filter);break;default:return}this.triggerChange()}}),d={};d.changesStore=new c,d.changesStore.dispatchToken=r.default.dispatcher.register(d.changesStore.dispatch),t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(296),l=a(i),s=n(297),u=a(s),c=u.default.designDocInfoStore;t.default={fetchDesignDocInfo:function(e){var t=this,n=e.ddocName,a=e.designDocInfo;return r.default.dispatch({type:l.default.DESIGN_FETCHING}),a.fetch().then(function(){t.monitorDesignDoc({ddocName:n,designDocInfo:a})})},monitorDesignDoc:function(e){e.intervalId=window.setInterval(_.bind(this.refresh,this),5e3),r.default.dispatch({type:l.default.DESIGN_DOC_MONITOR,options:e})},refresh:function(){c.getDesignDocInfo().fetch().then(function(){r.default.dispatch({type:l.default.DESIGN_REFRESH})})},stopRefresh:function(){window.clearInterval(c.getIntervalId())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_REFRESH:"DESIGN_REFRESH"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(296),l=a(i),s={};s.DesignDocInfoStore=r.default.Store.extend({initialize:function(){this._isLoading=!0},isLoading:function(){return this._isLoading},getDdocName:function(){return this._ddocName},getDesignDocInfo:function(){return this._designDocInfo},monitorDesignDoc:function(e){this._isLoading=!1,this._designDocInfo=e.designDocInfo,this._ddocName=e.ddocName,this._intervalId=e.intervalId},getIntervalId:function(){return this._intervalId},getViewIndex:function(){return this._isLoading?{}:this._designDocInfo.get("view_index")},dispatch:function(e){switch(e.type){case l.default.DESIGN_FETCHING:this._isLoading=!0,this.triggerChange();break;case l.default.DESIGN_DOC_MONITOR:this.monitorDesignDoc(e.options),this.triggerChange();break;case l.default.DESIGN_DOC_REFRESH:this.triggerChange();break;default:return}}}),s.designDocInfoStore=new s.DesignDocInfoStore,s.designDocInfoStore.dispatchToken=r.default.dispatcher.register(s.designDocInfoStore.dispatch),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.doc;v.default.dispatch({type:N.default.RESET_DOC}),t.fetch().then(function(){v.default.dispatch({type:N.default.DOC_LOADED,options:{doc:t}}),e.onLoaded&&e.onLoaded()},function(n){404===n.status&&g("The "+t.id+" document does not exist."),v.default.navigate(v.default.urls("allDocs","app",e.database.id,""))})}function r(e,t,n){t?(v.default.addNotification({msg:"Saving document.",clear:!0}),e.save().then(function(){n(e.prettyJSON()),v.default.navigate("#/"+v.default.urls("allDocs","app",v.default.url.encode(e.database.id)),{trigger:!0})}).fail(function(e){v.default.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})})):e.validationError&&"Cannot change a documents id."===e.validationError?(g("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):g("Please fix the JSON errors and try saving again.")}function i(){v.default.dispatch({type:N.default.SHOW_DELETE_DOC_CONFIRMATION_MODAL})}function l(){v.default.dispatch({type:N.default.HIDE_DELETE_DOC_CONFIRMATION_MODAL})}function s(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),a=v.default.urls("document","server",t,e.safeID(),n);(0,y.deleteRequest)(a).then(function(e){if(e.error)throw new Error(e.reason||e.error);v.default.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),v.default.navigate(v.default.urls("allDocs","app",t,""))}).catch(function(e){v.default.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})})}function u(){v.default.dispatch({type:N.default.SHOW_CLONE_DOC_MODAL})}function c(){v.default.dispatch({type:N.default.HIDE_CLONE_DOC_MODAL})}function d(e,t,n){c(),t.copy(n).then(function(){v.default.navigate("/database/"+e.safeID()+"/"+encodeURIComponent(n),{trigger:!0}),v.default.addNotification({msg:"Document has been duplicated."})},function(e){var t="Could not duplicate document, reason: "+e.responseText+".";v.default.addNotification({msg:t,type:"error"})})}function f(){v.default.dispatch({type:N.default.SHOW_UPLOAD_MODAL})}function p(){v.default.dispatch({type:N.default.HIDE_UPLOAD_MODAL})}function h(e){if(0===e.files.length)return void v.default.dispatch({type:N.default.FILE_UPLOAD_ERROR,options:{error:"Please select a file to be uploaded."}});v.default.dispatch({type:N.default.START_FILE_UPLOAD});var t="?rev="+e.rev,n=e.doc.getDatabase().safeID(),a=e.doc.safeID(),r=e.files[0],i=v.default.urls("document","attachment",n,a,encodeURIComponent(r.name),t),l=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;v.default.dispatch({type:N.default.SET_FILE_UPLOAD_PERCENTAGE,options:{percent:t}})}},s=function(e){o({doc:e,onLoaded:function(){v.default.dispatch({type:N.default.FILE_UPLOAD_SUCCESS}),v.default.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}})},u=function(e){v.default.dispatch({type:N.default.FILE_UPLOAD_ERROR,options:{error:e}})},c=new XMLHttpRequest;b=c,c.withCredentials=!0,c.upload&&(c.upload.onprogress=l),c.onloadend=function(){b=void 0},c.onerror=function(){u("Error uploading file")},c.onload=function(t){if(c.status>=200&&c.status<300)s(e.doc);else{var n="Error uploading file. ";if(t.responseText)try{var a=JSON.parse(t.responseText);a.error&&(n+="Reason: "+(a.reason||a.error))}catch(e){}u(n)}},c.open("PUT",i),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",r.type||"application/octet-stream"),c.setRequestHeader("Accept","application/json"),c.send(r)}function m(){b&&b.abort()}function _(){v.default.dispatch({type:N.default.RESET_UPLOAD_MODAL})}function g(e){v.default.addNotification({msg:e,type:"error",clear:!0})}Object.defineProperty(t,"__esModule",{value:!0});var b,E=n(2),v=a(E),y=n(24),O=n(299),N=a(O);t.default={initDocEditor:o,saveDoc:r,showCloneDocModal:u,hideCloneDocModal:c,cloneDoc:d,showDeleteDocModal:i,hideDeleteDocModal:l,deleteDoc:s,showUploadModal:f,hideUploadModal:p,uploadAttachment:h,cancelUpload:m,resetUploadModal:_}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={RESET_DOC:"RESET_DOC",DOC_LOADED:"DOC_LOADED",SHOW_CLONE_DOC_MODAL:"SHOW_CLONE_DOC_MODAL",HIDE_CLONE_DOC_MODAL:"HIDE_CLONE_DOC_MODAL",SHOW_DELETE_DOC_CONFIRMATION_MODAL:"SHOW_DELETE_DOC_CONFIRMATION_MODAL",HIDE_DELETE_DOC_CONFIRMATION_MODAL:"HIDE_DELETE_DOC_CONFIRMATION_MODAL",SHOW_UPLOAD_MODAL:"SHOW_UPLOAD_MODAL",HIDE_UPLOAD_MODAL:"HIDE_UPLOAD_MODAL",RESET_UPLOAD_MODAL:"RESET_UPLOAD_MODAL",SHOW_STRING_EDIT_MODAL:"SHOW_STRING_EDIT_MODAL",HIDE_STRING_EDIT_MODAL:"HIDE_STRING_EDIT_MODAL",FILE_UPLOAD_SUCCESS:"FILE_UPLOAD_SUCCESS",FILE_UPLOAD_ERROR:"FILE_UPLOAD_ERROR",START_FILE_UPLOAD:"START_FILE_UPLOAD",SET_FILE_UPLOAD_PERCENTAGE:"SET_FILE_UPLOAD_PERCENTAGE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CLEAR_INDEX:"CLEAR_INDEX",EDIT_INDEX:"EDIT_INDEX",EDIT_NEW_INDEX:"EDIT_NEW_INDEX",SELECT_REDUCE_CHANGE:"SELECT_REDUCE_CHANGE",VIEW_SAVED:"VIEW_SAVED",VIEW_CREATED:"VIEW_CREATED",DESIGN_DOC_CHANGE:"DESIGN_DOC_CHANGE",DESIGN_DOC_NEW_NAME_UPDATED:"DESIGN_DOC_NEW_NAME_UPDATED",NEW_DESIGN_DOC:"NEW_DESIGN_DOC",VIEW_NAME_CHANGE:"VIEW_NAME_CHANGE",VIEW_ADD_DESIGN_DOC:"VIEW_ADD_DESIGN_DOC",VIEW_UPDATE_MAP_CODE:"VIEW_UPDATE_MAP_CODE",VIEW_UPDATE_REDUCE_CODE:"VIEW_UPDATE_REDUCE_CODE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(14),r=a(o),i=n(302),l=a(i),s=n(548),u=a(s),c=n(303),d=a(c),f=r.default.StyledSelect;t.default={EditorController:u.default,ReduceEditor:d.default,DesignDocSelector:l.default,StyledSelect:f}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(2)),h=a(p),m=n(14),_=a(m),g=_.default.StyledSelect,b=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(h.default.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map(function(e){return d.default.createElement("option",{key:e,value:e},e)}):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return d.default.createElement("div",{id:"new-ddoc-section",className:"span5"},d.default.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),d.default.createElement("div",{className:"controls"},d.default.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?d.default.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},d.default.createElement("i",{className:"icon-question-sign"})):null}},{key:"render",value:function(){var e=d.default.createElement("optgroup",{label:"Select a document"},d.default.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return d.default.createElement("div",{className:"design-doc-group control-group"},d.default.createElement("div",{className:"span3"},d.default.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),d.default.createElement(g,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField())}}]),t}(c.Component);t.default=b,b.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},b.propTypes={designDocList:u.default.array.isRequired,onSelectDesignDoc:u.default.func.isRequired,onChangeNewDesignDocName:u.default.func.isRequired,selectedDesignDocName:u.default.string.isRequired,newDesignDocName:u.default.string.isRequired,designDocLabel:u.default.string,docURL:u.default.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(14),h=a(p),m=n(304),g=a(m),b=n(128),E=a(b),v=f.default.helpers.getDocUrl,y=g.default.indexEditorStore,O=h.default.CodeEditorPanel,N=h.default.StyledSelect,S=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){y.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){y.off("change",this.onChange)}},{key:"getStoreState",value:function(){return{reduce:y.getReduce(),reduceOptions:y.reduceOptions(),reduceSelectedOption:y.reduceSelectedOption(),hasCustomReduce:y.hasCustomReduce(),hasReduce:y.hasReduce()}}},{key:"getOptionsList",value:function(){return _.map(this.state.reduceOptions,function(e,t){return u.default.createElement("option",{key:t,value:e},e)},this)}},{key:"getReduceValue",value:function(){return this.state.hasReduce?this.state.hasCustomReduce?this.reduceEditor.getValue():this.state.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){E.default.updateReduceCode(e)}},{key:"selectChange",value:function(e){E.default.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e=this,t=this.getOptionsList(),n=void 0;return this.state.hasCustomReduce&&(n=u.default.createElement(O,{ref:function(t){return e.reduceEditor=t},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.state.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)})),u.default.createElement("div",null,u.default.createElement("div",{className:"control-group"},u.default.createElement("label",{htmlFor:"reduce-function-selector"},u.default.createElement("span",null,"Reduce (optional)"),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:v("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},u.default.createElement("i",{className:"icon-question-sign"}))),u.default.createElement(N,{selectContent:t,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.state.reduceSelectedOption})),n)}}]),t}(s.Component);t.default=S},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(300),l=a(i),s=n(79),u=a(s),c={};c.IndexEditorStore=r.default.Store.extend({defaultMap:"function (doc) {\n  emit(doc._id, 1);\n}",defaultReduce:"function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",initialize:function(){this.reset()},reset:function(){this._designDocs=[],this._isLoading=!0,this._view={reduce:"",map:this.defaultMap},this._database={id:"0"}},editIndex:function(e){this._database=e.database,this._newView=e.newView,this._viewName=e.viewName||"viewName",this._newDesignDoc=e.newDesignDoc||!1,this._newDesignDocName="",this._designDocs=e.designDocs,this._designDocId=e.designDocId,this._originalViewName=this._viewName,this._originalDesignDocName=e.designDocId,this.setView(),this._isLoading=!1},isLoading:function(){return this._isLoading},setView:function(){this._newView||this._newDesignDoc?this._view={reduce:"",map:this.defaultMap}:this._view=this.getDesignDoc().get("views")[this._viewName]},getDatabase:function(){return this._database},getMap:function(){return this._view.map},setMap:function(e){this._view.map=e},getReduce:function(){return this._view.reduce},setReduce:function(e){this._view.reduce=e},getDesignDoc:function(){return this._designDocs.find(function(e){return this._designDocId==e.id},this).dDocModel()},getDesignDocs:function(){return this._designDocs},getAvailableDesignDocs:function(){var e=this.getDesignDocs().filter(function(e){return!e.isMangoDoc()});return _.map(e,function(e){return e.id})},getDesignDocId:function(){return this._designDocId},setDesignDocId:function(e){this._designDocId=e},isNewDesignDoc:function(){return this._newDesignDoc},isNewView:function(){return this._newView},getViewName:function(){return this._viewName},setViewName:function(e){this._viewName=e},hasCustomReduce:function(){return!(!this.hasReduce()||-1!==_.indexOf(this.builtInReduces(),this.getReduce()))},hasReduce:function(){return!!this.getReduce()},getOriginalViewName:function(){return this._originalViewName},getOriginalDesignDocName:function(){return this._originalDesignDocName},builtInReduces:function(){return["_sum","_count","_stats"]},reduceSelectedOption:function(){return this.hasReduce()?this.hasCustomReduce()?"CUSTOM":this.getReduce():"NONE"},reduceOptions:function(){return this.builtInReduces().concat(["CUSTOM","NONE"])},updateReduceFromSelect:function(e){return"NONE"===e?void this.setReduce(null):"CUSTOM"===e?void this.setReduce(this.defaultReduce):void this.setReduce(e)},addDesignDoc:function(e){this._designDocs.add(e,{merge:!0}),this._designDocId=e._id},getNewDesignDocName:function(){return this._newDesignDocName},getSaveDesignDoc:function(){if("new-doc"===this._designDocId){var e={_id:"_design/"+this._newDesignDocName,views:{},language:"javascript"};return new u.default.Doc(e,{database:this._database})}var t=this._designDocs.find(function(e){return e.id===this._designDocId}.bind(this));return t?t.dDocModel():null},dispatch:function(e){switch(e.type){case l.default.CLEAR_INDEX:this.reset();break;case l.default.EDIT_INDEX:this.editIndex(e.options);break;case l.default.VIEW_NAME_CHANGE:this.setViewName(e.name);break;case l.default.EDIT_NEW_INDEX:this.editIndex(e.options);break;case l.default.SELECT_REDUCE_CHANGE:this.updateReduceFromSelect(e.reduceSelectedOption);break;case l.default.DESIGN_DOC_CHANGE:this.setDesignDocId(e.options.value);break;case l.default.VIEW_SAVED:case l.default.VIEW_CREATED:break;case l.default.VIEW_ADD_DESIGN_DOC:this.addDesignDoc(e.designDoc),this.setView();break;case l.default.VIEW_UPDATE_MAP_CODE:this.setMap(e.code);break;case l.default.VIEW_UPDATE_REDUCE_CODE:this.setReduce(e.code);break;case l.default.DESIGN_DOC_NEW_NAME_UPDATED:this._newDesignDocName=e.options.value;break;default:return}this.triggerChange()}}),c.indexEditorStore=new c.IndexEditorStore,c.indexEditorStore.dispatchToken=r.default.dispatcher.register(c.indexEditorStore.dispatch),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetPagination=t.paginatePrevious=t.decrementSkipForPagePrevious=t.paginateNext=t.incrementSkipForPageNext=t.updatePerPageResults=t.resetFetchParamsBeforePerPageChange=t.setPerPage=t.toggleShowAllColumns=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),i=a(r),l=n(78),s=n(129),u=a(s),c=(t.toggleShowAllColumns=function(){return{type:u.default.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS}},t.setPerPage=function(e){return{type:u.default.INDEX_RESULTS_REDUX_SET_PER_PAGE,perPage:e}}),d=t.resetFetchParamsBeforePerPageChange=function(e,t,n){return o({},e,{limit:n+1,skip:t.skip||0})},f=(t.updatePerPageResults=function(e,t,n,a){return t=d(t,n,a),function(o){o(c(a)),o((0,l.fetchDocs)(e,t,n))}},t.incrementSkipForPageNext=function(e,t){return o({},e,{skip:e.skip+t})}),p=(t.paginateNext=function(e,t,n,a){return t=f(t,a),function(a){a({type:u.default.INDEX_RESULTS_REDUX_PAGINATE_NEXT}),a((0,l.fetchDocs)(e,t,n))}},t.decrementSkipForPagePrevious=function(e,t){return o({},e,{skip:Math.max(e.skip-t,0)})});t.paginatePrevious=function(e,t,n,a){return t=p(t,a),function(a){a({type:u.default.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS}),a((0,l.fetchDocs)(e,t,n))}},t.resetPagination=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.constants.MISC.DEFAULT_PAGE_SIZE;return c(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.queryOptionsChangeUpdate=t.queryOptionsToggleStable=t.queryOptionsRemoveFilterOnlyDdocs=t.queryOptionsFilterOnlyDdocs=t.queryOptionsToggleIncludeDocs=t.queryOptionsUpdateLimit=t.queryOptionsUpdateSkip=t.queryOptionsToggleDescending=t.queryOptionsUpdateByKeys=t.queryOptionsUpdateBetweenKeys=t.queryOptionsToggleBetweenKeys=t.queryOptionsToggleByKeys=t.queryOptionsUpdateGroupLevel=t.queryOptionsToggleReduce=t.queryOptionsToggleVisibility=t.queryOptionsExecute=t.resetFetchParamsBeforeExecute=void 0;var o=n(129),r=a(o),i=n(78),l=function(e){return{type:r.default.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS,options:e}},s=t.resetFetchParamsBeforeExecute=function(e){return{limit:e+1,skip:0}};t.queryOptionsExecute=function(e,t,n){var a=s(n);return(0,i.fetchDocs)(e,a,t)},t.queryOptionsToggleVisibility=function(e){return l({isVisible:e})},t.queryOptionsToggleReduce=function(e){return l(e?{reduce:!e}:{reduce:!e,includeDocs:!1})},t.queryOptionsUpdateGroupLevel=function(e){return l({groupLevel:e})},t.queryOptionsToggleByKeys=function(e){return l({showByKeys:!e,showBetweenKeys:!!e})},t.queryOptionsToggleBetweenKeys=function(e){return l({showBetweenKeys:!e,showByKeys:!!e})},t.queryOptionsUpdateBetweenKeys=function(e){return l({betweenKeys:e})},t.queryOptionsUpdateByKeys=function(e){return l({byKeys:e})},t.queryOptionsToggleDescending=function(e){return l({descending:!e})},t.queryOptionsUpdateSkip=function(e){return l({skip:e})},t.queryOptionsUpdateLimit=function(e){return l({limit:e})},t.queryOptionsToggleIncludeDocs=function(e){return l({includeDocs:!e})},t.queryOptionsFilterOnlyDdocs=function(){return l({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1})},t.queryOptionsRemoveFilterOnlyDdocs=function(){return l({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1})},t.queryOptionsToggleStable=function(e){return l({stable:!e})},t.queryOptionsChangeUpdate=function(e){return l({update:e.toString()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postToIndexBulkDelete=t.postToBulkDocs=t.queryMapReduceView=t.queryAllDocs=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};n(264);var r=n(24),i=n(11),l=a(i),s=n(40),u=a(s),c=n(2),d=a(c);t.queryAllDocs=function(e,t){o(t,{reduce:void 0,group:void 0,group_level:void 0});var n=l.default.utils.queryString(t),a=e+(-1!==e.indexOf("?")?"&":"?")+n;return(0,r.get)(a).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:u.default.INDEX_RESULTS_DOC_TYPE.VIEW}})},t.queryMapReduceView=function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0);var n=l.default.utils.queryString(t),a=e+(-1!==e.indexOf("?")?"&":"?")+n;return(0,r.get)(a).then(function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:u.default.INDEX_RESULTS_DOC_TYPE.VIEW}})},t.postToBulkDocs=function(e,t){var n=d.default.urls("bulk_docs","server",e);return(0,r.post)(n,t)},t.postToIndexBulkDelete=function(e,t){var n=d.default.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return(0,r.post)(n,t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(23),l=n(11),s=a(l),u=n(39),c=n(100),d=n(2),f=a(d),p=function(e,t){var n=e.indexResults,a=t.docUrl,o=t.endpoint,r=t.endpointAddQueryOptions;if(a||(a=f.default.constants.DOC_URLS.GENERAL),o&&r){var i=s.default.utils.queryString((0,c.getQueryOptionsParams)(n));i&&(o=-1==o.indexOf("?")?o+"?"+i:o+"&"+i)}return{docUrl:a,endpoint:o}},h=(0,i.connect)(p)(u.ApiBarWrapper);t.default=h,h.propTypes={databaseName:r.default.string,docUrl:r.default.string,endpoint:r.default.string,endpointAddQueryOptions:r.default.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(23),l=n(558),s=a(l),u=n(78),c=n(306),d=n(98),f=n(100),p=function(e,t){var n=e.indexResults;return{docs:(0,f.getDocs)(n),selectedDocs:(0,f.getSelectedDocs)(n),isLoading:(0,f.getIsLoading)(n),hasResults:(0,f.getHasResults)(n),results:(0,f.getDataForRendering)(n,t.databaseName,t.deleteEnabled),isEditable:(0,f.getIsEditable)(n),selectedLayout:(0,f.getSelectedLayout)(n),allDocumentsSelected:(0,f.getAllDocsSelected)(n),hasSelectedItem:(0,f.getHasDocsSelected)(n),numDocsSelected:(0,f.getNumDocsSelected)(n),textEmptyIndex:(0,f.getTextEmptyIndex)(n),docType:(0,f.getDocType)(n),fetchParams:(0,f.getFetchParams)(n),queryOptionsParams:(0,f.getQueryOptionsParams)(n)}},h=function(e,t){return{fetchDocs:function(n,a){e((0,u.fetchDocs)(t.queryDocs,n,a))},selectDoc:function(t,n){e((0,d.selectDoc)(t,n))},bulkDeleteDocs:function(n,a,o){e((0,u.bulkDeleteDocs)(t.databaseName,t.queryDocs,n,t.designDocs,a,o,t.docType))},changeLayout:function(t){e((0,d.changeLayout)(t))},bulkCheckOrUncheck:function(n,a,o){e((0,d.bulkCheckOrUncheck)(n,a,o,t.docType))},changeTableHeaderAttribute:function(t,n){e((0,d.changeTableHeaderAttribute)(t,n))},resetState:function(){e((0,d.resetState)())},queryOptionsToggleIncludeDocs:function(t){e((0,c.queryOptionsToggleIncludeDocs)(t))}}},m=(0,i.connect)(p,h)(s.default);t.default=m,m.propTypes={queryDocs:r.default.func.isRequired,docType:r.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(23),l=n(549),s=a(l),u=n(305),c=n(100),d=function(e,t){var n=e.indexResults;return{docs:(0,c.getDocs)(n),selectedDocs:(0,c.getSelectedDocs)(n),hasResults:(0,c.getHasResults)(n),pageStart:(0,c.getPageStart)(n),pageEnd:(0,c.getPageEnd)(n),perPage:(0,c.getPerPage)(n),prioritizedEnabled:(0,c.getPrioritizedEnabled)(n),showPrioritizedEnabled:(0,c.getShowPrioritizedEnabled)(n),displayedFields:(0,c.getDisplayedFields)(n,t.databaseName),canShowNext:(0,c.getCanShowNext)(n),canShowPrevious:(0,c.getCanShowPrevious)(n),fetchParams:(0,c.getFetchParams)(n),queryOptionsParams:(0,c.getQueryOptionsParams)(n)}},f=function(e,t){return{toggleShowAllColumns:function(){e((0,u.toggleShowAllColumns)())},updatePerPageResults:function(n,a,o){e((0,u.updatePerPageResults)(t.queryDocs,a,o,n))},paginateNext:function(n,a,o){e((0,u.paginateNext)(t.queryDocs,n,a,o))},paginatePrevious:function(n,a,o){e((0,u.paginatePrevious)(t.queryDocs,n,a,o))}}},p=(0,i.connect)(d,f)(s.default);t.default=p,p.propTypes={queryDocs:r.default.func.isRequired}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=o(r),l=n(2),s=o(l),u=n(312),c=o(u),d=n(78),f=a(d),p=n(130),h=a(p);t.default={loadQueryHistory:function(e){return{type:c.default.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:c.default.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:c.default.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:c.default.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:c.default.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:c.default.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:c.default.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,a=e.indexCode,o=e.fetchParams;return s.default.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),h.createIndex(n,a).then(function(){var t="#"+s.default.urls("mango","query-app",i.default.utils.safeURLName(n)),a=function(e){return h.fetchIndexes(n,e)};e(f.fetchDocs(a,o,{})),s.default.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})}).catch(function(e){s.default.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})})}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,a=e.queryCode;return function(e){return h.fetchQueryExplain(n,a).then(function(n){e(t.showQueryExplain({explainPlan:n}))}).catch(function(){s.default.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.REV_BROWSER_REV_TREE_LOADED="REV_TREE_LOADED",o=t.REV_BROWSER_DIFF_DOCS_READY="REV_BROWSER_DIFF_DOCS_READY",r=t.REV_BROWSER_DIFF_ENABLE_DIFF_VIEW="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",i=t.REV_BROWSER_SHOW_CONFIRM_MODAL="REV_BROWSER_SHOW_CONFIRM_MODAL";t.default={REV_BROWSER_REV_TREE_LOADED:a,REV_BROWSER_DIFF_DOCS_READY:o,REV_BROWSER_DIFF_ENABLE_DIFF_VIEW:r,REV_BROWSER_SHOW_CONFIRM_MODAL:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocToWin=t.getIsDiffViewEnabled=t.getDropdownData=t.getShowConfirmModal=t.getTheirs=t.getOurs=t.getDatabaseName=t.getConflictingRev=t.getConflictDoc=t.getDoc=t.getTree=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(313),r={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1],n=t.type,i=t.options;switch(n){case o.REV_BROWSER_REV_TREE_LOADED:var l=i.tree,s=i.doc,u=i.conflictDoc,c=i.conflictingRevs,d=i.databaseName;return a({},e,{tree:l,doc:s,conflictDoc:u,conflictingRevs:c,databaseName:d,theirs:u,ours:s});case o.REV_BROWSER_DIFF_DOCS_READY:return a({},e,{theirs:i.theirs});case o.REV_BROWSER_DIFF_ENABLE_DIFF_VIEW:return a({},e,{isDiffViewEnabled:i.enableDiff});case o.REV_BROWSER_SHOW_CONFIRM_MODAL:return a({},e,{showConfirmModal:i.show,docToWin:i.docToWin});default:return e}};t.default=i,t.getTree=function(e){return e.tree},t.getDoc=function(e){return e.doc},t.getConflictDoc=function(e){return e.conflictDoc},t.getConflictingRev=function(e){return e.conflictingRevs},t.getDatabaseName=function(e){return e.databaseName},t.getOurs=function(e){return e.ours},t.getTheirs=function(e){return e.theirs},t.getShowConfirmModal=function(e){return e.showConfirmModal},t.getDropdownData=function(e){return e.conflictingRevs.map(function(e){return{value:e,label:e}})},t.getIsDiffViewEnabled=function(e){return e.isDiffViewEnabled},t.getDocToWin=function(e){return e.docToWin}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(11)),h=a(p),m=n(2),g=a(m),b=n(172),E=a(b),v=n(64),y=a(v),O=n(14),N=a(O),S=n(278),D=a(S),T=n(95),C=a(T),w=n(128),A=a(w),I=n(301),R=a(I),P=n(80),L=a(P),k=n(52),M=a(k),x=n(20);n(134);var U=E.default.sidebarStore,j=N.default.DeleteDatabaseModal,B=N.default.LoadLines,F=N.default.MenuDropDown,V=R.default.DesignDocSelector,q=L.default.ConfirmationModal,H=D.default.deleteDbModalStore,G=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNewButtonLinks=function(){return M.default.getNewButtonLinks(a.props.databaseName)},a.buildDocLinks=function(){var e=g.default.urls("base","app",a.props.databaseName);return g.default.getExtensions("docLinks").map(function(t){return d.default.createElement("li",{key:t.url,className:this.getNavItemClass(t.url)},d.default.createElement("a",{id:t.url,href:e+t.url},t.title))},a)},a.getNavItemClass=function(e){return e===a.props.selectedNavItem?"active":""},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.buildDocLinks(),t=g.default.url.encode(this.props.databaseName),n="#"+g.default.urls("changes","app",t,""),a="#"+g.default.urls("permissions","app",t),o=g.default.urls("allDocs","app",t,""),r=g.default.urls("mango","query-app",t),i=h.default.i18n.en_US["run-query-with-mango"],l=this.getNewButtonLinks();return d.default.createElement("ul",{className:"nav nav-list"},d.default.createElement("li",{className:this.getNavItemClass("all-docs")},d.default.createElement("a",{id:"all-docs",href:"#/"+o,className:"toggle-view"},"All Documents"),d.default.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},d.default.createElement(F,{links:l}))),d.default.createElement("li",{className:this.getNavItemClass("mango-query")},d.default.createElement("a",{id:"mango-query",href:"#"+r,className:"toggle-view"},i)),d.default.createElement("li",{className:this.getNavItemClass("permissions")},d.default.createElement("a",{id:"permissions",href:a},"Permissions")),d.default.createElement("li",{className:this.getNavItemClass("changes")},d.default.createElement("a",{id:"changes",href:n},"Changes")),e,d.default.createElement("li",{className:this.getNavItemClass("design-docs")},d.default.createElement("a",{id:"design-docs",href:"#/"+o+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),d.default.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},d.default.createElement(F,{links:l}))))}}]),t}(d.default.Component);G.propTypes={selectedNavItem:u.default.string.isRequired};var W=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={placement:"bottom"},a.setPlacement=function(e){var t=document.getElementById(e).getBoundingClientRect().top,n=150,o=t+n>window.innerHeight?"top":"bottom";a.setState({placement:o})},a.createItems=function(){var e=a.props.items.sort();return _.map(e,function(e,t){var n=this,a=g.default.urls(this.props.urlNamespace,"app",encodeURIComponent(this.props.database.id),encodeURIComponent(this.props.designDocName)),o=this.props.selectedIndex===e?"active":"";return d.default.createElement("li",{className:o,key:t},d.default.createElement("a",{id:this.props.designDocName+"_"+e,href:"#/"+a+encodeURIComponent(e),className:"toggle-view"},e),d.default.createElement(x.OverlayTrigger,{trigger:"click",onEnter:this.setPlacement.bind(this,this.props.designDocName+"_"+e),placement:this.state.placement,rootClose:!0,ref:function(e){return n.itemOverlay=e},overlay:d.default.createElement(x.Popover,{id:"index-menu-component-popover"},d.default.createElement("ul",null,d.default.createElement("li",{onClick:this.indexAction.bind(this,"edit",{indexName:e,onEdit:this.props.onEdit})},d.default.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),d.default.createElement("li",{onClick:this.indexAction.bind(this,"clone",{indexName:e,onClone:this.props.onClone})},d.default.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),d.default.createElement("li",{onClick:this.indexAction.bind(this,"delete",{indexName:e,onDelete:this.props.onDelete})},d.default.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},d.default.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))},a)},a.indexAction=function(e,t,n){switch(n.preventDefault(),a.itemOverlay.hide(),e){case"delete":y.default.showDeleteIndexModal(t.indexName,a.props.designDocName,a.props.indexLabel,t.onDelete);break;case"clone":y.default.showCloneIndexModal(t.indexName,a.props.designDocName,a.props.indexLabel,t.onClone);break;case"edit":t.onEdit(a.props.database.id,a.props.designDocName,t.indexName)}},a.toggle=function(e){e.preventDefault(),a.props.toggle(a.props.designDocName,a.props.title)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,a=this.props.designDocName,o="nav-design-function-"+a+this.props.selector;return d.default.createElement("li",{id:o},d.default.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},d.default.createElement("div",{className:"fonticon-play"}),n),d.default.createElement(x.Collapse,{in:this.props.isExpanded},d.default.createElement("ul",{className:t},this.createItems())))}}]),t}(d.default.Component);W.propTypes={urlNamespace:u.default.string.isRequired,indexLabel:u.default.string.isRequired,database:u.default.object.isRequired,designDocName:u.default.string.isRequired,items:u.default.array.isRequired,isExpanded:u.default.bool.isRequired,selectedIndex:u.default.string.isRequired,onDelete:u.default.func.isRequired,onClone:u.default.func.isRequired};var K=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={updatedSidebarListTypes:a.props.sidebarListTypes},a.indexList=function(){return _.map(a.state.updatedSidebarListTypes,function(e,t){var n=_.has(this.props.toggledSections,e.name)&&this.props.toggledSections[e.name],a="";return this.props.selectedNavInfo.designDocSection===e.name&&(a=this.props.selectedNavInfo.indexName),d.default.createElement(W,{icon:e.icon,isExpanded:n,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:a,toggle:this.props.toggle,database:this.props.database,designDocName:this.props.designDocName,key:t,title:e.name,selector:e.selector,items:_.keys(this.props.designDoc[e.selector])})}.bind(a))},a.toggle=function(e){e.preventDefault(),a.props.toggle(a.props.designDocName)},a.getNewButtonLinks=function(){var e=g.default.urls("databaseBaseURL","app",encodeURIComponent(a.props.database.id)),t=a.props.designDocName;return[{title:"Add New",links:_.reduce(g.default.getExtensions("sidebar:links"),function(n,a){return n.push({title:a.title,url:"#"+e+"/"+a.url+"/"+encodeURIComponent(t),icon:"fonticon-plus-circled"}),n},[{title:"New View",url:"#"+g.default.urls("new","addView",encodeURIComponent(a.props.database.id),encodeURIComponent(t)),icon:"fonticon-plus-circled"}])}]},i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillMount",value:function(){if(_.isEmpty(this.state.updatedSidebarListTypes)||_.has(this.state.updatedSidebarListTypes[0],"selector")&&"views"!==this.state.updatedSidebarListTypes[0].selector){var e=this.state.updatedSidebarListTypes;e.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:A.default.deleteView,onClone:A.default.cloneView,onEdit:A.default.gotoEditViewPage}),this.setState({updatedSidebarListTypes:e})}}},{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var a=this.props.designDocName,o=g.default.urls("designDocs","app",this.props.database.id,a),r="metadata"===this.props.selectedNavInfo.designDocSection?"active":"";return d.default.createElement("li",{className:"nav-header"},d.default.createElement("div",{id:"sidebar-tab-"+a,className:t},d.default.createElement("div",{id:"nav-header-"+a,onClick:this.toggle,className:"accordion-list-item"},d.default.createElement("div",{className:"fonticon-play"}),d.default.createElement("p",{className:"design-doc-name"},d.default.createElement("span",{title:"_design/"+a},a))),d.default.createElement("div",{className:"new-button add-dropdown"},d.default.createElement(F,{links:e}))),d.default.createElement(x.Collapse,{in:this.props.isExpanded},d.default.createElement("ul",{className:n,id:this.props.designDocName},d.default.createElement("li",{className:r},d.default.createElement("a",{href:"#/"+o,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}]),t}(d.default.Component);K.propTypes={database:u.default.object.isRequired,sidebarListTypes:u.default.array.isRequired,isExpanded:u.default.bool.isRequired,selectedNavInfo:u.default.object.isRequired,toggledSections:u.default.object.isRequired,designDocName:u.default.string.isRequired};var X=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.designDocList=function(){return _.map(a.props.designDocs,function(e,t){var n=decodeURIComponent(e.safeId),a=!1,o={};_.has(this.props.toggledSections,n)&&(a=this.props.toggledSections[n].visible,o=this.props.toggledSections[n].indexGroups);var r={};return"designDoc"===this.props.selectedNav.navItem&&this.props.selectedNav.designDocName===n&&(r=this.props.selectedNav),d.default.createElement(K,{toggle:this.props.toggle,sidebarListTypes:this.sidebarListTypes,isExpanded:a,toggledSections:o,selectedNavInfo:r,key:t,designDoc:e,designDocName:n,database:this.props.database})}.bind(a))},i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=g.default.getExtensions("sidebar:list");this.sidebarListTypes=_.isUndefined(e)?[]:e}},{key:"render",value:function(){return d.default.createElement("ul",{className:"nav nav-list"},this.designDocList())}}]),t}(d.default.Component),z=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{database:U.getDatabase(),selectedNav:U.getSelected(),designDocs:U.getDesignDocs(),designDocList:U.getDesignDocList(),availableDesignDocIds:U.getAvailableDesignDocs(),toggledSections:U.getToggledSections(),isLoading:U.isLoading(),deleteDbModalProperties:H.getShowDeleteDatabaseModal(),deleteIndexModalVisible:U.isDeleteIndexModalVisible(),deleteIndexModalText:U.getDeleteIndexModalText(),deleteIndexModalOnSubmit:U.getDeleteIndexModalOnSubmit(),deleteIndexModalIndexName:U.getDeleteIndexModalIndexName(),deleteIndexModalDesignDoc:U.getDeleteIndexDesignDoc(),cloneIndexModalVisible:U.isCloneIndexModalVisible(),cloneIndexModalTitle:U.getCloneIndexModalTitle(),cloneIndexModalSelectedDesignDoc:U.getCloneIndexModalSelectedDesignDoc(),cloneIndexModalNewDesignDocName:U.getCloneIndexModalNewDesignDocName(),cloneIndexModalOnSubmit:U.getCloneIndexModalOnSubmit(),cloneIndexDesignDocProp:U.getCloneIndexDesignDocProp(),cloneIndexModalNewIndexName:U.getCloneIndexModalNewIndexName(),cloneIndexSourceIndexName:U.getCloneIndexModalSourceIndexName(),cloneIndexSourceDesignDocName:U.getCloneIndexModalSourceDesignDocName(),cloneIndexModalIndexLabel:U.getCloneIndexModalIndexLabel()}},a.onChange=function(){var e=a.getStoreState();a.props.reduxUpdatedDesignDocList&&a.props.reduxUpdatedDesignDocList(e.designDocList),a.setState(e)},a.showDeleteDatabaseModal=function(e){C.default.showDeleteDatabaseModal(e)},a.deleteIndex=function(){var e="designDoc"===a.state.selectedNav.navItem&&"_design/"+a.state.selectedNav.designDocName===a.state.deleteIndexModalDesignDoc.id&&a.state.selectedNav.indexName===a.state.deleteIndexModalIndexName;a.state.deleteIndexModalOnSubmit({isOnIndex:e,indexName:a.state.deleteIndexModalIndexName,designDoc:a.state.deleteIndexModalDesignDoc,designDocs:a.state.designDocs,database:a.state.database})},a.cloneIndex=function(){a.state.cloneIndexModalOnSubmit({sourceIndexName:a.state.cloneIndexSourceIndexName,sourceDesignDocName:a.state.cloneIndexSourceDesignDocName,targetDesignDocName:a.state.cloneIndexModalSelectedDesignDoc,newDesignDocName:a.state.cloneIndexModalNewDesignDocName,newIndexName:a.state.cloneIndexModalNewIndexName,designDocs:a.state.designDocs,database:a.state.database,onComplete:y.default.hideCloneIndexModal})},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){U.on("change",this.onChange,this),H.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){U.off("change",this.onChange),H.off("change",this.onChange,this)}},{key:"render",value:function(){return this.state.isLoading?d.default.createElement(B,null):d.default.createElement("nav",{className:"sidenav"},d.default.createElement(G,{selectedNavItem:this.state.selectedNav.navItem,databaseName:this.state.database.id}),d.default.createElement(X,{selectedNav:this.state.selectedNav,toggle:y.default.toggleContent,toggledSections:this.state.toggledSections,designDocs:this.state.designDocList,database:this.state.database}),d.default.createElement(j,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),d.default.createElement(q,{title:"Confirm Deletion",visible:this.state.deleteIndexModalVisible,text:this.state.deleteIndexModalText,onClose:y.default.hideDeleteIndexModal,onSubmit:this.deleteIndex}),d.default.createElement(Y,{visible:this.state.cloneIndexModalVisible,title:this.state.cloneIndexModalTitle,close:y.default.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.state.availableDesignDocIds,selectedDesignDoc:this.state.cloneIndexModalSelectedDesignDoc,newDesignDocName:this.state.cloneIndexModalNewDesignDocName,newIndexName:this.state.cloneIndexModalNewIndexName,indexLabel:this.state.cloneIndexModalIndexLabel}))}}]),t}(d.default.Component),Y=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.submit=function(){if(a.designDocSelector.validate())return""===a.props.newIndexName?void g.default.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}):void a.props.submit()},a.close=function(e){e&&e.preventDefault(),a.props.close()},a.setNewIndexName=function(e){y.default.setNewCloneIndexName(e.target.value)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return d.default.createElement(x.Modal,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},d.default.createElement(x.Modal.Header,{closeButton:!0},d.default.createElement(x.Modal.Title,null,this.props.title)),d.default.createElement(x.Modal.Body,null,d.default.createElement("form",{className:"form",method:"post",onSubmit:this.submit},d.default.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),d.default.createElement("div",{className:"row"},d.default.createElement(V,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,selectedDesignDocName:this.props.selectedDesignDoc,newDesignDocName:this.props.newDesignDocName,onSelectDesignDoc:y.default.selectDesignDoc,onChangeNewDesignDocName:y.default.updateNewDesignDocName})),d.default.createElement("div",{className:"clone-index-name-row"},d.default.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),d.default.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),d.default.createElement(x.Modal.Footer,null,d.default.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),d.default.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},d.default.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}]),t}(d.default.Component);Y.propTypes={visible:u.default.bool.isRequired,title:u.default.string,close:u.default.func.isRequired,submit:u.default.func.isRequired,designDocArray:u.default.array.isRequired,selectedDesignDoc:u.default.string.isRequired,newDesignDocName:u.default.string.isRequired,newIndexName:u.default.string.isRequired,indexLabel:u.default.string.isRequired},Y.defaultProps={title:"Clone Index",visible:!1},t.default={SidebarController:z,DesignDoc:K,CloneIndexModal:Y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD_NAVBAR_LINK:"ADD_NAVBAR_LINK",TOGGLE_NAVBAR_MENU:"TOGGLE_NAVBAR_MENU",UPDATE_NAVBAR_LINK:"UPDATE_NAVBAR_LINK",CLEAR_NAVBAR_LINK:"CLEAR_NAVBAR_LINK",REMOVE_NAVBAR_LINK:"REMOVE_NAVBAR_LINK",HIDE_NAVBAR_LINK_BADGE:"HIDE_NAVBAR_LINK_BADGE",SHOW_NAVBAR_LINK_BADGE:"SHOW_NAVBAR_LINK_BADGE",NAVBAR_SET_VERSION_INFO:"NAVBAR_SET_VERSION_INFO",NAVBAR_ACTIVE_LINK:"NAVBAR_ACTIVE_LINK",NAVBAR_HIDE:"NAVBAR_HIDE",NAVBAR_SHOW:"NAVBAR_SHOW",NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",NAVBAR_SHOW_LOGIN_BUTTON:"NAVBAR_SHOW_LOGIN_BUTTON",NAVBAR_SHOW_LOGOUT_BUTTON:"NAVBAR_SHOW_LOGOUT_BUTTON"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(316),l=a(i),s=n(19),u={};u.NavBarStore=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isMinimized=!0,this._activeLink=null,this._version=null,this._navLinks=[],this._footerNavLinks=[],this._bottomNavLinks=[],this._navBarVisible=!0,this._loginSectionVisible=!1,this._loginVisibleInsteadOfLogout=!0},getIsLoginSectionVisible:function(){return this._loginSectionVisible},getIsLoginVisibleInsteadOfLogout:function(){return this._loginVisibleInsteadOfLogout},isNavBarVisible:function(){return this._navBarVisible},showNavBar:function(){this._navBarVisible=!0},hideNavBar:function(){this._navBarVisible=!1},addLink:function(e){return e.top&&!e.bottomNav?void this._navLinks.unshift(e):e.top&&e.bottomNav?void this._bottomNavLinks.unshift(e):e.bottomNav?void this._bottomNavLinks.push(e):e.footerNav?void this._footerNavLinks.push(e):void this._navLinks.push(e)},removeLink:function(e){var t=this.getLinkSection(e),n=(0,s.findIndex)(t,function(t){return t.id===e.id});-1!==n&&t.splice(n,1)},getNavLinks:function(){return this._navLinks},getBottomNavLinks:function(){return this._bottomNavLinks},getFooterNavLinks:function(){return this._footerNavLinks},toggleMenu:function(){this._isMinimized=!this._isMinimized},getLinkSection:function(e){var t=this._navLinks;return e.bottomNav&&(t=this._bottomNavLinks),e.footerNav&&(t=this._footerNavLinks),t},updateLink:function(e){var t=void 0,n=this.getLinkSection(e);(t=_.find(n,function(t){return t.id===e.id}))&&(t.title=e.title,t.href=e.href)},showLinkBadge:function(e){var t=this.getLinkSection(e),n=t.find(function(t){return t.title===e.title});n&&(n.badge=!0)},hideLinkBadge:function(e){var t=this.getLinkSection(e),n=t.find(function(t){return t.title===e.title});n&&(n.badge=!1)},getVersion:function(){return this._version},setVersion:function(e){this._version=e},getActiveLink:function(){return this._activeLink},setActiveLink:function(e){this._activeLink=e},isMinimized:function(){return this._isMinimized},dispatch:function(e){switch(e.type){case l.default.ADD_NAVBAR_LINK:this.addLink(e.link);break;case l.default.TOGGLE_NAVBAR_MENU:this.toggleMenu();break;case l.default.UPDATE_NAVBAR_LINK:this.updateLink(e.link);break;case l.default.CLEAR_NAVBAR_LINK:this.reset();break;case l.default.REMOVE_NAVBAR_LINK:this.removeLink(e.link);break;case l.default.SHOW_NAVBAR_LINK_BADGE:this.showLinkBadge(e.link);break;case l.default.HIDE_NAVBAR_LINK_BADGE:this.hideLinkBadge(e.link);break;case l.default.NAVBAR_SET_VERSION_INFO:this.setVersion(e.version);break;case l.default.NAVBAR_ACTIVE_LINK:this.setActiveLink(e.name);break;case l.default.NAVBAR_HIDE:this.hideNavBar();break;case l.default.NAVBAR_SHOW:this.showNavBar();break;case l.default.NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:this._loginSectionVisible=e.visible;break;case l.default.NAVBAR_SHOW_LOGIN_BUTTON:this._loginSectionVisible=!0,this._loginVisibleInsteadOfLogout=!0;break;case l.default.NAVBAR_SHOW_LOGOUT_BUTTON:this._loginSectionVisible=!0,this._loginVisibleInsteadOfLogout=!1;break;default:return}this.triggerChange()}}),u.navBarStore=new u.NavBarStore,u.navBarStore.dispatchToken=r.default.dispatcher.register(u.navBarStore.dispatch),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD_NOTIFICATION:"ADD_NOTIFICATION",SHOW_NOTIFICATION_CENTER:"SHOW_NOTIFICATION_CENTER",HIDE_NOTIFICATION_CENTER:"HIDE_NOTIFICATION_CENTER",CLEAR_SINGLE_NOTIFICATION:"CLEAR_SINGLE_NOTIFICATION",CLEAR_ALL_NOTIFICATIONS:"CLEAR_ALL_NOTIFICATIONS",SELECT_NOTIFICATION_FILTER:"SELECT_NOTIFICATION_FILTER",START_HIDING_NOTIFICATION:"START_HIDING_NOTIFICATION",HIDE_NOTIFICATION:"HIDE_NOTIFICATION",HIDE_ALL_NOTIFICATIONS:"HIDE_ALL_NOTIFICATIONS",SHOW_PERMANENT_NOTIFICATION:"SHOW_PERMANENT_NOTIFICATION",HIDE_PERMANENT_NOTIFICATION:"HIDE_PERMANENT_NOTIFICATION"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePermissionUnsafe=t.deletePermission=t.updatePermission=t.deletePermissionFromObject=t.setPermissionOnObject=t.fetchPermissions=t.receivedPermissions=void 0;var o=n(2),r=a(o);n(477);var i=n(321),l=n(320),s=t.receivedPermissions=function(e){return{type:l.PERMISSIONS_UPDATE,permissions:e}},u=(t.fetchPermissions=function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(e.error&&e.reason)throw t(s({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(s(e))}).catch(function(e){r.default.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})})}},t.setPermissionOnObject=function(e,t,n,a){if((0,i.isValueAlreadySet)(e,t,n,a))throw new Error("Role/Name has already been added");return(0,i.addValueToPermissions)(e,t,n,a)}),c=t.deletePermissionFromObject=function(e,t,n,a){if(!(0,i.isValueAlreadySet)(e,t,n,a))throw new Error("Role/Name does not exist");return e[t][n]=e[t][n].filter(function(e){return e!==a}),e},d=(t.updatePermission=function(e,t,n,a,o){return function(i){u(t,n,a,o),d(e,t,i).catch(function(e){r.default.addNotification({msg:e.message,type:"error"})})}},t.deletePermission=function(e,t,n,a,o){return function(i){c(t,n,a,o),d(e,t,i).catch(function(e){r.default.addNotification({msg:e.message,type:"error"})})}},t.updatePermissionUnsafe=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error(e.reason);return e}).then(function(){return r.default.addNotification({msg:"Database permissions has been updated."}),n(s(t))}).catch(function(e){r.default.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERMISSIONS_UPDATE="PERMISSIONS_UPDATE"},function(e,t,n){"use strict";function a(e,t,n,a){return!!e[t]&&!!e[t][n]&&-1!==e[t][n].indexOf(a)}function o(e,t,n,a){return e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.isValueAlreadySet=a,t.addValueToPermissions=o},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.PERMISSIONS_UPDATE:var n=t.permissions;return i({},e,{isLoading:!1,security:n,adminRoles:o("admins",n),adminNames:r("admins",n),memberRoles:o("members",n),memberNames:r("members",n)});default:return e}}function o(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function r(e,t){return t[e]&&t[e].names?t[e].names:[]}Object.defineProperty(t,"__esModule",{value:!0}),t.getMemberRoles=t.getMemberNames=t.getAdminNames=t.getAdminRoles=t.getSecurity=t.getIsLoading=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=a;var l=n(320),s={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};t.getIsLoading=function(e){return e.isLoading},t.getSecurity=function(e){return e.security},t.getAdminRoles=function(e){return e.adminRoles},t.getAdminNames=function(e){return e.adminNames},t.getMemberNames=function(e){return e.memberNames},t.getMemberRoles=function(e){return e.memberRoles}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkForNewApi=t.changeActivitySort=t.hideConflictModal=t.showConflictModal=t.getReplicationStateFrom=t.deleteReplicates=t.deleteDocs=t.clearSelectedReplicates=t.clearSelectedDocs=t.selectReplicate=t.selectAllReplicates=t.selectDoc=t.selectAllDocs=t.filterReplicate=t.filterDocs=t.getReplicateActivity=t.getReplicationActivity=t.clearReplicationForm=t.updateFormField=t.replicate=t.getDatabasesList=t.initReplicator=void 0;var o=n(178),r=a(o),i=n(2),l=a(i),s=n(24),u=n(324),c=a(u),d=n(623),f=a(d),p=n(18),h=a(p),m=n(56),g=a(m),b=n(174),E=(t.initReplicator=function(e,t){return function(n){e&&e!==t&&n({type:c.default.INIT_REPLICATION,options:{localSource:e}})}},t.getDatabasesList=function(){return function(e){var t=h.default.getServerUrl("/_all_dbs");(0,s.get)(t).then(function(t){e({type:c.default.REPLICATION_DATABASES_LOADED,options:{databases:t}})})}},t.replicate=function e(t){return function(n){var a=(0,b.createReplicationDoc)(t),o=h.default.getServerUrl("/_replicator"),r=(0,s.post)(o,a),i=f.default.getDatabaseLabel(a.source),u=f.default.getDatabaseLabel(a.target);n({type:c.default.REPLICATION_STARTING});var d=function(e){l.default.addNotification({msg:e.reason,type:"error",clear:!0})};return r.then(function(e){if(!e.ok)throw e;l.default.addNotification({msg:"Replication from <code>"+decodeURIComponent(i)+"</code> to <code>"+decodeURIComponent(u)+"</code> has been scheduled.",type:"success",escape:!1,clear:!0}),n(E()),l.default.navigate("#/replication")}).catch(function(a){if(a.error&&"not_found"===a.error)return(0,b.createReplicatorDB)().then(function(){return e(t)(n)}).catch(d);d(a)})}},t.updateFormField=function(e,t){return{type:c.default.REPLICATION_UPDATE_FORM_FIELD,options:{fieldName:e,value:t}}},t.clearReplicationForm=function(){return{type:c.default.REPLICATION_CLEAR_FORM}},t.getReplicationActivity=function(){return function(e){e({type:c.default.REPLICATION_FETCHING_STATUS}),(0,b.supportNewApi)().then(function(e){return(0,b.fetchReplicationDocs)(e)}).then(function(t){e({type:c.default.REPLICATION_STATUS,options:t})})}}),v=t.getReplicateActivity=function(){return function(e){(0,b.supportNewApi)().then(function(t){t&&(e({type:c.default.REPLICATION_FETCHING_REPLICATE_STATUS}),(0,b.fetchReplicateInfo)().then(function(t){e({type:c.default.REPLICATION_REPLICATE_STATUS,options:t})}))})}},y=(t.filterDocs=function(e){return{type:c.default.REPLICATION_FILTER_DOCS,options:e}},t.filterReplicate=function(e){return{type:c.default.REPLICATION_FILTER_REPLICATE,options:e}},t.selectAllDocs=function(){return{type:c.default.REPLICATION_TOGGLE_ALL_DOCS}},t.selectDoc=function(e){return{type:c.default.REPLICATION_TOGGLE_DOC,options:e}},t.selectAllReplicates=function(){return{type:c.default.REPLICATION_TOGGLE_ALL_REPLICATE}},t.selectReplicate=function(e){return{type:c.default.REPLICATION_TOGGLE_REPLICATE,options:e}},t.clearSelectedDocs=function(){return{type:c.default.REPLICATION_CLEAR_SELECTED_DOCS}}),O=t.clearSelectedReplicates=function(){return{type:c.default.REPLICATION_CLEAR_SELECTED_REPLICATES}},N=(t.deleteDocs=function(e){return function(t){var n=e.map(function(e){var t=e.raw;return t._deleted=!0,t});l.default.addNotification({msg:"Deleting doc"+(n.length>1?"s":"")+".",type:"success",escape:!1,clear:!0});var a=h.default.getServerUrl("/_replicator/_bulk_docs");(0,s.post)(a,{docs:n},{raw:!0}).then(function(e){if(!e.ok)throw e;return e}).then(function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>"+e[0]._id+"</code> has been deleted"),l.default.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t(y()),t(E())}).catch(function(e){e.json().then(function(e){l.default.addNotification({msg:e.reason,type:"error",clear:!0})})})}},t.deleteReplicates=function(e){return function(t){l.default.addNotification({msg:"Deleting _replicate"+(e.length>1?"s":"")+".",type:"success",escape:!1,clear:!0}),(0,b.deleteReplicatesApi)(e).then(function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>"+e[0]._id+"</code> has been deleted"),t(O()),t(v()),l.default.addNotification({msg:n,type:"success",escape:!1,clear:!0})},function(e){var t=JSON.parse(e.responseText);l.default.addNotification({msg:t.reason,type:"error",clear:!0})})}},function(e){var t={type:g.default.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6),a=r.default.decode(n);return t.type=g.default.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:a.split(":")[0],password:a.split(":")[1]},t}var o=l.default.getExtensions("Replication:Auth"),i=void 0,s=void 0;return o&&o.map(function(t){!i&&t.getCredentials&&(i=t.getCredentials(e),s=t.typeValue)}),i&&(t.type=s,t.creds=i),t});t.getReplicationStateFrom=function(e){return function(t){t({type:c.default.REPLICATION_FETCHING_FORM_STATE});var n=h.default.getServerUrl("/_replicator/"+encodeURIComponent(e));(0,s.get)(n).then(function(e){var n={replicationDocName:e._id,replicationType:e.continuous?g.default.REPLICATION_TYPE.CONTINUOUS:g.default.REPLICATION_TYPE.ONE_TIME},a=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(a.indexOf(window.location.hostname)>-1){var r=new URL(a);n.replicationSource=g.default.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(r.pathname.slice(1))}else n.replicationSource=g.default.REPLICATION_SOURCE.REMOTE,n.remoteSource=(0,b.decodeFullUrl)(a);var i=N(e.source);if(n.sourceAuthType=i.type,n.sourceAuth=i.creds,o.indexOf(window.location.hostname)>-1){var l=new URL(o);n.replicationTarget=g.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(l.pathname.slice(1))}else n.replicationTarget=g.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=(0,b.decodeFullUrl)(o);var s=N(e.target);n.targetAuthType=s.type,n.targetAuth=s.creds,t({type:c.default.REPLICATION_SET_STATE_FROM_DOC,options:n})}).catch(function(e){l.default.addNotification({msg:e.reason,type:"error",clear:!0})})}},t.showConflictModal=function(){return{type:c.default.REPLICATION_SHOW_CONFLICT_MODAL}},t.hideConflictModal=function(){return{type:c.default.REPLICATION_HIDE_CONFLICT_MODAL}},t.changeActivitySort=function(e){return{type:c.default.REPLICATION_CHANGE_ACTIVITY_SORT,options:e}},t.checkForNewApi=function(){return function(e){(0,b.supportNewApi)().then(function(t){e({type:c.default.REPLICATION_SUPPORT_NEW_API,options:t})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INIT_REPLICATION:"INIT_REPLICATION",CHANGE_REPLICATION_SOURCE:"CHANGE_REPLICATION_SOURCE",REPLICATION_DATABASES_LOADED:"REPLICATION_DATABASES_LOADED",REPLICATION_UPDATE_FORM_FIELD:"REPLICATION_UPDATE_FORM_FIELD",REPLICATION_CLEAR_FORM:"REPLICATION_CLEAR_FORM",REPLICATION_STARTING:"REPLICATION_STARTING",REPLICATION_STATUS:"REPLICATION_STATUS",REPLICATION_FETCHING_STATUS:"REPLICATION_FETCHING_STATUS",REPLICATION_FILTER_DOCS:"REPLICATION_FILTER_DOCS",REPLICATION_TOGGLE_ALL_DOCS:"REPLICATION_TOGGLE_ALL_DOCS",REPLICATION_TOGGLE_DOC:"REPLICATION_TOGGLE_DOC",REPLICATION_DELETE_DOCS:"REPLICATION_DELETE_DOCS",REPLICATION_SET_STATE_FROM_DOC:"REPLICATION_SET_STATE_FROM_DOC",REPLICATION_SHOW_CONFLICT_MODAL:"REPLICATION_SHOW_CONFLICT_MODAL",REPLICATION_HIDE_CONFLICT_MODAL:"REPLICATION_HIDE_CONFLICT_MODAL",REPLICATION_CHANGE_ACTIVITY_SORT:"REPLICATION_CHANGE_ACTIVITY_SORT",REPLICATION_CLEAR_SELECTED_DOCS:"REPLICATION_CLEAR_SELECTED_DOCS",REPLICATION_CHANGE_TAB_SECTION:"REPLICATION_CHANGE_TAB_SECTION",REPLICATION_FETCHING_REPLICATE_STATUS:"REPLICATION_FETCHING_REPLICATE_STATUS",REPLICATION_REPLICATE_STATUS:"REPLICATION_REPLICATE_STATUS",REPLICATION_SUPPORT_NEW_API:"REPLICATION_SUPPORT_NEW_API",REPLICATION_FILTER_REPLICATE:"REPLICATION_FILTER_REPLICATE",REPLICATION_TOGGLE_ALL_REPLICATE:"REPLICATION_TOGGLE_ALL_REPLICATE",REPLICATION_TOGGLE_REPLICATE:"REPLICATION_TOGGLE_REPLICATE",REPLICATION_CLEAR_SELECTED_REPLICATES:"REPLICATION_CLEAR_SELECTED_REPLICATES",REPLICATION_FETCHING_FORM_STATE:"REPLICATION_FETCHING_FORM_STATE",REPLICATION_HIDE_PASSWORD_MODAL:"REPLICATION_HIDE_PASSWORD_MODAL",REPLICATION_SHOW_PASSWORD_MODAL:"REPLICATION_SHOW_PASSWORD_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationHeader=t.ReplicationFilter=void 0;var o=n(1),r=a(o),i=n(0),l=a(i),s=t.ReplicationFilter=function(e){var t=e.value,n=e.onChange;return l.default.createElement("div",{className:"replication__filter"},l.default.createElement("i",{className:"replication__filter-icon fonticon-filter"}),l.default.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};s.propTypes={value:r.default.string.isRequired,onChange:r.default.func.isRequired},(t.ReplicationHeader=function(e){var t=e.filter,n=e.onFilterChange;return l.default.createElement("div",{className:"replication__activity_header"},l.default.createElement("div",null),l.default.createElement(s,{value:t,onChange:n}),l.default.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},l.default.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))}).propTypes={filter:r.default.string.isRequired,onFilterChange:r.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationTable=t.formatUrl=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(20),p=n(214),h=a(p),m=n(133),_=n(174),g=n(18),b=a(g),E=function(e,t){try{var n=new URL(t),a=e.pathname.substring(n.pathname.length);return encodeURIComponent(a)}catch(e){return""}},v=t.formatUrl=function(e){var t=void 0,n=void 0;try{t=new URL((0,_.removeCredentialsFromUrl)(e))}catch(e){return""}var a=b.default.getRootUrl();return n=E(t,a),e.indexOf(window.location.hostname)>-1?d.default.createElement("span",null,a,d.default.createElement("a",{href:"#/database/"+n+"/_all_docs"},decodeURIComponent(n))):""+t.origin+t.pathname},y=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1},n}return i(t,e),l(t,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:d.default.createElement("span",null,d.default.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),d.default.createElement(m.ErrorModal,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,a=(0,h.default)(t),o=d.default.createElement("span",null,n);if(a.isValid()){var r=a.format("MMM Do, h:mm a"),i=d.default.createElement(f.Tooltip,{id:""},"Last updated: ",r);o=d.default.createElement(f.OverlayTrigger,{placement:"top",overlay:i},d.default.createElement("span",null,n))}return d.default.createElement("td",{className:"replication__row-status replication__row-status--"+n},o,this.getErrorIcon())}}]),t}(d.default.Component);y.propTypes={statusTime:u.default.any,status:u.default.string,errorMsg:u.default.string.isRequired},y.defaultProps={status:""};var O=function(e){var t=e.onlyDeleteAction,n=e._id,a=e.url,o=e.deleteDocs,r=[];return t||(r.push(d.default.createElement("li",{className:"replication__row-list",key:1},d.default.createElement("a",{href:"#replication/id/"+encodeURIComponent(n),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),r.push(d.default.createElement("li",{className:"replication__row-list",key:2},d.default.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:a,"data-bypass":"true"})))),r.push(d.default.createElement("li",{className:"replication__row-list",key:3},d.default.createElement("a",{className:"replication__row-btn icon-trash "+(t?"replication__row-btn--no-left-pad":"")+" ",title:"Delete "+(t?"job":"document")+" "+n,onClick:function(){return o(n)}}))),d.default.createElement("ul",{className:"replication__row-actions-list"},r)};O.propTypes={_id:u.default.string.isRequired,url:u.default.string,error:u.default.bool.isRequired,errorMsg:u.default.string.isRequired,deleteDocs:u.default.func.isRequired};var N=function(e){var t=e._id,n=e.source,a=e.target,o=e.type,r=e.startTime,i=e.status,l=e.statusTime,s=e.url,u=e.selected,c=e.selectDoc,f=e.errorMsg,p=e.deleteDocs,m=e.onlyDeleteAction,_=e.showStateRow,g=(0,h.default)(r),b=g.isValid()?g.format("MMM Do, h:mm a"):"",E=null;return _&&(E=d.default.createElement(y,{statusTime:l,status:i,errorMsg:f})),d.default.createElement("tr",{className:"replication__table-row"},d.default.createElement("td",{className:"replication__table-col"},d.default.createElement("input",{checked:u,type:"checkbox",onChange:function(){return c(t)}})," "),d.default.createElement("td",{className:"replication__table-col"},v(n)),d.default.createElement("td",{className:"replication__table-col"},v(a)),d.default.createElement("td",{className:"replication__table-col"},b),d.default.createElement("td",{className:"replication__table-col"},o),E,d.default.createElement("td",{className:"replication__table-col"},d.default.createElement(O,{onlyDeleteAction:m,deleteDocs:p,_id:t,url:s,error:"error"===i||"retrying"===i,errorMsg:f})))};N.propTypes={_id:u.default.string.isRequired,source:u.default.string.isRequired,target:u.default.string.isRequired,type:u.default.string.isRequired,status:u.default.string,url:u.default.string,statusTime:u.default.object.isRequired,startTime:u.default.object,selected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,errorMsg:u.default.string.isRequired,deleteDocs:u.default.func.isRequired,onlyDeleteAction:u.default.bool.isRequired,showStateRow:u.default.bool.isRequired};var S=function(e){var t=e.isSelected,n=e.deleteDocs,a=e.someDocsSelected,o=e.onCheck,r=a?d.default.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return d.default.createElement("div",{className:"replication__bulk-select-wrapper"},d.default.createElement("div",{className:"replication__bulk-select-header"},d.default.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),r)};S.propTypes={isSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,onCheck:u.default.func.isRequired,deleteDocs:u.default.func.isRequired};var D=function(e){var t=e.msg;return d.default.createElement("tr",null,d.default.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};D.defaultProps={msg:"There is no replicator-db activity or history to display."},(t.ReplicationTable=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"sort",value:function(e,t,n){var a=!1,o=n.sort(function(t,n){return t[e]<n[e]?(a=!0,-1):t[e]>n[e]?(a=!0,1):0});return!t&&a&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?d.default.createElement(D,null):this.sort(this.props.column,this.props.descending,this.props.docs).map(function(t,n){return d.default.createElement(N,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})})}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?d.default.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("status")+" "+this.isSelected("status")})):null}},{key:"render",value:function(){return d.default.createElement(f.Table,{striped:!0},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{className:"replication__table-bulk-select"},d.default.createElement(S,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),d.default.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("source")+" "+this.isSelected("source")})),d.default.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("target")+" "+this.isSelected("target")})),d.default.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("statusTime")+" "+this.isSelected("statusTime")})),d.default.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",d.default.createElement("span",{className:"replication__table-header-icon "+this.iconDirection("continuous")+" "+this.isSelected("continuous")})),this.stateCol(),d.default.createElement("th",{className:"replication__table-header-actions"},"Actions"))),d.default.createElement("tbody",null,this.renderRows()))}}]),t}(d.default.Component)).defaultProps={onlyDeleteAction:!1,showStateRow:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getReplicateInfo=t.someReplicateSelected=t.getAllReplicateSelected=t.isReplicateInfoLoading=t.supportNewApi=t.getCheckingApi=t.getTabSection=t.getActivitySort=t.getPassword=t.getUsername=t.getSomeDocsSelected=t.getAllDocsSelected=t.getReplicateFilter=t.getStatusFilter=t.getFilteredReplicationStatus=t.getSubmittedNoChange=t.getReplicationDocName=t.getReplicationType=t.isConflictModalVisible=t.getRemoteTarget=t.isLocalTargetKnown=t.getLocalTarget=t.getReplicationTarget=t.getRemoteSource=t.isLocalSourceKnown=t.getLocalSource=t.getReplicationSource=t.getDatabases=t.isActivityLoading=t.isLoading=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(2),i=a(r),l=n(324),s=a(l),u=n(56),c=a(u),d=n(11),f=a(d),p=function(e){f.default.utils.localStorageSet("replication-activity-sort",e)},h=function(){var e={descending:!1,column:"statusTime"},t=f.default.utils.localStorageGet("replication-activity-sort");return t||(t=e),p(t),t},m={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth"},g={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:c.default.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:c.default.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},isConflictModalVisible:!1,replicationType:c.default.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:h()},b=function(e){var t=o({},e);return Object.values(m).forEach(function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:""}),t.sourceAuthType=c.default.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=c.default.REPLICATION_AUTH_METHOD.NO_AUTH,t},E=function(e,t,n){var a=o({},e,{submittedNoChange:!1});if(a[m[t]]=n,t===m.sourceAuthType||t===m.replicationSource){var r=a[m.sourceAuthType]===c.default.REPLICATION_AUTH_METHOD.BASIC,l=a[m.replicationSource]===c.default.REPLICATION_SOURCE.LOCAL,s=!a[m.sourceAuth]||!a[m.sourceAuth].username;r&&l&&s&&(a[m.sourceAuth]={username:i.default.session.user().name,password:""})}else if(t===m.targetAuthType||t===m.replicationTarget){var u=a[m.targetAuthType]===c.default.REPLICATION_AUTH_METHOD.BASIC,d=a[m.replicationTarget]===c.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||a[m.replicationTarget]===c.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE,f=!a[m.targetAuth]||!a[m.targetAuth].username;u&&d&&f&&(a[m.targetAuth]={username:i.default.session.user().name,password:""})}return a},v=function(e,t){var n=e.statusDocs.find(function(e){return e._id===t});return n?(n.selected=!n.selected,o({},e,{allDocsSelected:!1})):e},y=function(e){var t=o({},e,{allDocsSelected:!e.allDocsSelected});return T(t).forEach(function(e){return e.selected=t.allDocsSelected}),t},O=function(e,t){var n=o({},e),a=n._replicateInfo.find(function(e){return e._id===t});if(!a)return n;a.selected=!a.selected,n._allReplicateSelected=!1},N=function(e){var t=o({},e,{allReplicateSelected:!e.allReplicateSelected});return C(t).forEach(function(e){return e.selected=t.allReplicateSelected}),t},S=function(e,t){var n=o({},e,{loading:!1});return Object.keys(t).reduce(function(e,n){return E(e,n,t[n])},n)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments[1],n=t.type,a=t.options;switch(n){case s.default.INIT_REPLICATION:var r=o({},e,{loading:!0});return a.localSource&&(r.localSource=a.localSource,r.replicationSource=c.default.REPLICATION_SOURCE.LOCAL,r.remoteSource="",r.replicationTarget="",r.localTarget="",r.remoteTarget=""),r;case s.default.REPLICATION_DATABASES_LOADED:return o({},e,{loading:!1,databases:a.databases});case s.default.REPLICATION_FETCHING_FORM_STATE:return o({},e,{loading:!0});case s.default.REPLICATION_UPDATE_FORM_FIELD:return E(e,a.fieldName,a.value);case s.default.REPLICATION_CLEAR_FORM:return b(e);case s.default.REPLICATION_STARTING:return o({},e,{submittedNoChange:!0});case s.default.REPLICATION_FETCHING_STATUS:return o({},e,{activityLoading:!0});case s.default.REPLICATION_STATUS:return o({},e,{activityLoading:!1,statusDocs:a});case s.default.REPLICATION_FILTER_DOCS:return o({},e,{statusFilter:a});case s.default.REPLICATION_FILTER_REPLICATE:return o({},e,{replicateFilter:a});case s.default.REPLICATION_TOGGLE_DOC:return v(e,a);case s.default.REPLICATION_TOGGLE_ALL_DOCS:return y(e);case s.default.REPLICATION_TOGGLE_REPLICATE:return O(e,a);case s.default.REPLICATION_TOGGLE_ALL_REPLICATE:return N(e);case s.default.REPLICATION_SET_STATE_FROM_DOC:return S(e,a);case s.default.REPLICATION_SHOW_CONFLICT_MODAL:return o({},e,{isConflictModalVisible:!0});case s.default.REPLICATION_HIDE_CONFLICT_MODAL:return o({},e,{isConflictModalVisible:!1});case s.default.REPLICATION_CHANGE_ACTIVITY_SORT:return p(a),o({},e,{activitySort:h()});case s.default.REPLICATION_CLEAR_SELECTED_DOCS:return o({},e,{allDocsSelected:!1});case s.default.REPLICATION_CHANGE_TAB_SECTION:return o({},e,{tabSection:a});case s.default.REPLICATION_SUPPORT_NEW_API:return o({},e,{checkingApi:!1,supportNewApi:a});case s.default.REPLICATION_FETCHING_REPLICATE_STATUS:return o({},e,{fetchingReplicateInfo:!0});case s.default.REPLICATION_REPLICATE_STATUS:return o({},e,{fetchingReplicateInfo:!1,replicateInfo:a});case s.default.REPLICATION_CLEAR_SELECTED_REPLICATES:return o({},e,{allReplicateSelected:!1});default:return e}},T=(t.isLoading=function(e){return e.isLoading},t.isActivityLoading=function(e){return e.activityLoading},t.getDatabases=function(e){return e.databases},t.getReplicationSource=function(e){return e.replicationSource},t.getLocalSource=function(e){return e.localSource},t.isLocalSourceKnown=function(e){return-1!==_.indexOf(e.databases,e.localSource)},t.getRemoteSource=function(e){return e.remoteSource},t.getReplicationTarget=function(e){return e.replicationTarget},t.getLocalTarget=function(e){return e.localTarget},t.isLocalTargetKnown=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},t.getRemoteTarget=function(e){return e.remoteTarget},t.isConflictModalVisible=function(e){return e.isConflictModalVisible},t.getReplicationType=function(e){return e.replicationType},t.getReplicationDocName=function(e){return e.replicationDocName},t.getSubmittedNoChange=function(e){return e.submittedNoChange},t.getFilteredReplicationStatus=function(e){return e.statusDocs.filter(function(t){return Object.values(t).filter(function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null}).length>0})}),C=(t.getStatusFilter=function(e){return e.statusFilter},t.getReplicateFilter=function(e){return e.replicateFilter},t.getAllDocsSelected=function(e){return e.allDocsSelected},t.getSomeDocsSelected=function(e){return T(e).some(function(e){return e.selected})},t.getUsername=function(e){return e.username},t.getPassword=function(e){return e.password},t.getActivitySort=function(e){return e.activitySort},t.getTabSection=function(e){return e.tabSection},t.getCheckingApi=function(e){return e.checkingAPI},t.supportNewApi=function(e){return e.supportNewApi},t.isReplicateInfoLoading=function(e){return e.fetchingReplicateInfo},t.getAllReplicateSelected=function(e){return e.allReplicateSelected},t.someReplicateSelected=function(e){return C(e).some(function(e){return e.selected})},t.getReplicateInfo=function(e){return e.replicateInfo.filter(function(t){return Object.values(t).filter(function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)}).length>0})});t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SETUP_SET_CLUSTERSTATUS="SETUP_SET_CLUSTERSTATUS",t.SETUP_SET_USERNAME="SETUP_SET_USERNAME",t.SETUP_SET_PASSWORD="SETUP_SET_PASSWORD",t.SETUP_BIND_ADDRESS_FOR_SINGLE_NODE="SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",t.SETUP_PORT_FOR_SINGLE_NODE="SETUP_PORT_FOR_SINGLE_NODE",t.SETUP_PORT_ADDITIONAL_NODE="SETUP_PORT_ADDITIONAL_NODE",t.SETUP_BIND_ADDRESS_ADDITIONAL_NODE="SETUP_BIND_ADDRESS_ADDITIONAL_NODE",t.SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE="SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",t.SETUP_RESET_ADDITIONAL_NODE="SETUP_RESET_ADDITIONAL_NODE",t.SETUP_ADD_NODE_TO_LIST="SETUP_ADD_NODE_TO_LIST",t.SETUP_NODE_COUNT="SETUP_NODE_COUNT"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(11),p=a(f),h=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNodeType=function(){var e=a.props.clusterState;return"cluster_finished"===e?"clustered":"single_node_enabled"===e?"single":"unknown state"},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.getNodeType();return u.default.createElement("div",{className:"setup-screen"},p.default.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",u.default.createElement("br",null),u.default.createElement("br",null),"Do you want to ",u.default.createElement("a",{href:"#replication"},"replicate data"),"?")}}]),t}(u.default.Component);t.default=h,h.propTypes={clusterState:d.default.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),u.default.createElement("div",{className:"setup-creds"},u.default.createElement("div",null,u.default.createElement("p",null,e)),u.default.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username,type:"text"}),u.default.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password,type:"password"}))}}]),t}(u.default.Component);t.default=f,f.propTypes={onAlterUsername:d.default.func.isRequired,onAlterPassword:d.default.func.isRequired,username:d.default.string.isRequired,password:d.default.string.isRequired,isAdminParty:d.default.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.handleIpChange=function(e){a.props.onAlterBindAddress(e)},a.handlePortChange=function(e){a.props.onAlterPort(e)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"setup-opt-settings"},u.default.createElement("p",null,"Bind address the node will listen on"),u.default.createElement("input",{className:"setup-input-ip",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),u.default.createElement("div",{className:"setup-port"},u.default.createElement("p",null,"Port that the node will use"),u.default.createElement("input",{className:"setup-input-port",value:this.props.port,onChange:this.handlePortChange,type:"text"})))}}]),t}(u.default.Component);t.default=f,f.propTypes={ip:d.default.string.isRequired,port:d.default.number.isRequired,onAlterBindAddress:d.default.func.isRequired,onAlterPort:d.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(176),l=a(i),s=n(334),u=a(s),c=n(333),d=a(c),f=function(e){return function(){r.default.dispatch({type:d.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!0})}},p=!0,h=function(e){return function(t){if(p=!1,t){r.default.dispatch({type:d.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!1});var n="n/a";t.responseText?n=JSON.parse(t.responseText).reason:t.message&&(n=t.message),r.default.addNotification({msg:"Error: "+n,type:"error"})}}};t.default={resetStore:function(){r.default.dispatch({type:d.default.VERIFY_INSTALL_RESET})},startVerification:function(){r.default.dispatch({type:d.default.VERIFY_INSTALL_START});var e=u.default.testProcess;e.setup().then(function(){return e.saveDB().then(f(l.default.TESTS.CREATE_DATABASE))},h(l.default.TESTS.CREATE_DATABASE)).then(function(){return e.saveDoc().then(f(l.default.TESTS.CREATE_DOCUMENT))},h(l.default.TESTS.CREATE_DATABASE)).then(function(){return e.updateDoc().then(f(l.default.TESTS.UPDATE_DOCUMENT))},h(l.default.TESTS.CREATE_DOCUMENT)).then(function(){return e.destroyDoc().then(f(l.default.TESTS.DELETE_DOCUMENT))},h(l.default.TESTS.UPDATE_DOCUMENT)).then(function(){return e.setupView().then(function(){return e.testView().then(f(l.default.TESTS.CREATE_VIEW))})},h(l.default.TESTS.DELETE_DOCUMENT)).then(function(){return e.setupReplicate().then(function(){return e.testReplicate().then(f(l.default.TESTS.REPLICATION))})},h(l.default.TESTS.CREATE_VIEW)).then(function(){},h(l.default.TESTS.REPLICATION)).then(function(){r.default.dispatch({type:d.default.VERIFY_INSTALL_ALL_TESTS_COMPLETE}),p&&r.default.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),e.removeDBs()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={VERIFY_INSTALL_START:"VERIFY_INSTALL_START",VERIFY_INSTALL_RESET:"VERIFY_INSTALL_RESET",VERIFY_INSTALL_SINGLE_TEST_COMPLETE:"VERIFY_INSTALL_SINGLE_TEST_COMPLETE",VERIFY_INSTALL_ALL_TESTS_COMPLETE:"VERIFY_INSTALL_ALL_TESTS_COMPLETE"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(18),l=a(i),s=n(24),u=n(97),c=a(u),d=n(79),f=a(d),p=r.default.addon(),h=new c.default.Model({id:"verifytestdb",name:"verifytestdb"}),m=new c.default.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"}),g=void 0,b=void 0;p.testProcess={saveDoc:function(){return g=new f.default.Doc({_id:"test_doc_1",a:1},{database:h}),g.save()},destroyDoc:function(){return g.destroy()},updateDoc:function(){return g.set({b:"hello"}),g.save()},saveDB:function(){return h.save()},setupDB:function(e){return new r.default.Promise(function(t,n){e.fetch().then(function(){return e.destroy()},function(){t()}).then(function(){t()},function(e,t,a){n(new Error(a))})})},setup:function(){return r.default.Promise.all([this.setupDB(h),this.setupDB(m)])},testView:function(){var e=void 0,t=void 0,n=new r.default.Promise(function(n,a){e=n,t=a});return(0,s.get)(b.url()+"/_view/testview").then(function(e){if(e.error)throw new Error(e.reason||e.error);return e}).then(function(n){n=_.isString(n)?JSON.parse(n):n;var a=n.rows[0];6===a.value&&e(),t(new Error("Values expect 6, got "+a.value))},t),n},setupView:function(){var e=new f.default.Doc({_id:"test_doc_10",a:1},{database:h}),t=new f.default.Doc({_id:"test_doc_20",a:2},{database:h}),n=new f.default.Doc({_id:"test_doc_30",a:3},{database:h});return b=new f.default.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:h}),r.default.Promise.all([e.save(),t.save(),n.save(),b.save()])},setupReplicate:function(){var e={create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"};return(0,s.post)(l.default.getServerUrl("/_replicate"),e).then(function(e){if(e.error)throw new Error(e.reason||e.error);return e})},testReplicate:function(){return new r.default.Promise(function(e,t){m.fetch().then(function(){var n=m.get("doc_count");if(4===n)return void e();var a="Replication Failed, expected 4 docs got "+n;t(new Error(a))},t)})},removeDBs:function(){m.destroy(),h.destroy()}},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard"}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(73),i=a(r),l=n(19),s=a(l),u={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){u.dispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){u.dispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){u.dispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=s.default.extend({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),u.dispatch({type:"ADD_NOTIFICATION",options:{info:e}})},config:function(e){return s.default.extend(this,e)}};u.Deferred=function(){return $.Deferred()},u.when=function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},u.addonExtensions={initialize:function(){},RouteObjects:{},Views:{}},u.addon=function(e){return s.default.extend(s.default.clone(u.addonExtensions),e)},u.View=i.default.View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var c={fetchOnce:function(e){var t=s.default.extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};u.Model=i.default.Model.extend({}),u.Collection=i.default.Collection.extend({}),s.default.each([u.Model,u.Collection],function(e){s.default.extend(e.prototype,c)});var d=s.default.extend({},i.default.Events);u.registerExtension=function(e,t){d[e]||(d[e]=[]),d.trigger("add:"+e,t),d[e].push(t)},u.unRegisterExtension=function(e){var t=d[e];t&&(d.trigger("remove:"+e,t),delete d[e])},u.getExtensions=function(e){var t=d[e];return t||(t=[]),t},u.removeExtensionItem=function(e,t,n){var a=d[e];if(a){var o=arguments[arguments.length-1];s.default.isObject(t)&&!n&&(o=function(e){return s.default.isEqual(e,t)}),a=s.default.filter(a,function(e){return!o(e)}),d[e]=a,d.trigger("removeItem:"+e,t)}},u.extensions=d,u.setSession=function(e){u.session=e},u.reducers={},u.addReducers=function(e){u.reducers=o({},u.reducers,e)},u.middlewares=[],u.addMiddleware=function(e){e&&"function"==typeof e&&u.middlewares.push(e)},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={root:"/",version:"1.0",host:"../",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match."}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=n(11),i=a(r),l=n(0),s=a(l),u=n(10),c=a(u),d=n(2),f=a(d),p=n(645),h=a(p),m=n(73),_=a(m),g=n(116),b=a(g),E=n(592),v=a(E),y=n(469),O=n(1044),N=a(O),S=n(23);f.default.addMiddleware(N.default);var D=(0,y.createStore)((0,y.combineReducers)(f.default.reducers),y.applyMiddleware.apply(void 0,o(f.default.middlewares)));i.default.addons=h.default,f.default.router=i.default.router=new f.default.Router(i.default.addons),_.default.history.start({pushState:!1,root:i.default.root}),"ActiveXObject"in window&&b.default.ajaxSetup({cache:!1});var T=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null};document.addEventListener("click",function(e){var t=T(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var a=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,a.length)===a&&(e.preventDefault(),i.default.router.navigate(n.attr,!0))}}}),c.default.render(s.default.createElement(S.Provider,{store:D},s.default.createElement(v.default,{router:i.default.router})),document.getElementById("app"))},,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(489),l=a(i);n(781),l.default.initialize=function(){r.default.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTasksPollingWidgetController=t.ActiveTasksController=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(11),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(490)),h=a(p),m=n(267),g=a(m),b=n(265),E=a(b),v=n(14),y=a(v),O=n(18),N=a(O),S=y.default.TabElement,D=y.default.TabElementWrapper,T=y.default.Polling,C=h.default.activeTasksStore,w=t.ActiveTasksController=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{collection:C.getCollection(),searchTerm:C.getSearchTerm(),selectedRadio:C.getSelectedRadio(),sortByHeader:C.getSortByHeader(),headerIsAscending:C.getHeaderIsAscending()}},a.onChange=function(){a.setState(a.getStoreState())},a.setNewSearchTerm=function(e){E.default.setSearchTerm(e)},a.switchTab=function(e){E.default.switchTab(e)},a.tableHeaderOnClick=function(e){E.default.sortByColumnHeader(e)},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){E.default.init(new g.default.AllTasks),C.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){C.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.collection,n=e.searchTerm,a=e.selectedRadio,o=e.sortByHeader,r=e.headerIsAscending,i=this.setNewSearchTerm,l=this.tableHeaderOnClick;return d.default.createElement("div",{id:"active-tasks-page",className:"scrollable"},d.default.createElement("div",{className:"inner"},d.default.createElement(A,{searchTerm:n,selectedRadio:a,onSearch:i,onRadioClick:this.switchTab}),d.default.createElement(I,{collection:t,searchTerm:n,selectedRadio:a,onTableHeaderClick:l,sortByHeader:o,headerIsAscending:r})))}}]),t}(d.default.Component),A=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.checked=function(e){return a.props.selectedRadio===e},a.onRadioClick=function(e){var t=e.target.value;a.props.onRadioClick(t)},a.createFilterTabs=function(){return a.props.radioNames.map(function(e,t){var n=a.checked(e);return d.default.createElement(S,{key:t,selected:n,text:e,onChange:a.onRadioClick})})},a.searchTermChange=function(e){var t=e.target.value;a.props.onSearch(t)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.createFilterTabs();return d.default.createElement(D,null,e,d.default.createElement("li",{className:"component-tab-list-element"},d.default.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}]),t}(d.default.Component);A.defaultProps={radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]};var I=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.collection,t=this.props.selectedRadio,n=this.props.searchTerm,a=this.props.sortByHeader,o=this.props.onTableHeaderClick,r=this.props.headerIsAscending;return d.default.createElement("div",{id:"dashboard-lower-content"},d.default.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},d.default.createElement(R,{onTableHeaderClick:o,sortByHeader:a,headerIsAscending:r}),d.default.createElement(L,{collection:e,selectedRadio:t,searchTerm:n})))}}]),t}(d.default.Component),R=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createTableHeadingFields=function(){var e=a.props.onTableHeaderClick,t=a.props.sortByHeader,n=a.props.headerIsAscending;return a.props.headerNames.map(function(a){return d.default.createElement(P,{headerName:a[0],displayName:a[1],key:a[0],onTableHeaderClick:e,sortByHeader:t,headerIsAscending:n})})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("thead",null,d.default.createElement("tr",null,this.createTableHeadingFields()))}}]),t}(d.default.Component);R.defaultProps={headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]};var P=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.arrow=function(){var e=a.props.sortByHeader,t=a.props.headerName,n=a.props.headerIsAscending,o=n?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return d.default.createElement("i",{className:o})},a.onTableHeaderClick=function(e){var t=e.target.value;a.props.onTableHeaderClick(t)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.arrow(),t="header-field "+this.props.headerName;return d.default.createElement("td",{className:t+" tableheader",value:this.props.headerName},d.default.createElement("input",{type:"radio",name:"header-field",id:this.props.headerName,value:this.props.headerName,className:"header-field radio",onChange:this.onTableHeaderClick}),d.default.createElement("label",{className:"header-field label-text active-tasks-header noselect",htmlFor:this.props.headerName},this.props.displayName," ",e))}}]),t}(d.default.Component),L=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{filteredTable:C.getFilteredTable(a.props.collection)}},a.createRows=function(){var e=""===a.props.searchTerm.trim();return 0===a.state.filteredTable.length?e?a.noActiveTasks():a.noActiveTasksMatchFilter():_.map(a.state.filteredTable,function(e,t){return d.default.createElement(k,{key:t,item:e})})},a.noActiveTasks=function(){var e=a.props.selectedRadio;return"All Tasks"===e&&(e=""),d.default.createElement("tr",{className:"no-matching-database-on-search"},d.default.createElement("td",{colSpan:"6"},"No active ",e," tasks."))},a.noActiveTasksMatchFilter=function(){var e=a.props.selectedRadio;return"All Tasks"===e&&(e=""),d.default.createElement("tr",{className:"no-matching-database-on-search"},d.default.createElement("td",{colSpan:"6"},"No active ",e,' tasks match with filter: "',a.props.searchTerm,'"'))},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.setState({filteredTable:C.getFilteredTable(this.props.collection)})}},{key:"render",value:function(){return d.default.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}]),t}(d.default.Component),k=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getInfo=function(e){return{type:e.type,objectField:x.getDatabaseFieldMessage(e),started_on:x.getTimeInfo(e.started_on),updated_on:x.getTimeInfo(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:x.getProgressMessage(e)}},a.multilineMessage=function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map(function(e,t){return d.default.createElement("p",{key:t,className:n},e)})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),a=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return d.default.createElement("tr",null,d.default.createElement("td",null,e.type),d.default.createElement("td",null,t),d.default.createElement("td",null,n),d.default.createElement("td",null,a),d.default.createElement("td",null,e.pid),d.default.createElement("td",null,o))}}]),t}(d.default.Component),M=t.ActiveTasksPollingWidgetController=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{collection:C.getBackboneCollection()}},a.onChange=function(){a.setState(a.getStoreState())},a.runPollingUpdate=function(){E.default.runPollingUpdate(a.state.collection)},a.getPluralForLabel=function(){return"1"===a.state.pollingInterval?"":"s"},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){C.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){C.off("change",this.onChange,this)}},{key:"render",value:function(){var e="active-tasks__polling-wrapper";return N.default.isIE1X()&&(e+=" "+e+"--ie1X"),d.default.createElement("div",{className:e},d.default.createElement(T,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}]),t}(d.default.Component),x={getTimeInfo:function(e){return[u.default.helpers.formatDate(e),u.default.helpers.getDateFromNow(e)]},getDatabaseFieldMessage:function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},getProgressMessage:function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},getSourceSequence:function(e){return e.source_seq}};t.default={ActiveTasksController:w,ActiveTasksFilterTabs:A,ActiveTaskTable:I,ActiveTasksTableHeader:R,TableHeader:P,ActiveTasksTableBody:L,ActiveTaskTableBodyContents:k,ActiveTasksPollingWidgetController:M}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTasksLayout=void 0;var o=n(0),r=a(o),i=n(18),l=a(i),s=n(2),u=a(s),c=n(39),d=n(487),f=[{name:"Active Tasks"}],p=t.ActiveTasksLayout=function(){return r.default.createElement(c.OnePane,null,r.default.createElement(c.OnePaneHeader,{crumbs:f,docURL:u.default.constants.DOC_URLS.ACTIVE_TASKS,endpoint:l.default.getApiUrl("/_active_tasks")},r.default.createElement(d.ActiveTasksPollingWidgetController,null)),r.default.createElement(c.OnePaneContent,null,r.default.createElement(d.ActiveTasksController,null)))};t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(267),u=a(s),c=n(488),d=a(c),f=l.default.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return r.default.createElement(d.default,null)}});u.default.RouteObjects=[f],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(266),l=a(i),s=r.default.Store.extend({initialize:function(){this._prevSortbyHeader="started-on",this._headerIsAscending=!0,this._selectedRadio="All Tasks",this._sortByHeader="started-on",this._searchTerm="",this._pollingIntervalSeconds=5},initAfterFetching:function(e,t){this._collection=e,this.sortCollectionByColumnHeader(this._sortByHeader),this._backboneCollection=t,this.setIsLoading(!0,new Date)},isLoading:function(){return this._isLoading},setIsLoading:function(e,t){e?(this._startTimeForLoading=t,this._isLoading=!0):t-this._startTimeForLoading<800?setTimeout(function(){this._isLoading=!1,this.triggerChange()}.bind(this),800):this._isLoading=!1},getSelectedRadio:function(){return this._selectedRadio},setSelectedRadio:function(e){this._selectedRadio=e},setCollectionFromPolling:function(e){this.setCollection(e),this.sortCollectionByColumnHeader(this._prevSortbyHeader,!1)},setCollection:function(e){this._collection=e},getCollection:function(){return this._collection},getBackboneCollection:function(){return this._backboneCollection},setSearchTerm:function(e){this._searchTerm=e},getSearchTerm:function(){return this._searchTerm},getSortByHeader:function(){return this._sortByHeader},setSortByHeader:function(e){this._sortByHeader=e},getHeaderIsAscending:function(){return this._headerIsAscending},toggleHeaderIsAscending:function(){if(this._prevSortbyHeader===this._sortByHeader)return void(this._headerIsAscending=!this._headerIsAscending);this._headerIsAscending=!0},sortCollectionByColumnHeader:function(e){var t=this._collection,n=_.sortBy(t,function(t){var n=e;return _.isUndefined(t[n])&&(n="source"),t[n]});this._prevSortbyHeader=e,this._collection=n},getFilteredTable:function(){var e=[];return this.sortCollectionByColumnHeader(this._sortByHeader),this._collection.map(function(t){var n=this.passesRadioFilter(t),a=this.passesSearchFilter(t);n&&a&&e.push(t)}.bind(this)),this._headerIsAscending||e.reverse(),e},passesSearchFilter:function(e){var t=this._searchTerm,n=new RegExp(t,"g"),a="";return _.has(e,"database")&&(a+=e.database),_.has(e,"source")&&(a+=e.source),_.has(e,"target")&&(a+=e.target),n.test(a)},passesRadioFilter:function(e){var t=this._selectedRadio.toLowerCase().replace(" ","_");return e.type===t||"all_tasks"===t},dispatch:function(e){switch(e.type){case l.default.ACTIVE_TASKS_FETCH_AND_SET:this.initAfterFetching(e.options.collectionTable,e.options.backboneCollection);break;case l.default.ACTIVE_TASKS_SWITCH_TAB:this.setSelectedRadio(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_COLLECTION:this.setCollection(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_SEARCH_TERM:this.setSearchTerm(e.options),this.triggerChange();break;case l.default.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:this.toggleHeaderIsAscending(),this.setSortByHeader(e.options.columnName),this.sortCollectionByColumnHeader(e.options.columnName),this.triggerChange();break;case l.default.ACTIVE_TASKS_SET_IS_LOADING:this.setIsLoading(e.options,new Date),this.triggerChange();break;case l.default.ACTIVE_TASKS_POLLING_COLLECTION:this.setCollectionFromPolling(e.options),this.triggerChange();break;default:return}}}),u=new s;u.dispatchToken=r.default.dispatcher.register(u.dispatch.bind(u)),t.default={activeTasksStore:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AUTH_CREDS_VALID:"AUTH_CREDS_VALID",AUTH_CREDS_INVALID:"AUTH_CREDS_INVALID",AUTH_SHOW_PASSWORD_MODAL:"AUTH_SHOW_PASSWORD_MODAL",AUTH_HIDE_PASSWORD_MODAL:"AUTH_HIDE_PASSWORD_MODAL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(498),l=a(i);n(782);var s=n(500),u=a(s),c=function(){r.default.removeHeaderLink({id:"auth",bottomNav:!0})};r.default.setSession(new u.default({allowAdminParty:!0})),t.default={initialize:function(){r.default.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),r.default.session.onChange(function(){var e=r.default.session,t=void 0;e.isAdminParty()?(t={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},c(),r.default.addHeaderLink(t),r.default.hideLogin()):e.isLoggedIn()?(t={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},c(),r.default.addHeaderLink(t),r.default.showLogout()):(c(),r.default.showLogin())})},RouteObjects:l.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePasswordForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(2)),f=a(d),p=n(93),h=n(23),m=t.ChangePasswordForm=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={password:"",passwordConfirm:""},n}return i(t,e),l(t,[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"faux__auth-page"},u.default.createElement("h3",null,"Change Password"),u.default.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},u.default.createElement("p",null,"Enter your new password."),u.default.createElement("input",{id:"password",type:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),u.default.createElement("br",null),u.default.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),u.default.createElement("br",null),u.default.createElement("p",null,u.default.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}]),t}(u.default.Component);t.default=(0,h.connect)(function(){return{username:f.default.session.user().name}},{changePassword:p.changePassword})(m)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAdminForm=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(93)),h=n(23),m=t.CreateAdminForm=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={username:"",password:""},n}return i(t,e),l(t,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"faux__auth-page"},d.default.createElement("h3",null,"Create Admins"),d.default.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",d.default.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),d.default.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),d.default.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},d.default.createElement("input",{id:"username",type:"text",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),d.default.createElement("br",null),d.default.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),d.default.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),d.default.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}]),t}(d.default.Component);m.propTypes={loginAfter:u.default.bool.isRequired},m.defaultProps={loginAfter:!1},t.default=(0,h.connect)(null,{createAdmin:p.createAdmin})(m)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(93)),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={username:"",password:""},e}return i(t,e),l(t,[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){(0,p.login)(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"couch-login-wrapper"},d.default.createElement("div",{className:"row-fluid"},d.default.createElement("div",{className:"span12"},d.default.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},d.default.createElement("p",{className:"help-block"},"Enter your username and password."),d.default.createElement("input",{id:"username",type:"text",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",size:"24",onChange:this.onUsernameChange.bind(this),value:this.state.username}),d.default.createElement("br",null),d.default.createElement("input",{id:"password",type:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",size:"24",onChange:this.onPasswordChange.bind(this),value:this.state.password}),d.default.createElement("br",null),d.default.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}]),t}(d.default.Component);h.defaultProps={urlBack:""},h.propTypes={urlBack:u.default.string.isRequired},t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(20),p=n(93),h=n(14),m=a(h),_=n(2),g=a(_),b=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={password:""},n.authenticate=n.authenticate.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return i(t,e),l(t,[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=g.default.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onClose,o=t.submitBtnLabel,r=t.headerTitle,i=t.modalMessage;return this.props.visible?d.default.createElement(f.Modal,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return a()}},d.default.createElement(f.Modal.Header,{closeButton:!0},d.default.createElement(f.Modal.Title,null,r)),d.default.createElement(f.Modal.Body,null,i,d.default.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),d.default.createElement(f.Modal.Footer,null,d.default.createElement("a",{className:"cancel-link",onClick:function(){return a()}},"Cancel"),d.default.createElement(m.default.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}]),t}(d.default.Component);b.propTypes={visible:u.default.bool.isRequired,modalMessage:u.default.oneOfType([u.default.string,u.default.element]),onSubmit:u.default.func.isRequired,onClose:u.default.func.isRequired,submitBtnLabel:u.default.string},b.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:p.hidePasswordModal,onSubmit:p.authenticate,onSuccess:function(){},submitBtnLabel:"Continue"},t.default=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(94),u=a(s),c=n(269),d=n(11),f=a(d),p=n(268),h=a(p),m=n(93),_=h.default.LoginForm,g=h.default.CreateAdminForm,b=[{name:"Log In to CouchDB"}];t.default=l.default.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){u.default.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return r.default.createElement(c.AuthLayout,{crumbs:b,component:r.default.createElement(_,{urlBack:f.default.getParams().urlback})})},logout:function(){(0,m.logout)()},createAdminForNode:function(){u.default.fetchNodes();var e=[{name:"Create Admin"}];return r.default.createElement(c.AuthLayout,{crumbs:e,component:r.default.createElement(g,{loginAfter:!0})})}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(497),r=a(o),i=n(499),l=a(i);t.default=[r.default,l.default]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(94),u=a(s),c=n(269);t.default=l.default.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){u.default.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){u.default.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return u.default.fetchNodes(),r.default.createElement(c.AdminLayout,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return u.default.fetchNodes(),r.default.createElement(c.AdminLayout,{crumbs:[{name:"User Management"}],changePassword:!1})}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.includes)(e,"_admin")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(19),s=n(167),u=a(s),c=n(179),d=a(c),f=function(){function e(t){var n=this;o(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new d.default(function(e,t){n._authenticateResolve=e,n._authenticateReject=t}),this._allowAdminParty=t.allowAdminParty}return i(e,[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:r(e.roles)},(0,l.each)(this._onChange,function(e){return e(t._user)})),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return u.default.getSession().then(function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())}).catch(function(t){e._authenticateReject(t)})}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=(0,l.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length||_.intersection(this.userRoles(),e).length>0}}]),e}();t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(503),r=a(o);r.default.initialize=function(){},t.default=r.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(271),d=a(c),f=d.default.nodesStore,p=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{nodes:f.getNodes()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){f.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){f.off("change",this.onChange)}},{key:"render",value:function(){return u.default.createElement("div",{className:"config-warning-cluster-wrapper"},u.default.createElement("div",{className:"config-warning-cluster-container"},u.default.createElement("div",null,u.default.createElement("div",{className:"config-warning-icon-container pull-left"},u.default.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.state.nodes.length," nodes. For CouchDB 2.0 we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",u.default.createElement("br",null),u.default.createElement("br",null),u.default.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}]),t}(u.default.Component),h={DisabledConfigController:p};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(272),u=a(s),c=n(502),d=a(c),f=n(94),p=a(f),h=n(39),m=l.default.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},apiUrl:function(){return[this.memberships.url("apiurl"),this.memberships.documentation]},showDisabledFeatureScreen:function(){var e=new u.default.ClusterNodes;return p.default.fetchNodes(),r.default.createElement(h.OnePaneSimpleLayout,{component:r.default.createElement(d.default.DisabledConfigController,null),endpoint:e.url("apiurl"),docURL:e.documentation,crumbs:[{name:"Config disabled"}]})}});u.default.RouteObjects=[m],t.default=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(783),t.default={initialize:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Badge=t.BadgeList=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),t.BadgeList=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getBadges=function(){return a.props.elements.map(function(e,t){return d.default.createElement(h,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(a))},a.removeBadge=function(e,t){a.props.removeBadge(e,t)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),t}(d.default.Component));p.propTypes={elements:u.default.array.isRequired,removeBadge:u.default.func.isRequired},p.defaultProps={getLabel:function(e){return e},getId:function(e){return e}};var h=t.Badge=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.remove=function(e){e.preventDefault(),a.props.remove(a.props.label,a.props.id)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("li",{className:"component-badge"},d.default.createElement("span",{className:"label label-info"},this.props.label),d.default.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"×"))}}]),t}(d.default.Component);h.propTypes={label:u.default.string.isRequired,remove:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BulkActionComponent=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(20)),h=t.BulkActionComponent=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getMultiSelectOptions=function(){return a.props.hasSelectedItem?d.default.createElement("button",{onClick:a.props.removeItem,className:"fonticon "+a.props.bulkIcon,title:a.props.buttonTitle}):null},a.getPopupContent=function(){return d.default.createElement("ul",{className:"bulk-action-component-popover-actions"},d.default.createElement("li",{onClick:a.selectAll},d.default.createElement("i",{className:"icon fonticon-cancel"})," ",a.props.dropdownContentText))},a.selectAll=function(){a.bulkActionPopover.hide(),a.props.selectAll()},a.getOverlay=function(){return d.default.createElement(p.OverlayTrigger,{ref:function(e){return a.bulkActionPopover=e},trigger:"click",placement:"bottom",rootClose:!0,overlay:d.default.createElement(p.Popover,{id:"bulk-action-component-popover",title:a.props.title},a.getPopupContent())},d.default.createElement("div",{className:"arrow-button"},d.default.createElement("i",{className:"fonticon fonticon-play"})))},a.getMasterSelector=function(){return d.default.createElement("div",{className:"bulk-action-component-panel"},d.default.createElement("input",{type:"checkbox",checked:a.props.isChecked,onChange:a.props.toggleSelect,disabled:a.props.disabled}),a.props.enableOverlay?d.default.createElement("div",{className:"separator"}):null,a.props.enableOverlay?a.getOverlay():null)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"bulk-action-component"},d.default.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}]),t}(d.default.Component);h.propTypes={hasSelectedItem:u.default.bool.isRequired,removeItem:u.default.func.isRequired,selectAll:u.default.func,toggleSelect:u.default.func.isRequired,isChecked:u.default.bool.isRequired,disabled:u.default.bool},h.defaultProps={disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditorPanel=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(168)),f=n(275),p=n(277),h=["Missing name in function declaration.","['{a}'] is better written in dot notation."];(t.CodeEditorPanel=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{zenModeEnabled:!1,code:a.props.defaultCode}},a.getZenModeIcon=function(){if(a.props.allowZenMode)return u.default.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:a.enterZenMode})},a.getDocIcon=function(){if(a.props.docLink)return u.default.createElement("a",{className:"help-link","data-bypass":"true",href:a.props.docLink,target:"_blank",rel:"noopener noreferrer"},u.default.createElement("i",{className:"icon-question-sign"}))},a.getZenModeOverlay=function(){if(a.state.zenModeEnabled)return u.default.createElement(p.ZenModeOverlay,{defaultCode:a.state.code,mode:a.props.mode,ignorableErrors:h,onExit:a.exitZenMode})},a.enterZenMode=function(){a.setState({zenModeEnabled:!0,code:a.codeEditor.getValue()})},a.exitZenMode=function(e){a.setState({zenModeEnabled:!1}),a.getEditor().setValue(e)},a.getEditor=function(){return a.codeEditor},a.getValue=function(){return a.getEditor().getValue()},a.beautify=function(e){a.setState({code:e}),a.getEditor().setValue(e)},a.update=function(){a.getEditor().setValue(a.state.code)},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),u.default.createElement("div",{className:t},u.default.createElement("label",null,u.default.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),u.default.createElement(d.CodeEditor,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:h,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),u.default.createElement(f.Beautify,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}]),t}(u.default.Component)).defaultProps={id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmButton=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),t.ConfirmButton=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getIcon=function(){return a.props.showIcon?d.default.createElement("i",{className:"icon "+a.props.customIcon}):null},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,a=e.id,o=e.style,r=e.text,i=e.disabled;return d.default.createElement("button",{onClick:t,type:"submit",disabled:i,"data-id":this.props["data-id"],className:"btn save "+n,id:a,style:o},this.getIcon(),r)}}]),t}(d.default.Component));p.propTypes={showIcon:u.default.bool,id:u.default.string,customIcon:u.default.string,style:u.default.object,buttonType:u.default.string,"data-id":u.default.string,onClick:u.default.func,disabled:u.default.bool},p.defaultProps={disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Copy=t.destroyClipboard=t.initializeClipboard=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(655)),h=a(p),m=void 0,_=t.initializeClipboard=function(e,t){m=new h.default("#copy-"+e),m.on("success",function(){t()})},g=t.destroyClipboard=function(){m.destroy()},b=t.Copy=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){_(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){g()}},{key:"componentDidUpdate",value:function(){_(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?d.default.createElement("i",{className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return d.default.createElement("button",{className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?d.default.createElement("p",null,d.default.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}]),t}(d.default.Component);b.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},b.propTypes={text:u.default.string.isRequired,displayType:u.default.oneOf(["icon","text","input"]),uniqueKey:u.default.string.isRequired,onClipboardClick:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDatabaseModal=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(20)),h=n(95),m=a(h);(t.DeleteDatabaseModal=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={inputValue:"",disableSubmit:!0},a.close=function(e){e&&e.preventDefault(),a.setState({inputValue:"",disableSubmit:!0}),a.props.showHide({showModal:!1})},a.open=function(){a.props.showHide({showModal:!0})},a.getDatabaseName=function(){return a.props.modalProps.dbId.trim()},a.onInputChange=function(e){var t=e.target.value.trim();a.setState({inputValue:t}),a.setState({disableSubmit:t!==a.getDatabaseName()})},a.onDeleteClick=function(e){e.preventDefault(),m.default.deleteDatabase(a.getDatabaseName())},a.onInputKeypress=function(e){13===e.keyCode&&!0!==a.state.disableSubmit&&m.default.deleteDatabase(a.getDatabaseName())},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,a=e?d.default.createElement("p",{style:{color:"#d14"},className:"warning"},d.default.createElement("b",null,"You are about to delete a system database, be careful!")):null;return d.default.createElement(p.Modal,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},d.default.createElement(p.Modal.Header,{closeButton:!0},d.default.createElement(p.Modal.Title,null,"Confirm Deletion")),d.default.createElement(p.Modal.Body,null,a,d.default.createElement("p",null,"Warning: This action will permanently delete ",d.default.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),d.default.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),d.default.createElement(p.Modal.Footer,null,d.default.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),d.default.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},d.default.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}]),t}(d.default.Component)).propTypes={showHide:u.default.func.isRequired,modalProps:u.default.object}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Document=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(2)),h=a(p),m=n(52),g=a(m),b=t.Document=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onChange=function(e){e.preventDefault(),a.props.docChecked(a.props.doc.id,a.props.doc._rev)},a.getUrlFragment=function(){return a.props.children?d.default.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},a.props.children):""},a.getExtensionIcons=function(){var e=h.default.getExtensions("DocList:icons");return _.map(e,function(e,t){return d.default.createElement(e,{doc:this.props.doc,key:t})},a)},a.getCheckbox=function(){return a.props.isDeletable?d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{id:"checkbox-"+a.props.docIdentifier,checked:a.props.checked,"data-checked":a.props.checked,type:"checkbox",onChange:a.onChange,className:"js-row-select"}),d.default.createElement("label",{onClick:a.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+a.props.docIdentifier})):d.default.createElement("div",{className:"checkbox-dummy"})},a.onClick=function(e){a.props.onClick(a.props.docIdentifier,a.props.doc,e)},a.getDocContent=function(){if(_.isEmpty(a.props.docContent))return null;var e=a.props.docContent,t=!1;if(a.props.truncate){var n=g.default.truncateDoc(a.props.docContent,a.props.maxRows);t=n.isTruncated,e=n.content}return d.default.createElement("div",{className:"doc-data"},d.default.createElement("pre",{className:"prettyprint"},e),t?d.default.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},d.default.createElement("div",{className:"custom-inputs"},this.getCheckbox()),d.default.createElement("div",{className:"doc-item",onClick:this.onClick},d.default.createElement("header",null,d.default.createElement("span",{className:"header-keylabel"},this.props.keylabel),d.default.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),d.default.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),d.default.createElement("div",{className:"clearfix"}))}}]),t}(d.default.Component);b.propTypes={docIdentifier:u.default.string.isRequired,docChecked:u.default.func.isRequired,truncate:u.default.bool,maxRows:u.default.number},b.defaultProps={truncate:!0,maxRows:500}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomMenu=t.MenuDropDown=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(20)),f=n(236),p=a(f);(t.MenuDropDown=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createSectionLinks=function(e){return e?e.map(function(e,t){return a.createEntry(e,t)}):null},a.createEntry=function(e,t){return u.default.createElement("li",{key:t},u.default.createElement("a",{className:e.icon?"icon "+e.icon:"","data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,target:e.external?"_blank":""},e.title))},a.createSectionTitle=function(e,t){return e?u.default.createElement("li",{key:t,className:"header-label"},e):null},a.createSection=function(){return a.props.links.map(function(e,t){return e.title&&e.links?[a.createSectionTitle(e.title,"title_"+t),a.createSectionLinks(e.links)]:a.createEntry(e,"el"+t)})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.createSection();return u.default.createElement(d.Dropdown,{id:"dropdown-menu"},u.default.createElement(h,{bsRole:"toggle",icon:this.props.icon}),u.default.createElement(m,{bsRole:"menu",className:"arrow"},e))}}]),t}(u.default.Component)).defaultProps={icon:"fonticon-plus-circled"};var h=function(e){function t(e,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.handleClick=a.handleClick.bind(a),a}return i(t,e),l(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return u.default.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),t}(u.default.Component),m=t.CustomMenu=function(e){function t(e,n){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,a=e.onClose;return u.default.createElement(p.default,{disabled:!n,onRootClose:a},u.default.createElement("ul",{className:"dropdown-menu arrow",role:"menu","aria-labelledby":"dLabel"},t))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PaddedBorderedBox=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s);a(n(10)),t.PaddedBorderedBox=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"bordered-box"},u.default.createElement("div",{className:"padded-box"},this.props.children))}}]),t}(u.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshBtn=t.Polling=t.resetPollCounter=t.clearPollCounter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(964)),h=a(p),m=void 0,_=t.clearPollCounter=function(){m&&window.clearInterval(m)},g=t.resetPollCounter=function(e,t){_(),m=window.setInterval(t,e)},b=function(e,t,n,a){var o=parseInt(e,10);if(0===o||o>n||o<a)return"off";if(o<60&&"minute"===t)return o+" seconds";var r=o;return"minute"===t&&(r=Math.floor(o/60)),r+" "+(1===r?t:t+"s")},E=t.Polling=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.props.startValue},n.updatePollingFreq=n.updatePollingFreq.bind(n),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){_()}},{key:"setPollingCounter",value:function(e){var t=this.props,n=t.min,a=t.max,o=t.onPoll;if(this.setState({value:e}),0===e||e<n||e>a)return void _();g(1e3*e,function(){return o()})}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e.target.value,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,a=e.max,o=e.valueUnits,r=this.state.value,i=b(r,o,a,n),l="off"===i?"faux__polling-info-value--off":"faux__polling-info-value--active";return d.default.createElement("div",{className:"faux__polling"},d.default.createElement("div",{className:"faux__polling-info"},d.default.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),d.default.createElement("span",{className:"faux__polling-info-value faux__polling-info-value "+l},i)),d.default.createElement(h.default,{onChange:this.updatePollingFreq,className:"faux__polling-info-slider",type:"range",value:r,min:n,max:a+t,step:t}))}}]),t}(d.default.Component);E.defaultProps={startValue:0,min:0,valueUnits:"minute"},E.propTypes={startValue:u.default.number,valueUnits:u.default.string,min:u.default.number,max:u.default.number.isRequired,stepSize:u.default.number.isRequired,onPoll:u.default.func.isRequired},(t.RefreshBtn=function(e){var t=e.refresh;return d.default.createElement("div",{className:"faux__refresh-btn"},d.default.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},d.default.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))}).propTypes={refresh:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StyledSelect=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c);a(n(10)),(t.StyledSelect=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"styled-select"},d.default.createElement("label",{htmlFor:this.props.selectId},d.default.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),d.default.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),d.default.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}]),t}(d.default.Component)).propTypes={selectValue:u.default.string.isRequired,selectId:u.default.string.isRequired,selectChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TabWindowWrapper=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(126);(t.TabWindowWrapper=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,a=n.map(function(e,n){return p.default.createElement(h.TabElement,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){u.default.navigate(e.route,{redirect:!0})},iconClass:""})}),o=n.reduce(function(e,n){return n.name===t?n:e},{});return o.component?p.default.createElement("div",{className:"tab__wrapper"},p.default.createElement(h.TabElementWrapper,null,a),p.default.createElement("div",{className:"tab__container"},p.default.createElement(o.component,null))):null}}]),t}(p.default.Component)).propTypes={tabs:d.default.array.isRequired,selectedTab:d.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottledReactSelectAsync=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(10),f=(a(d),n(77)),p=a(f);t.ThrottledReactSelectAsync=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.lastCall=void 0;var a=e.loadOptions;return n.throttledLoadOptions=n.wrapThrottler(a).bind(n),n}return i(t,e),s(t,[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,a){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout(function(){e(n,a)},400)}:function(){}}},{key:"render",value:function(){var e=l({},this.props,{loadOptions:this.throttledLoadOptions});return c.default.createElement(p.default.Async,e)}}]),t}(c.default.Component)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleHeaderButton=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s);a(n(10)),(t.ToggleHeaderButton=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,a=e.innerClasses,o=e.selected,r=e.containerClasses,i=e.title,l=e.disabled,s=e.text,c=e.toggleCallback,d=e.active,f=o||d?"js-headerbar-togglebutton-selected":"";return u.default.createElement("button",{title:i,disabled:l,onClick:c,className:"button "+r+" "+f},u.default.createElement("i",{className:t+" "+n+" "+a}),u.default.createElement("span",null,s))}}]),t}(u.default.Component)).defaultProps={innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TrayWrapper=t.connectToStores=t.TrayContents=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(10),h=(a(p),n(20)),m=n(231),_=t.TrayContents=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getChildren=function(e){var t=e[0].style,a="tray show-tray "+n.props.className;return f.default.createElement("div",{key:"1",id:n.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:a},n.props.children)},n.willEnter=function(){return{opacity:(0,m.spring)(1),top:(0,m.spring)(55)}},n.willLeave=function(){return{opacity:(0,m.spring)(0),top:(0,m.spring)(30)}},n.getDefaultStyles=function(){return[{key:"1",style:{opacity:0,top:30}}]},n.getStyles=function(e){return e?e.map(function(e){return{key:"1",style:e.style}}):[{key:"1",style:n.willEnter()}]},e.container||(n.container=n),n}return i(t,e),s(t,[{key:"render",value:function(){return f.default.createElement(h.Overlay,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},f.default.createElement(m.TransitionMotion,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),t}(f.default.Component);_.propTypes={contentVisible:c.default.bool.isRequired,closeTray:c.default.func.isRequired,onEnter:c.default.func,container:c.default.object},_.defaultProps={onEnter:function(){}},t.connectToStores=function(e,t,n){return function(a){function u(){var e,t,a,i;o(this,u);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return t=a=r(this,(e=u.__proto__||Object.getPrototypeOf(u)).call.apply(e,[this].concat(s))),a.state=n(a.props),a.onChange=function(){a.setState(n(a.props))},a.handleStoresChanged=function(){a.setState(n(a.props))},i=t,r(a,i)}return i(u,a),s(u,[{key:"componentDidMount",value:function(){var e=this;t.forEach(function(t){t.on("change",e.onChange,e)})}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return f.default.createElement(e,l({},this.state,this.props))}}]),u}(f.default.Component)},(t.TrayWrapper=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.renderChildren=function(){return f.default.Children.map(a.props.children,function(e){var t={};return Object.keys(a.props).filter(function(e){return a.props.hasOwnProperty(e)}).map(function(e){return t[e]=a.props[e]}),f.default.cloneElement(e,t)})},i=n,r(a,i)}return i(t,e),s(t,[{key:"render",value:function(){return f.default.createElement("div",null,this.renderChildren())}}]),t}(f.default.Component)).defaultProps={className:""}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(523),l=a(i);n(784),l.default.initialize=function(){r.default.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(524)),h=a(p),m=n(279),g=a(m),b=n(20),E=n(14),v=a(E),y=n(80),O=a(y),N=h.default.configStore,S=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{options:N.getOptions(),loading:N.isLoading()}},a.onChange=function(){a.setState(a.getStoreState())},a.saveOption=function(e){g.default.saveOption(a.props.node,e)},a.deleteOption=function(e){g.default.deleteOption(a.props.node,e)},a.editOption=function(e){g.default.editOption(e)},a.cancelEdit=function(){g.default.cancelEdit()},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){N.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){N.off("change",this.onChange)}},{key:"render",value:function(){return this.state.loading?d.default.createElement("div",{className:"view"},d.default.createElement(v.default.LoadLines,null)):d.default.createElement(D,{onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.state.options})}}]),t}(d.default.Component),D=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createOptions=function(){return _.map(a.props.options,function(e){return d.default.createElement(T,{option:e,onDelete:a.props.onDeleteOption,onSave:a.props.onSaveOption,onEdit:a.props.onEditOption,onCancelEdit:a.props.onCancelEdit,key:e.sectionName+"/"+e.optionName})})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.createOptions();return d.default.createElement("table",{className:"config table table-striped table-bordered"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",{id:"config-section",width:"22%"},"Section"),d.default.createElement("th",{id:"config-option",width:"22%"},"Option"),d.default.createElement("th",{id:"config-value"},"Value"),d.default.createElement("th",{id:"config-trash"}))),d.default.createElement("tbody",null,e))}}]),t}(d.default.Component),T=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.onSave=function(e){var t=a.props.option;t.value=e,a.props.onSave(t)},a.onDelete=function(){a.props.onDelete(a.props.option)},a.onEdit=function(){a.props.onEdit(a.props.option)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("tr",{className:"config-item"},d.default.createElement("th",null,this.props.option.header&&this.props.option.sectionName),d.default.createElement("td",null,this.props.option.optionName),d.default.createElement(C,{value:this.props.option.value,editing:this.props.option.editing,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),d.default.createElement(w,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}]),t}(d.default.Component),C=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={value:a.props.value,editing:a.props.editing,saving:a.props.saving},a.onChange=function(e){a.setState({value:e.target.value})},a.onSave=function(){a.state.value!==a.props.value?(a.setState({saving:!0}),a.props.onSave(a.state.value)):a.props.onCancelEdit()},a.getButtons=function(){return a.state.saving?null:d.default.createElement("span",null,d.default.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:a.onSave.bind(a)}),d.default.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:a.props.onCancelEdit}))},i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.setState({saving:!1})}},{key:"render",value:function(){return this.props.editing?d.default.createElement("td",null,d.default.createElement("div",{className:"config-value-form"},d.default.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.state.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):d.default.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}]),t}(d.default.Component);C.defaultProps={value:"",editing:!1,saving:!1,onSave:function(){return null},onEdit:function(){return null},onCancelEdit:function(){return null}};var w=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDelete=function(){n.props.onDelete()},n.showModal=function(){n.setState({show:!0})},n.hideModal=function(){n.setState({show:!1})},n.onDelete=n.onDelete.bind(n),n.showModal=n.showModal.bind(n),n.hideModal=n.hideModal.bind(n),n.state={show:!1},n}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("td",{className:"text-center config-item-trash config-delete-value"},d.default.createElement("i",{className:"icon icon-trash",onClick:this.showModal}),d.default.createElement(O.default.ConfirmationModal,{text:"Are you sure you want to delete "+this.props.sectionName+"/"+this.props.optionName+"?",onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}))}}]),t}(d.default.Component),A=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.addOption=function(e){g.default.addOption(a.props.node,e)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement(I,{onAdd:this.addOption})}}]),t}(d.default.Component),I=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getInitialState(),n}return i(t,e),l(t,[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return d.default.createElement(b.Popover,{className:"tray",id:"add-option-popover",title:"Add Option"},d.default.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),d.default.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),d.default.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),d.default.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{id:"add-option-panel"},d.default.createElement(b.Button,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},d.default.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),d.default.createElement(b.Overlay,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return e.target}},this.getPopover()))}}]),t}(d.default.Component),R=function(e){var t=e.active,n=e.link,a=e.title;return d.default.createElement("li",{className:t?"active":""},d.default.createElement("a",{href:"#"+n},a))};R.propTypes={active:u.default.bool.isRequired,link:u.default.string.isRequired,icon:u.default.string,title:u.default.string.isRequired};var P=function(e){var t=e.sidebarItems,n=e.selectedTab,a=t.map(function(e){return d.default.createElement(R,{key:e.title,active:n===e.title,title:e.title,link:e.link})});return d.default.createElement("nav",{className:"sidenav"},d.default.createElement("ul",{className:"nav nav-list"},a))};t.default={Tabs:P,ConfigTableController:S,ConfigTable:D,ConfigOption:T,ConfigOptionValue:C,ConfigOptionTrash:w,AddOptionController:A,AddOptionButton:I}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigLayout=t.ConfigHeader=void 0;var o=n(0),r=a(o),i=n(521),l=a(i),s=n(528),u=a(s),c=n(127),d=n(102),f=n(39),p=t.ConfigHeader=function(e){var t=e.node,n=e.crumbs,a=e.docURL,o=e.endpoint;return r.default.createElement("header",{className:"two-panel-header"},r.default.createElement("div",{className:"flex-layout flex-row"},r.default.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},r.default.createElement(c.Breadcrumbs,{crumbs:n})),r.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},r.default.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),r.default.createElement("div",{id:"right-header",className:"flex-fill"},r.default.createElement(l.default.AddOptionController,{node:t})),r.default.createElement(f.ApiBarWrapper,{docURL:a,endpoint:o}),r.default.createElement("div",{id:"notification-center-btn",className:"flex-fill"},r.default.createElement(d.NotificationCenterButton,null)))))},h=t.ConfigLayout=function(e){var t=e.showCors,n=e.docURL,a=e.node,o=e.endpoint,i=e.crumbs,s=[{title:"Main config",link:"_config/"+a},{title:"CORS",link:"_config/"+a+"/cors"}],c=t?"CORS":"Main config",d=t?r.default.createElement(u.default.CORSContainer,{node:a,url:o}):r.default.createElement(l.default.ConfigTableController,{node:a});return r.default.createElement("div",{id:"dashboard",className:"with-sidebar"},r.default.createElement(p,{docURL:n,endpoint:o,node:a,crumbs:i}),r.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},r.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},r.default.createElement(l.default.Tabs,{sidebarItems:s,selectedTab:c})),r.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},r.default.createElement("div",{id:"dashboard-upper-content"}),r.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},d),r.default.createElement("div",{id:"footer"}))))};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(281),u=a(s),c=n(94),d=a(c),f=n(279),p=a(f),h=n(522),m=a(h),_=l.default.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){d.default.navigateToNodeBasedOnNodeCount("/_config/")}}),g=l.default.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",apiUrl:function(){return[this.configs.url(),this.configs.documentation]},routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(e,t){var n=t[0];this.configs=new u.default.ConfigModel({node:n})},configForNode:function(e){return p.default.fetchAndEditConfig(e),r.default.createElement(m.default,{node:e,docURL:this.configs.documentation,endpoint:this.configs.url(),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return r.default.createElement(m.default,{node:e,docURL:this.configs.documentation,endpoint:this.configs.url(),crumbs:[{name:"Config"}],showCors:!0})}});u.default.RouteObjects=[g,_],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(280),l=a(i),s=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._sections={},this._loading=!0,this._editSectionName=null,this._editOptionName=null},editConfig:function(e){this._sections=e,this._loading=!1,this._editSectionName=null,this._editOptionName=null},getOptions:function(){var e=_.sortBy(_.map(this._sections,function(e,t){return{sectionName:t,options:this.mapSection(e,t)}}.bind(this)),function(e){return e.sectionName});return _.flatten(_.map(e,function(e){return e.options}))},mapSection:function(e,t){var n=this,a=_.sortBy(_.map(e,function(e,a){return{editing:n.isEditing(t,a),sectionName:t,optionName:a,value:e}}),function(e){return e.optionName});return a[0].header=!0,a},editOption:function(e,t){this._editSectionName=e,this._editOptionName=t},isEditing:function(e,t){return e==this._editSectionName&&t==this._editOptionName},stopEditing:function(){this._editOptionName=null,this._editSectionName=null},setLoading:function(){this._loading=!0},isLoading:function(){return this._loading},saveOption:function(e,t,n){this._sections[e]||(this._sections[e]={}),this._sections[e][t]=n||!0},deleteOption:function(e,t){this._sections[e]&&(delete this._sections[e][t],0==Object.keys(this._sections[e]).length&&delete this._sections[e])},dispatch:function(e){if(e.options)var t=e.options.sectionName,n=e.options.optionName,a=e.options.value;switch(e.type){case l.default.EDIT_CONFIG:this.editConfig(e.options.sections,e.options.node);break;case l.default.LOADING_CONFIG:this.setLoading();break;case l.default.EDIT_OPTION:this.editOption(t,n);break;case l.default.CANCEL_EDIT:this.stopEditing();break;case l.default.OPTION_SAVE_SUCCESS:this.saveOption(t,n,a),this.stopEditing();break;case l.default.OPTION_ADD_SUCCESS:this.saveOption(t,n,a);break;case l.default.OPTION_DELETE_SUCCESS:this.deleteOption(t,n)}this.triggerChange()}}),u=new s;u.dispatchToken=r.default.dispatcher.register(u.dispatch.bind(u)),t.default={configStore:u}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeOrigins=t.saveCors=t.hideDomainDeleteConfirmation=t.showDomainDeleteConfirmation=t.loadCORSOptions=t.hideLoadingBars=t.showLoadingBars=t.fetchAndLoadCORSOptions=void 0;var r=n(2),i=o(r),l=n(282),s=o(l),u=n(526),c=a(u),d=(t.fetchAndLoadCORSOptions=function(e,t){return function(n){var a=c.fetchCORSConfig(e),o=c.fetchHttpdConfig(e);i.default.Promise.join(a,o,function(e,a){var o=f({origins:e.origins,corsEnabled:"true"===a.enable_cors,node:t});n(o)}).catch(function(e){i.default.addNotification({msg:"Could not load CORS settings.  "+h(e),type:"error"})})}},t.showLoadingBars=function(){return{type:s.default.CORS_SET_IS_LOADING,isLoading:!0}},t.hideLoadingBars=function(){return{type:s.default.CORS_SET_IS_LOADING,isLoading:!1}}),f=t.loadCORSOptions=function(e){return{type:s.default.EDIT_CORS,options:e,isLoading:!1}},p=(t.showDomainDeleteConfirmation=function(e){return{type:s.default.CORS_SHOW_DELETE_DOMAIN_MODAL,domainToDelete:e}},t.hideDomainDeleteConfirmation=function(){return{type:s.default.CORS_HIDE_DELETE_DOMAIN_MODAL}}),h=(t.saveCors=function(e,t){return function(n){var a=[];return a.push(c.updateEnableCorsToHttpd(e,t.node,t.corsEnabled)),t.corsEnabled&&(a.push(c.updateCorsOrigins(e,t.node,m(t.origins))),a.push(c.updateCorsCredentials(e,t.node)),a.push(c.updateCorsHeaders(e,t.node)),a.push(c.updateCorsMethods(e,t.node))),i.default.Promise.all(a).then(function(){i.default.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(f(t))}).catch(function(e){i.default.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+h(e),type:"error",clear:!0}),n(p()),n(d())})}},function(e){return"Reason: "+(e&&e.message||"n/a")}),m=t.sanitizeOrigins=function(e){return _.isEmpty(e)?"":e.join(",")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCorsMethods=t.updateCorsHeaders=t.updateCorsCredentials=t.updateCorsOrigins=t.updateEnableCorsToHttpd=t.fetchHttpdConfig=t.fetchCORSConfig=void 0;var a=n(24),o=(t.fetchCORSConfig=function(e){var t=e+"/cors";return(0,a.get)(t).then(function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})},t.fetchHttpdConfig=function(e){var t=e+"/httpd";return(0,a.get)(t).then(function(e){if(e.error)throw new Error(e.reason);return e})},t.updateEnableCorsToHttpd=function(e,t,n){if(!t)throw new Error("node not set");var o=e+"/httpd/enable_cors";return(0,a.put)(o,n.toString()).then(function(e){if(e.error)throw new Error(e.reason);return e})},t.updateCorsOrigins=function(e,t,n){return o(e,t,"origins",n)},t.updateCorsCredentials=function(e,t){return o(e,t,"credentials","true")},t.updateCorsHeaders=function(e,t){return o(e,t,"headers","accept, authorization, content-type, origin, referer")},t.updateCorsMethods=function(e,t){return o(e,t,"methods","GET, PUT, POST, HEAD, DELETE")},function(e,t,n,o){if(!t)throw new Error("node not set");var r=e+"/cors/"+n;return(0,a.put)(r,o).then(function(e){if(e.error)throw new Error(e.reason);return e})})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o);n(785);var i=n(530),l=a(i),s=r.default.addon();s.initialize=function(){},r.default.addReducers({cors:l.default}),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(529),r=a(o),i=n(283),l=a(i),s=n(284),u=a(s),c=n(287),d=a(c),f=n(286),p=a(f),h=n(285),m=a(h);t.default={CORSContainer:r.default,CORSScreen:l.default,OriginInput:u.default,Origins:d.default,OriginTable:p.default,OriginRow:m.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(283),i=a(r),l=n(525),s=function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}},u=function(e,t){return{saveCORS:function(n){e((0,l.showLoadingBars)()),e((0,l.saveCors)(t.url,n))},fetchAndLoadCORSOptions:function(){e((0,l.fetchAndLoadCORSOptions)(t.url,t.node))},showDeleteDomainConfirmation:function(t){e((0,l.showDomainDeleteConfirmation)(t))},hideDeleteDomainConfirmation:function(){e((0,l.hideDomainDeleteConfirmation)())}}},c=(0,o.connect)(s,u)(i.default);t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case l.default.EDIT_CORS:var n=t.options;return r({},e,{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==u.default.indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case l.default.CORS_SHOW_DELETE_DOMAIN_MODAL:return r({},e,{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case l.default.CORS_HIDE_DELETE_DOMAIN_MODAL:return r({},e,{deleteDomainModalVisible:!1,domainToDelete:""});case l.default.CORS_SET_IS_LOADING:return r({},e,{isLoading:t.isLoading});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var i=n(282),l=a(i),s=n(19),u=a(s),c={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=(a(h),n(14)),g=a(m),b=n(278),E=a(b),v=n(95),y=a(v),O=n(80),N=a(O),S=n(291),D=a(S),T=n(289),C=a(T),w=n(20),A=D.default.databasesStore,I=E.default.deleteDbModalStore,R=g.default.DeleteDatabaseModal,P=g.default.ToggleHeaderButton,L=g.default.TrayContents,k=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{dbList:A.getDbList(),loading:A.isLoading(),showDeleteDatabaseModal:I.getShowDeleteDatabaseModal()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){A.on("change",this.onChange,this),I.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){A.off("change",this.onChange,this),I.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return p.default.createElement(M,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t})}}]),t}(p.default.Component),M=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.createRows=function(e){return e.map(function(e,t){return p.default.createElement(x,{item:e,key:t})})},a.getExtensionColumns=function(){var e=u.default.getExtensions("DatabaseTable:head");return _.map(e,function(e,t){return p.default.createElement(e,{key:t})})},a.showDeleteDatabaseModal=function(){y.default.showDeleteDatabaseModal({showDeleteModal:!a.props.showDeleteDatabaseModal.showDeleteModal})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){if(this.props.loading)return p.default.createElement("div",{className:"view"},p.default.createElement(g.default.LoadLines,null));var e=this.createRows(this.props.dbList);return p.default.createElement("div",{className:"view"},p.default.createElement(R,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal}),p.default.createElement("table",{className:"table table-striped fauxton-table-list databases"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",null,"Name"),p.default.createElement("th",null,"Size"),p.default.createElement("th",null,"# of Docs"),this.getExtensionColumns(),p.default.createElement("th",null,"Actions"))),p.default.createElement("tbody",null,e)))}}]),t}(p.default.Component);M.propTypes={dbList:d.default.array.isRequired,showDeleteDatabaseModal:d.default.object.isRequired,loading:d.default.bool.isRequired};var x=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getExtensionColumns=function(e){var t=u.default.getExtensions("DatabaseTable:databaseRow");return _.map(t,function(t,n){return p.default.createElement(t,{row:e,key:n})})},a.showDeleteDatabaseModal=function(e){y.default.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,a=e.url,o=e.dataSize,r=e.docCount,i=e.docDelCount,l=e.showTombstoneWarning,s=e.failed,u=l?p.default.createElement(U,{docCount:r,docDelCount:i}):null;return s?p.default.createElement("tr",null,p.default.createElement("td",{"data-name":"database-load-fail-name"},n),p.default.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load.")):p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("a",{href:a},n)),p.default.createElement("td",null,o),p.default.createElement("td",null,r," ",u),this.getExtensionColumns(e),p.default.createElement("td",{className:"database-actions"},p.default.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start",title:"Replicate "+name,href:"#/replication/_create/"+t}),p.default.createElement("a",{className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),p.default.createElement("a",{className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),t}(p.default.Component);x.propTypes={row:d.default.object};var U=function(e){var t=e.docCount,n=e.docDelCount,a="This database has just "+t+" docs and "+n+" deleted docs",o=p.default.createElement(w.Tooltip,{id:"graveyard-tooltip"},a);return p.default.createElement(w.OverlayTrigger,{placement:"top",overlay:o},p.default.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:a}))},j=function(){return p.default.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},p.default.createElement(F,{loadOptions:C.default.fetchAllDbsWithKey}),p.default.createElement(B,null))},B=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={isPromptVisible:!1,databaseName:""},a.onTrayToggle=function(){a.setState({isPromptVisible:!a.state.isPromptVisible})},a.closeTray=function(){a.setState({isPromptVisible:!1})},a.focusInput=function(){a.newDbName.focus()},a.onKeyUpInInput=function(e){13===e.which&&a.onAddDatabase()},a.onChange=function(e){a.setState({databaseName:e.target.value})},a.onAddDatabase=function(){C.default.createNewDatabase(a.state.databaseName)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return p.default.createElement("div",null,p.default.createElement(P,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),p.default.createElement(L,{className:"new-database-tray",contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},p.default.createElement("span",{className:"add-on"},"Create Database"),p.default.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"Name of database"}),p.default.createElement("a",{className:"btn",id:"js-create-database",onClick:this.onAddDatabase},"Create")))}}]),t}(p.default.Component),F=function(e){var t=e.loadOptions;return p.default.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},p.default.createElement("div",{className:"faux-header__searchboxcontainer"},p.default.createElement(g.default.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;C.default.jumpToDatabase(t)}})))};F.propTypes={loadOptions:d.default.func.isRequired};var V=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage()}},a.onChange=function(){a.setState(a.getStoreState(a.props))},a.state=a.getStoreState(a.props),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"render",value:function(){var e=this.state,t=e.page,n=e.totalAmountOfDatabases,a="#/"+this.props.linkPath+"?page=",o=1+(t-1)*u.default.constants.MISC.DEFAULT_PAGE_SIZE,r=Math.min(n,t*u.default.constants.MISC.DEFAULT_PAGE_SIZE);return p.default.createElement("footer",{className:"all-db-footer pagination-footer"},p.default.createElement("div",{id:"database-pagination"},p.default.createElement(N.default.Pagination,{page:t,total:n,urlPrefix:a})),p.default.createElement("div",{className:"current-databases"},"Showing ",p.default.createElement("span",{className:"all-db-footer__range"},o,"–",r)," of ",p.default.createElement("span",{className:"all-db-footer__total-db-count"},n)," databases."))}}]),t}(p.default.Component);V.defaultProps={linkPath:"_all_dbs",store:A},t.default={DatabasesController:k,DatabaseTable:M,DatabaseRow:x,RightDatabasesHeader:j,GraveyardInfo:U,AddDatabaseWidget:B,JumpToDatabaseWidget:F,DatabasePagination:V}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;var o=n(0),r=a(o),i=n(2),l=a(i),s=n(39),u=n(531),c=a(u),d=c.default.RightDatabasesHeader,f=c.default.DatabasesController,p=c.default.DatabasePagination,h=t.Layout=function(){return r.default.createElement(s.OnePane,null,r.default.createElement(s.OnePaneHeader,{crumbs:[{name:"Databases"}],endpoint:l.default.urls("allDBs","apiurl"),docURL:l.default.constants.DOC_URLS.ALL_DBS},r.default.createElement(d,null)),r.default.createElement(s.OnePaneContent,null,r.default.createElement(f,null)),r.default.createElement(s.OnePaneFooter,null,r.default.createElement(p,null)))};t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(289),u=a(s),c=n(97),d=a(c),f=n(532),p=a(f),h=l.default.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:params)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(){return u.default.init(),r.default.createElement(p.default,null)}});d.default.RouteObjects=[h],t.default=d.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(536),l=a(i);n(787),l.default.initialize=function(){r.default.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=[{title:"CouchDB Official Documentation — Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation — Offline",link:"./docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on Google Plus",link:"https://plus.google.com/+CouchDB",iconClassName:"google-plus-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}],l=function(e){function t(e){return e.map(function(e){return r.default.createElement("tr",{key:e.title},r.default.createElement("td",{className:"icons-container"},r.default.createElement("div",{className:"icon "+e.iconClassName}," ")),r.default.createElement("td",null,r.default.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},e.title)))})}var n=e.links,a=void 0===n?i:n;return r.default.createElement("div",{id:"documentation-page",className:"scrollable"},r.default.createElement("div",{className:"links"},r.default.createElement("table",null,r.default.createElement("tbody",null,t(a)))))};t.default={DocumentationPage:l}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(535),u=a(s),c=n(39),d=l.default.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return r.default.createElement(c.OnePaneSimpleLayout,{component:r.default.createElement(u.default.DocumentationPage,null),crumbs:[{name:"Documentation"}]})}});d.RouteObjects=[d],t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return e||(e=""),e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=a(r),l=n(18),s=a(l),u=n(2),c=a(u),d=n(589),f=a(d),p=n(100),h=a(p),m=n(575),g=a(m),b=n(591),E=a(b),v=n(314),y=a(v);n(788),c.default.addReducers({indexResults:h.default,mangoQuery:g.default,sidebar:E.default,revisionBrowser:y.default}),c.default.registerUrls("allDocs",{server:function(e,t){return s.default.getServerUrl("/"+e+"/_all_docs"+o(t))},app:function(e,t){return"database/"+e+"/_all_docs"+o(t)},apiurl:function(e,t){return s.default.getApiUrl("/"+e+"/_all_docs"+o(t))}}),c.default.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),s.default.getServerUrl("/"+e+"/_all_docs"+o(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+o(t)},apiurl:function(e,t){return e=encodeURIComponent(e),s.default.getApiUrl("/"+e+"/_all_docs"+o(t))}}),c.default.registerUrls("bulk_docs",{server:function(e,t){return s.default.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+o(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+o(t)},apiurl:function(e,t){return s.default.getApiUrl("/"+e+"/_bulk_docs"+o(t))}}),c.default.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+t+"/conflicts"}}),c.default.registerUrls("designDocs",{server:function(e,t){return s.default.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t){return"database/"+e+"/_design/"+i.default.utils.safeURLName(t)+"/_info"},apiurl:function(e,t){return s.default.getApiUrl("/"+e+"/"+t+"/_info")}}),c.default.registerUrls("view",{server:function(e,t,n){return s.default.getServerUrl("/"+e+"/_design/"+t+"/_view/"+n)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n){return s.default.getApiUrl("/"+e+"/_design/"+t+"/_view/"+n)},edit:function(e,t,n){return"database/"+e+"/_design/"+t+"/_view/"+n+"/edit"},showView:function(e,t,n){return"/database/"+e+"/"+t+"/_view/"+n},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),c.default.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),s.default.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,a){return _.isUndefined(a)&&(a=""),s.default.getServerUrl("/"+e+"/"+t+"/"+n+a)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?s.default.getApiUrl("/"+e+"/"+t):s.default.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),c.default.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/new"},newView:function(e){return"/database/"+e+"/new_view"},addView:function(e,t){return"/database/"+e+"/new_view/"+t}}),c.default.registerUrls("base",{server:function(e){return s.default.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),c.default.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),s.default.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t){return t||(t=""),s.default.getApiUrl("/"+e+"/_index"+t)},"index-app":function(e,t){return t||(t=""),"database/"+e+"/_index"+t},"index-server-bulk-delete":function(e){return s.default.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t){return t||(t=""),s.default.getServerUrl("/"+e+"/_find"+t)},"query-apiurl":function(e,t){return t||(t=""),s.default.getApiUrl("/"+e+"/_find"+t)},"query-app":function(e,t){return t||(t=""),"database/"+e+"/_find"+t},"explain-server":function(e){return s.default.getServerUrl("/"+e+"/_explain")},"explain-apiurl":function(e){return s.default.getApiUrl("/"+e+"/_explain")}}),t.default=f.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChangesCodeTransition=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(10),m=(a(h),n(292)),g=a(m),b=n(294),E=a(b),v=n(80),y=a(v),O=n(14),N=a(O),S=n(231);n(134);var D=n(92),T=a(D),C=E.default.changesStore,w=N.default.BadgeList,A=N.default.Copy,I=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"getStoreState",value:function(){return{changes:C.getChanges(),loaded:C.isLoaded(),databaseName:C.getDatabaseName(),isShowingSubset:C.isShowingSubset()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){C.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){C.off("change",this.onChange)}},{key:"showingSubsetMsg",value:function(){var e=this.state,t=e.isShowingSubset,n=e.changes,a="";if(t){var o=n.length;a=p.default.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",p.default.createElement("b",null,o)," changes.")}return a}},{key:"getRows",value:function(){var e=this.state,t=e.changes,n=e.loaded,a=e.databaseName;return!t.length&&n?p.default.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map(function(e,t){return p.default.createElement(L,{change:e,key:t,databaseName:a})})}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}]),t}(p.default.Component),R=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"getStoreState",value:function(){return{filters:C.getFilters()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){C.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){C.off("change",this.onChange)}},{key:"addFilter",value:function(e){_.isEmpty(e)||g.default.addFilter(e)}},{key:"hasFilter",value:function(e){return C.hasFilter(e)}},{key:"render",value:function(){return p.default.createElement("div",{className:"changes-header"},p.default.createElement(P,{filter:function(e){return g.default.removeFilter(e)},addFilter:this.addFilter,hasFilter:this.hasFilter}),p.default.createElement(w,{elements:this.state.filters,removeBadge:function(e){return g.default.removeFilter(e)}}))}}]),t}(p.default.Component),P=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filter:"",error:!1},n.submitForm=n.submitForm.bind(n),n}return i(t,e),l(t,[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout(function(){t.setState({error:!1})},1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return p.default.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},p.default.createElement("fieldset",null,p.default.createElement("i",{className:"fonticon-filter"}),p.default.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),p.default.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),p.default.createElement("div",{className:"help-block"})))}}]),t}(p.default.Component);P.propTypes={addFilter:d.default.func.isRequired,hasFilter:d.default.func.isRequired,tooltips:d.default.string},P.defaultProps={tooltip:""};var L=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={codeVisible:!1},n}return i(t,e),l(t,[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?p.default.createElement(y.default.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),u.default.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,a=n.change,o=n.databaseName,r="change-wrapper"+(a.isNew?" new-change-row":"");return p.default.createElement("div",{className:r},p.default.createElement("div",{className:"change-box","data-id":a.id},p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"seq"),p.default.createElement("div",{className:"span8 change-sequence"},a.seq),p.default.createElement("div",{className:"span2 text-right"},p.default.createElement(A,{uniqueKey:T.default.v4(),text:a.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"id"),p.default.createElement("div",{className:"span8"},p.default.createElement(M,{id:a.id,deleted:a.deleted,databaseName:o})),p.default.createElement("div",{className:"span2 text-right"},p.default.createElement(A,{uniqueKey:T.default.v4(),text:a.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"deleted"),p.default.createElement("div",{className:"span10"},a.deleted?"True":"False")),p.default.createElement("div",{className:"row-fluid"},p.default.createElement("div",{className:"span2"},"changes"),p.default.createElement("div",{className:"span10"},p.default.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),p.default.createElement(k,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}]),t}(p.default.Component);L.propTypes={change:d.default.object,databaseName:d.default.string.isRequired};var k=t.ChangesCodeTransition=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"willEnter",value:function(){return{opacity:(0,S.spring)(1,S.presets.gentle),height:(0,S.spring)(160,S.presets.gentle)}}},{key:"willLeave",value:function(){return{opacity:(0,S.spring)(0,S.presets.gentle),height:(0,S.spring)(0,S.presets.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map(function(e){return{key:"1",style:e.style}}):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map(function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:p.default.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},p.default.createElement(y.default.CodeFormat,{code:t.props.code}))});return p.default.createElement("span",null,n)}},{key:"render",value:function(){return p.default.createElement(S.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}]),t}(p.default.Component),M=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,a=e.databaseName;if(t)return p.default.createElement("span",{className:"js-doc-id"},n);var o="#"+u.default.urls("document","app",a,n);return p.default.createElement("a",{href:o,className:"js-doc-link"},n)}}]),t}(p.default.Component);t.default={ChangesController:I,ChangesTabContent:R,ChangeRow:L,ChangeID:M}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(24);t.default={fetchAllDocsWithKey:function(e){return function(t,n){var a="?"+r.default.utils.queryParams({startkey:JSON.stringify(t),endkey:JSON.stringify(t+"香"),limit:30}),o=l.default.urls("allDocs","server",e.safeID(),a);(0,s.get)(o).then(function(e){var t=[];e.error||(t=e.rows.map(function(e){return{value:e.id,label:e.id}})),n(null,{options:t})})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return d.default.getModifyDatabaseLinks(e)}function r(e){var t=d.default.getNewButtonLinks(e);return o(e).concat(t)}function i(e){return e.map(function(e,t){if(e.title&&e.links){var n=e.links.map(function(e){return s.default.createElement(m,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)});return[s.default.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return s.default.createElement(m,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=a(l),u=n(10),c=(a(u),n(52)),d=a(c),f=n(2),p=a(f),h=n(20),m=function(e){var t=e.url,n=e.icon,a=e.onClick,o=e.children;return s.default.createElement("li",{role:"presentation"},s.default.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:a,href:t},s.default.createElement("i",{className:n})," ",o))},_=function(e){var t=e.dbName,n=r(t),a=i(n);return s.default.createElement("div",{className:"faux-header__doc-header-left"},s.default.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){p.default.navigate("#/_all_dbs")}},s.default.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),s.default.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:t},t),s.default.createElement(h.Dropdown,{id:"faux-header__doc-header-left-1"},s.default.createElement(h.Dropdown.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},s.default.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),s.default.createElement(h.Dropdown.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},a)))};t.default=_},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(564),u=a(s),c=n(542),d=a(c),f=n(539),p=a(f),h=function(e){var t=e.database,n=e.hideQueryOptions,a=e.hideJumpToDoc,o=e.queryDocs,r=e.ddocsOnly,i=e.selectedNavItem;return l.default.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},l.default.createElement("div",{className:"faux-header__searchboxwrapper"},l.default.createElement("div",{className:"faux-header__searchboxcontainer"},a?null:l.default.createElement(d.default,{cache:!1,loadOptions:p.default.fetchAllDocsWithKey(t),database:t}))),n?null:l.default.createElement(u.default,{ddocsOnly:r,queryDocs:o,selectedNavItem:i}))};h.propTypes={database:r.default.object.isRequired,hideQueryOptions:r.default.bool,isRedux:r.default.bool,queryDocs:r.default.func,selectedNavItem:r.default.object},h.defaultProps={hideQueryOptions:!1},t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(14)),h=a(p),m=function(e){var t=e.database,n=e.loadOptions;return d.default.createElement("div",null,d.default.createElement(h.default.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,cache:!1,onChange:function(e){var n=e.value,a=l.default.urls("document","app",r.default.utils.safeURLName(t.id),r.default.utils.safeURLName(n));setTimeout(function(){return l.default.navigate(a,{trigger:!0})})}}))};m.propTypes={database:u.default.object.isRequired,loadOptions:u.default.func.isRequired},t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResultsToolBar=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(547),p=a(f),h=n(172),m=a(h),_=n(14),g=a(_),b=n(52),E=a(b),v=g.default.BulkActionComponent,y=m.default.sidebarStore;(t.ResultsToolBar=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return void 0!=e.isListDeletable}},{key:"render",value:function(){var e=y.getDatabase(),t=this.props,n=t.hasResults,a=t.isListDeletable,o=t.removeItem,r=t.allDocumentsSelected,i=t.hasSelectedItem,l=t.toggleSelectAll,s=t.isLoading,u=null;(a&&n||s)&&(u=d.default.createElement(v,{removeItem:o,isChecked:r,hasSelectedItem:i,toggleSelect:l,disabled:s,title:"Select all docs that can be..."}));var c=null;(n||s)&&(c=d.default.createElement(p.default,this.props));var f=null;return e&&(f=d.default.createElement("div",{className:"document-result-screen__toolbar-flex-container"},d.default.createElement("a",{href:E.default.getNewDocUrl(e.id),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),d.default.createElement("div",{className:"document-result-screen__toolbar"},u,c,f)}}]),t}(d.default.Component)).propTypes={removeItem:u.default.func.isRequired,allDocumentsSelected:u.default.bool.isRequired,hasSelectedItem:u.default.bool.isRequired,toggleSelectAll:u.default.func.isRequired,isLoading:u.default.bool.isRequired,hasResults:u.default.bool.isRequired,isListDeletable:u.default.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(0),d=a(c),f=n(297),p=a(f),h=n(295),m=a(h),_=n(14),g=a(_),b=n(92),E=a(b),v=p.default.designDocInfoStore,y=g.default.LoadLines,O=g.default.Copy,N=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{viewIndex:v.getViewIndex(),isLoading:v.isLoading(),ddocName:v.getDdocName()}},a.onChange=function(){a.setState(a.getStoreState())},a.showCopiedMessage=function(){u.default.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){v.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){v.off("change",this.onChange),m.default.stopRefresh()}},{key:"render",value:function(){var e=this.state.viewIndex;if(this.state.isLoading)return d.default.createElement(y,null);var t=e.data_size?e.data_size.toLocaleString("en"):0,n=e.disk_size?e.disk_size.toLocaleString("en"):0;return d.default.createElement("div",{className:"metadata-page"},d.default.createElement("header",null,d.default.createElement("h2",null,"_design/",this.state.ddocName," Metadata")),d.default.createElement("section",{className:"container"},d.default.createElement("h3",null,"Index Information"),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Language:"),d.default.createElement("span",{className:"capitalize"},e.language)),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Actual data size (bytes):"),t),d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),n)),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",{className:"item-title"},"MD5 Signature:"),d.default.createElement(O,{uniqueKey:E.default.v4(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}]),t}(d.default.Component);t.default={DesignDocInfo:N}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(2),c=a(u),d=n(1),f=a(d),p=n(0),h=a(p),m=n(20),g=n(10),b=(a(g),n(298)),E=a(b),v=n(546),y=a(v),O=n(80),N=a(O),S=n(14),D=a(S),T=n(18),C=a(T),w=y.default.docEditorStore,A=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{isLoading:w.isLoading(),doc:w.getDoc(),cloneDocModalVisible:w.isCloneDocModalVisible(),uploadModalVisible:w.isUploadModalVisible(),deleteDocModalVisible:w.isDeleteDocModalVisible(),numFilesUploaded:w.getNumFilesUploaded(),conflictCount:w.getDocConflictCount()}},a.getCodeEditor=function(){if(a.state.isLoading)return h.default.createElement(D.default.LoadLines,null);var e=JSON.stringify(a.state.doc.attributes,null,"  "),t=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:a.saveDoc}];return h.default.createElement(D.default.CodeEditor,{id:"doc-editor",ref:function(e){return a.docEditor=e},defaultCode:e,mode:"json",autoFocus:!0,editorCommands:t,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})},a.onChange=function(){a.setState(a.getStoreState())},a.saveDoc=function(){E.default.saveDoc(a.state.doc,a.checkDocIsValid(),a.onSaveComplete)},a.onSaveComplete=function(){a.getEditor().clearChanges()},a.hideDeleteDocModal=function(){E.default.hideDeleteDocModal()},a.deleteDoc=function(){E.default.hideDeleteDocModal(),E.default.deleteDoc(a.state.doc)},a.getEditor=function(){return a.docEditor?a.docEditor.getEditor():null},a.checkDocIsValid=function(){if(a.getEditor().hasErrors())return!1;var e=JSON.parse(a.getEditor().getValue());return a.state.doc.clear().set(e,{validate:!0}),!a.state.doc.validationError},a.clearChanges=function(){a.docEditor.clearChanges()},a.getExtensionIcons=function(){var e=c.default.getExtensions("DocEditor:icons");return _.map(e,function(e,t){return h.default.createElement(e,{doc:this.state.doc,key:t,database:this.props.database})},a)},a.getButtonRow=function(){return!a.props.isNewDoc&&h.default.createElement("div",null,h.default.createElement(I,{doc:a.state.doc,isLoading:a.state.isLoading}),h.default.createElement("div",{className:"doc-editor-extension-icons"},a.getExtensionIcons()),a.state.conflictCount?h.default.createElement(R,{title:"Conflicts ("+a.state.conflictCount+")",iconClass:"icon-columns",className:"conflicts",onClick:function(){c.default.navigate(c.default.urls("revision-browser","app",a.props.database.safeID(),a.state.doc.id))}}):null,h.default.createElement(R,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",onClick:E.default.showUploadModal}),h.default.createElement(R,{title:"Clone Document",iconClass:"icon-repeat",onClick:E.default.showCloneDocModal}),h.default.createElement(R,{title:"Delete",iconClass:"icon-trash",onClick:E.default.showDeleteDocModal}))},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){w.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){w.off("change",this.onChange)}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){(this.state.numFilesUploaded!==t.numFilesUploaded||this.state.doc&&this.state.doc.hasChanged()||this.state.doc&&t.doc&&this.state.doc.id!==t.doc.id)&&(this.getEditor().setValue(JSON.stringify(t.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isNewDoc?"Create Document":"Save Changes",n=c.default.urls("allDocs","app",c.default.url.encode(this.props.database.id));return h.default.createElement("div",null,h.default.createElement("div",{id:"doc-editor-actions-panel"},h.default.createElement("div",{className:"doc-actions-left"},h.default.createElement("button",{className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},h.default.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),h.default.createElement("div",null,h.default.createElement("a",{href:"#/"+n,className:"js-back cancel-button"},"Cancel"))),h.default.createElement("div",{className:"alignRight"},this.getButtonRow())),h.default.createElement("div",{className:"code-region"},h.default.createElement("div",{className:"bgEditorGutter"}),h.default.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),h.default.createElement(P,{ref:function(t){return e.uploadModal=t},visible:this.state.uploadModalVisible,doc:this.state.doc}),h.default.createElement(L,{doc:this.state.doc,database:this.props.database,visible:this.state.cloneDocModalVisible,onSubmit:this.clearChanges}),h.default.createElement(N.default.ConfirmationModal,{title:"Confirm Deletion",visible:this.state.deleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}]),t}(h.default.Component);A.defaultProps={database:{},isNewDoc:!1};var I=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getAttachmentList=function(){var e=encodeURIComponent(a.props.doc.database.get("id")),t=encodeURIComponent(a.props.doc.get("_id"));return _.map(a.props.doc.get("_attachments"),function(n,a){var o=c.default.urls("document","attachment",e,t,encodeURIComponent(a));return h.default.createElement(m.MenuItem,{key:a,href:o,target:"_blank","data-bypass":"true"},h.default.createElement("strong",null,a),h.default.createElement("span",{className:"attachment-delimiter"},"-"),h.default.createElement("span",null,n.content_type,n.content_type?", ":"",C.default.formatSize(n.length)))})},i=n,r(a,i)}return i(t,e),s(t,[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&h.default.createElement("div",{className:"panel-section view-attachments-section btn-group"},h.default.createElement(m.Dropdown,{id:"view-attachments-menu"},h.default.createElement(m.Dropdown.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},h.default.createElement("i",{className:"icon icon-paper-clip"}),h.default.createElement("span",{className:"button-text"},"View Attachments"),h.default.createElement("span",{className:"caret"})),h.default.createElement(m.Dropdown.Menu,null,this.getAttachmentList())))}}]),t}(h.default.Component);I.propTypes={isLoading:f.default.bool.isRequired,doc:f.default.object},I.defaultProps={isLoading:!0,doc:{}};var R=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e="icon "+this.props.iconClass;return h.default.createElement("div",{className:"panel-section"},h.default.createElement("button",{className:"panel-button "+this.props.className,title:this.props.title,onClick:this.props.onClick},h.default.createElement("i",{className:e}),h.default.createElement("span",null,this.props.title)))}}]),t}(h.default.Component);R.propTypes={title:f.default.string.isRequired,onClick:f.default.func.isRequired,className:f.default.string},R.defaultProps={title:"",iconClass:"",onClick:function(){},className:""};var P=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{inProgress:w.isUploadInProgress(),loadPercentage:w.getUploadLoadPercentage(),errorMessage:w.getFileUploadErrorMsg()}},a.onChange=function(){a.setState(a.getStoreState())},a.closeModal=function(e){e&&e.preventDefault(),a.state.inProgress&&E.default.cancelUpload(),E.default.hideUploadModal(),E.default.resetUploadModal()},a.upload=function(){E.default.uploadAttachment({doc:a.props.doc,rev:a.props.doc.get("_rev"),files:a.attachments.files})},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){w.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){w.off("change",this.onChange)}},{key:"render",value:function(){var e=this,t="alert alert-error";""===this.state.errorMessage&&(t+=" hide");var n="progress progress-info",a={disabled:"disabled"};return this.state.inProgress||(n+=" hide",a={}),h.default.createElement(m.Modal,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},h.default.createElement(m.Modal.Header,{closeButton:!0},h.default.createElement(m.Modal.Title,null,"Upload Attachment")),h.default.createElement(m.Modal.Body,null,h.default.createElement("div",{className:t},this.state.errorMessage),h.default.createElement("div",null,h.default.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},h.default.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),h.default.createElement("input",l({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},a)),h.default.createElement("br",null)),h.default.createElement("div",{className:n},h.default.createElement("div",{className:"bar",style:{width:this.state.loadPercentage+"%"}})))),h.default.createElement(m.Modal.Footer,null,h.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),h.default.createElement("button",l({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},a),h.default.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}]),t}(h.default.Component);P.propTypes={visible:f.default.bool.isRequired,doc:f.default.object};var L=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={uuid:null},a.cloneDoc=function(){a.props.onSubmit&&a.props.onSubmit(),E.default.cloneDoc(a.props.database,a.props.doc,a.state.uuid)},a.closeModal=function(e){e&&e.preventDefault(),E.default.hideCloneDocModal()},a.docIDChange=function(e){a.setState({uuid:e.target.value})},i=n,r(a,i)}return i(t,e),s(t,[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&C.default.getUUID().then(function(t){t.uuids&&e.setState({uuid:t.uuids[0]})}).catch(function(){})}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&h.default.createElement(m.Modal,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},h.default.createElement(m.Modal.Header,{closeButton:!0},h.default.createElement(m.Modal.Title,null,"Clone Document")),h.default.createElement(m.Modal.Body,null,h.default.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},h.default.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),h.default.createElement("p",null,"You can modify the following generated ID for your new document."),h.default.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),h.default.createElement(m.Modal.Footer,null,h.default.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),h.default.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},h.default.createElement("i",{className:"icon-repeat"})," Clone Document")))}}]),t}(h.default.Component);L.propTypes={visible:f.default.bool.isRequired,doc:f.default.object,database:f.default.object.isRequired,onSubmit:f.default.func.isRequired},t.default={DocEditorController:A,AttachmentsPanelButton:I,UploadModal:P,CloneDocModal:L}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(299),l=a(i),s={};s.DocEditorStore=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._doc=null,this._isLoading=!0,this._cloneDocModalVisible=!1,this._deleteDocModalVisible=!1,this._uploadModalVisible=!1,this._numFilesUploaded=0,this._fileUploadErrorMsg="",this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._docConflictCount=null},isLoading:function(){return this._isLoading},getDocConflictCount:function(){return this._docConflictCount},docLoaded:function(e){this._isLoading=!1,this._docConflictCount=e.doc.get("_conflicts")?e.doc.get("_conflicts").length:0,e.doc.unset("_conflicts"),this._doc=e.doc},getDoc:function(){return this._doc},isCloneDocModalVisible:function(){return this._cloneDocModalVisible},showCloneDocModal:function(){this._cloneDocModalVisible=!0},hideCloneDocModal:function(){this._cloneDocModalVisible=!1},isDeleteDocModalVisible:function(){return this._deleteDocModalVisible},showDeleteDocModal:function(){this._deleteDocModalVisible=!0},hideDeleteDocModal:function(){this._deleteDocModalVisible=!1},isUploadModalVisible:function(){return this._uploadModalVisible},showUploadModal:function(){this._uploadModalVisible=!0},hideUploadModal:function(){this._uploadModalVisible=!1},getNumFilesUploaded:function(){return this._numFilesUploaded},getFileUploadErrorMsg:function(){return this._fileUploadErrorMsg},setFileUploadErrorMsg:function(e){this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=e},isUploadInProgress:function(){return this._uploadInProgress},getUploadLoadPercentage:function(){return this._fileUploadLoadPercentage},resetUploadModal:function(){this._uploadInProgress=!1,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=""},startFileUpload:function(){this._uploadInProgress=!0,this._fileUploadLoadPercentage=0,this._fileUploadErrorMsg=""},dispatch:function(e){switch(e.type){case l.default.RESET_DOC:this.reset();break;case l.default.DOC_LOADED:this.docLoaded(e.options),this.triggerChange();break;case l.default.SHOW_CLONE_DOC_MODAL:this.showCloneDocModal(),this.triggerChange();break;case l.default.HIDE_CLONE_DOC_MODAL:this.hideCloneDocModal(),this.triggerChange();break;case l.default.SHOW_DELETE_DOC_CONFIRMATION_MODAL:this.showDeleteDocModal(),this.triggerChange();break;case l.default.HIDE_DELETE_DOC_CONFIRMATION_MODAL:this.hideDeleteDocModal(),this.triggerChange();break;case l.default.SHOW_UPLOAD_MODAL:this.showUploadModal(),this.triggerChange();break;case l.default.HIDE_UPLOAD_MODAL:this.hideUploadModal(),this.triggerChange();break;case l.default.FILE_UPLOAD_SUCCESS:this._numFilesUploaded++,this.triggerChange();break;case l.default.FILE_UPLOAD_ERROR:this.setFileUploadErrorMsg(e.options.error),this.triggerChange();break;case l.default.RESET_UPLOAD_MODAL:this.resetUploadModal(),this.triggerChange();break;case l.default.START_FILE_UPLOAD:this.startFileUpload(),this.triggerChange();break;case l.default.SET_FILE_UPLOAD_PERCENTAGE:this._fileUploadLoadPercentage=e.options.percent,this.triggerChange();break;default:return}}}),s.docEditorStore=new s.DocEditorStore,s.docEditorStore.dispatchToken=r.default.dispatcher.register(s.docEditorStore.dispatch),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(40),d=a(c),f=n(20),p=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.selectedLayout,n=e.docType,a=e.queryOptionsParams,o=void 0,r=void 0,i=void 0;if(n===d.default.INDEX_RESULTS_DOC_TYPE.VIEW)o=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.METADATA?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.METADATA)},"Metadata");else if(n===d.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)return null;return a.reduce||(i=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.TABLE?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.TABLE)},u.default.createElement("i",{className:"fonticon-table"})," Table"),r=u.default.createElement(f.Button,{className:t===d.default.LAYOUT_ORIENTATION.JSON?"active":"",onClick:this.toggleLayout.bind(this,d.default.LAYOUT_ORIENTATION.JSON)},u.default.createElement("i",{className:"fonticon-json"})," JSON")),u.default.createElement("div",{className:"alternative-header"},u.default.createElement(f.ButtonGroup,{className:"two-sides-toggle-button"},i,o,r))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,a=t.selectedLayout,o=t.fetchDocs,r=t.fetchParams,i=t.queryOptionsParams,l=t.queryOptionsToggleIncludeDocs;if(e!==a)return n(e),i.include_docs=e!==d.default.LAYOUT_ORIENTATION.METADATA,e===d.default.LAYOUT_ORIENTATION.TABLE?r.conflicts=!0:delete r.conflicts,l(!i.include_docs),void o(r,i)}}]),t}(u.default.Component);t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(11)),f=a(d),p=n(2),h=a(p),m=n(14),_=a(m),g=n(304),b=a(g),E=n(128),v=a(E),y=n(302),O=a(y),N=n(303),S=a(N),D=f.default.helpers.getDocUrl,T=b.default.indexEditorStore,C=_.default.CodeEditorPanel,w=_.default.ConfirmButton,A=_.default.LoadLines,I=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"getStoreState",value:function(){return{database:T.getDatabase(),isNewView:T.isNewView(),viewName:T.getViewName(),designDocs:T.getDesignDocs(),designDocList:T.getAvailableDesignDocs(),originalViewName:T.getOriginalViewName(),originalDesignDocName:T.getOriginalDesignDocName(),newDesignDoc:T.isNewDesignDoc(),designDocId:T.getDesignDocId(),newDesignDocName:T.getNewDesignDocName(),saveDesignDoc:T.getSaveDesignDoc(),map:T.getMap(),isLoading:T.isLoading()}}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"componentDidMount",value:function(){T.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){T.off("change",this.onChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.map!==t.map&&this.mapEditor&&this.mapEditor.update()}},{key:"saveView",value:function(e){e.preventDefault(),this.designDocSelector.validate()&&v.default.saveView({database:this.state.database,newView:this.state.isNewView,viewName:this.state.viewName,designDoc:this.state.saveDesignDoc,designDocId:this.state.designDocId,newDesignDoc:this.state.newDesignDoc,originalViewName:this.state.originalViewName,originalDesignDocName:this.state.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.state.designDocs})}},{key:"viewChange",value:function(e){v.default.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){v.default.updateMapCode(e)}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return u.default.createElement("div",{className:"define-view"},u.default.createElement(A,null));var t=this.state.isNewView?"New View":"Edit View",n=this.state.isNewView?"Create Document and then Build Index":"Save Document and then Build Index",a="#"+h.default.urls("view","showView",this.state.database.id,this.state.designDocId,this.state.viewName);return u.default.createElement("div",{className:"define-view"},u.default.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView.bind(this)},u.default.createElement("h3",{className:"simple-header"},t),u.default.createElement("div",{className:"new-ddoc-section"},u.default.createElement(O.default,{ref:function(t){e.designDocSelector=t},designDocList:this.state.designDocList,selectedDesignDocName:this.state.designDocId,newDesignDocName:this.state.newDesignDocName,onSelectDesignDoc:v.default.selectDesignDoc,onChangeNewDesignDocName:v.default.updateNewDesignDocName,docLink:D("DESIGN_DOCS")})),u.default.createElement("div",{className:"control-group"},u.default.createElement("label",{htmlFor:"index-name"},u.default.createElement("span",null,"Index name"),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:D("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},u.default.createElement("i",{className:"icon-question-sign"}))),u.default.createElement("input",{type:"text",id:"index-name",value:this.state.viewName,onChange:this.viewChange.bind(this),placeholder:"Index name"})),u.default.createElement(C,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:D("MAP_FUNCS"),blur:this.updateMapCode.bind(this),allowZenMode:!1,defaultCode:this.state.map}),u.default.createElement(S.default,{ref:function(t){e.reduceEditor=t}}),u.default.createElement("div",{className:"padded-box"},u.default.createElement("div",{className:"control-group"},u.default.createElement(w,{id:"save-view",text:n}),u.default.createElement("a",{href:a,className:"index-cancel-link"},"Cancel")))))}}]),t}(s.Component);t.default=I},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(550),d=a(c),f=n(551),p=a(f),h=n(552),m=a(h),_=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,a=e.pageEnd;return 0===t.length?u.default.createElement("span",null,"Showing 0 documents."):u.default.createElement("span",null,"Showing document ",n," - ",a,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,a=t.fetchParams,o=t.queryOptionsParams,r=t.paginateNext,i=t.perPage;n&&r(a,o,i)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,a=t.fetchParams,o=t.queryOptionsParams,r=t.paginatePrevious,i=t.perPage;n&&r(a,o,i)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,a=e.prioritizedEnabled,o=e.displayedFields,r=e.perPage,i=e.canShowNext,l=e.canShowPrevious,s=e.toggleShowAllColumns;return u.default.createElement("footer",{className:"index-pagination pagination-footer"},u.default.createElement(d.default,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:i,canShowPrevious:l}),u.default.createElement("div",{className:"footer-controls"},u.default.createElement("div",{className:"page-controls"},t&&n?u.default.createElement(m.default,{prioritizedEnabled:a,displayedFields:o,toggleShowAllColumns:s}):null),u.default.createElement(p.default,{perPageChange:this.perPageChange.bind(this),perPage:r}),u.default.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}]),t}(u.default.Component);t.default=_},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.nextClicked,n=e.previousClicked,a=e.canShowPrevious,o=e.canShowNext,r="",i="";return a||(r="disabled"),o||(i="disabled"),s.default.createElement("div",{className:"documents-pagination"},s.default.createElement("ul",{className:"pagination"},s.default.createElement("li",{className:r},s.default.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),s.default.createElement("li",{className:i},s.default.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(1),i=a(r),l=n(0),s=a(l);o.propTypes={nextClicked:i.default.func.isRequired,previousClicked:i.default.func.isRequired,canShowPrevious:i.default.bool.isRequired,canShowNext:i.default.bool.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,function(e){return d.default.createElement("option",{value:e,key:e},e)})}},{key:"render",value:function(){return d.default.createElement("div",{id:"per-page"},d.default.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label,"  ",d.default.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}]),t}(d.default.Component);t.default=f,f.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},f.propTypes={perPage:u.default.number.isRequired,perPageChange:u.default.func.isRequired,label:u.default.string,options:u.default.array}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?d.default.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):d.default.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return d.default.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),d.default.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},d.default.createElement("label",{htmlFor:"footer-doc-control-prioritized"},d.default.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}]),t}(d.default.Component);t.default=f,f.propTypes={prioritizedEnabled:u.default.bool.isRequired,displayedFields:u.default.object.isRequired,toggleShowAllColumns:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(d.default.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return u.default.createElement("div",{className:"query-group",id:"query-options-additional-params"},u.default.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),u.default.createElement("div",{className:"row-fluid fieldsets"},u.default.createElement("div",{className:"dropdown inline"},u.default.createElement("label",{className:"drop-down"},"Limit",u.default.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},u.default.createElement("option",{value:"none"},"None"),u.default.createElement("option",{value:5},"5"),u.default.createElement("option",{value:10},"10"),u.default.createElement("option",{value:20},"20"),u.default.createElement("option",{value:30},"30"),u.default.createElement("option",{value:50},"50"),u.default.createElement("option",{value:100},"100"),u.default.createElement("option",{value:500},"500"))))),u.default.createElement("div",{className:"row-fluid fieldsets"},u.default.createElement("div",{className:"checkbox inline"},u.default.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),u.default.createElement("label",{htmlFor:"qoDescending"},"Descending")),u.default.createElement("div",{className:"dropdown inline"},u.default.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",u.default.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}]),t}(u.default.Component);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",a=n,o="drop-down btn ",r=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?r+="active":a+="hide",u.default.createElement("div",{className:"query-group",id:"query-options-key-search"},u.default.createElement("div",{className:"add-on"},"Keys"),u.default.createElement("div",{className:"btn-group toggle-btns row-fluid"},u.default.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),u.default.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:r},"Between Keys")),u.default.createElement("div",{className:t},u.default.createElement("div",{className:n,id:"js-showKeys"},u.default.createElement("div",{className:"controls controls-row"},u.default.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),u.default.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),u.default.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),u.default.createElement("div",{className:a,id:"js-showStartEnd"},u.default.createElement("div",{className:"controls controls-row"},u.default.createElement("div",null,u.default.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),u.default.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),u.default.createElement("div",null,u.default.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),u.default.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),u.default.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},u.default.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),u.default.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}]),t}(u.default.Component));t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleStable=n.toggleStable.bind(n),n.onUpdateChange=n.onUpdateChange.bind(n),n.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],n}return i(t,e),l(t,[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?d.default.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",d.default.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},d.default.createElement("option",{value:"0"},"None"),d.default.createElement("option",{value:"1"},"1"),d.default.createElement("option",{value:"2"},"2"),d.default.createElement("option",{value:"3"},"3"),d.default.createElement("option",{value:"4"},"4"),d.default.createElement("option",{value:"5"},"5"),d.default.createElement("option",{value:"6"},"6"),d.default.createElement("option",{value:"7"},"7"),d.default.createElement("option",{value:"8"},"8"),d.default.createElement("option",{value:"9"},"9"),d.default.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"reduce",value:function(){return this.props.showReduce?d.default.createElement("span",null,d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:this.props.reduce}),d.default.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"getUpdateOptions",value:function(){return this.updateOptions.map(function(e){return d.default.createElement("option",{key:e.value,value:e.value},e.label)})}},{key:"render",value:function(){var e=this.props,t=e.includeDocs,n=e.stable,a=e.update;return d.default.createElement("div",{className:"query-group",id:"query-options-main-fields"},d.default.createElement("span",{className:"add-on"},"Query Options",d.default.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},d.default.createElement("i",{className:"icon-question-sign"}))),d.default.createElement("div",{className:"controls-group qo-main-fields-row"},d.default.createElement("div",{className:"row-fluid fieldsets"},d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{disabled:this.props.reduce,onChange:this.toggleIncludeDocs.bind(this),id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),d.default.createElement("label",{className:this.props.reduce?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs")),this.reduce()),d.default.createElement("div",{className:"row-fluid fieldsets"},d.default.createElement("div",{className:"checkbox inline"},d.default.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"include_docs",type:"checkbox",checked:n}),d.default.createElement("label",{htmlFor:"qoStable",id:"qoStableLabel"},"Stable")),d.default.createElement("div",{className:"dropdown inline"},d.default.createElement("label",{className:"drop-down"},"Update",d.default.createElement("select",{className:"input-small",id:"qoUpdate",value:a,onChange:this.onUpdateChange},this.getUpdateOptions()))))))}}]),t}(d.default.Component);t.default=f,f.propTypes={toggleIncludeDocs:u.default.func.isRequired,includeDocs:u.default.bool.isRequired,reduce:u.default.bool.isRequired,toggleReduce:u.default.func,updateGroupLevel:u.default.func,docURL:u.default.string.isRequired,stable:u.default.bool.isRequired,toggleStable:u.default.func.isRequired,update:u.default.string.isRequired,changeUpdateField:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return d.default.createElement("div",{className:"controls-group query-group"},d.default.createElement("div",{id:"button-options",className:"controls controls-row"},d.default.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),d.default.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}]),t}(d.default.Component);t.default=f,f.propTypes={onCancel:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(2),p=a(f),h=n(14),m=a(h),_=n(40),g=a(_),b=n(555),E=a(b),v=n(554),y=a(v),O=n(553),N=a(O),S=n(556),D=a(S),T=m.default.ToggleHeaderButton,C=m.default.TrayContents,w=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.ddocsOnly,i=e.queryOptionsApplyFilterOnlyDdocs;return a&&i(),n}return i(t,e),l(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,a=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?a():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,a=t.queryOptionsParams,o=t.perPage,r=t.resetPagination,i=t.selectedLayout,l=t.changeLayout;r(o);var s=i===g.default.LAYOUT_ORIENTATION.METADATA;s&&a.include_docs?l(g.default.LAYOUT_ORIENTATION.TABLE):s||a.include_docs||l(g.default.LAYOUT_ORIENTATION.METADATA),n(a,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return d.default.createElement(C,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray"},d.default.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},d.default.createElement(E.default,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:p.default.constants.DOC_URLS.GENERAL,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),d.default.createElement(y.default,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),d.default.createElement(N.default,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),d.default.createElement(D.default,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,a=e.byKeys,o=e.descending,r=e.skip,i=e.limit,l=e.stable,s=e.update;return!!(n&&n.startkey||a||i&&"none"!=i||r||t||o||l||"true"!==s)}},{key:"render",value:function(){return d.default.createElement("div",{id:"header-query-options"},d.default.createElement("div",{id:"query-options"},d.default.createElement("div",null,d.default.createElement(T,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}]),t}(d.default.Component);t.default=w,w.propTypes={contentVisible:u.default.bool.isRequired,queryOptionsApplyFilterOnlyDdocs:u.default.func.isRequired,queryOptionsRemoveFilterOnlyDdocs:u.default.func.isRequired,queryOptionsExecute:u.default.func.isRequired,queryOptionsParams:u.default.object.isRequired,perPage:u.default.number.isRequired,resetPagination:u.default.func.isRequired,selectedLayout:u.default.string.isRequired,changeLayout:u.default.func.isRequired,queryOptionsToggleVisibility:u.default.func.isRequired,queryOptionsToggleStable:u.default.func.isRequired,queryOptionsChangeUpdate:u.default.func.isRequired,stable:u.default.bool.isRequired,update:u.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(560),h=a(p),m=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,a=e.queryOptionsParams;e.fetchAtStartup&&t(n,a)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,a=e.queryOptionsParams,o=e.ddocsOnly,r=e.fetchUrl,i=e.resetState;this.props.ddocsOnly===o&&this.props.fetchUrl===r||(i(),t(l({},n,{skip:0}),l({},a,{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex(function(t){return e===t._id})>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,a=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,a)}},{key:"render",value:function(){var e=this.props.results;return f.default.createElement(h.default,l({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}]),t}(f.default.Component);t.default=m,m.propTypes={fetchAtStartup:c.default.bool.isRequired,fetchDocs:c.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.text;return s.default.createElement("div",{className:"no-results-screen"},s.default.createElement("div",{className:"watermark-logo"}),s.default.createElement("h3",null,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(1),i=a(r),l=n(0),s=a(l);o.propTypes={text:i.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(40),p=a(f),h=n(14),m=a(h),g=n(543),b=n(559),E=a(b),v=n(562),y=a(v),O=m.default.LoadLines,N=m.default.Document,S=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&d.default.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?u.default.createElement("a",{href:e},u.default.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=function(){},t=this.props.results.results;return _.map(t,function(t,n){return u.default.createElement(N,{key:t.id+n,doc:t,onClick:this.props.isEditable?this.onClick:e,keylabel:t.keylabel,docContent:t.content,checked:this.props.isSelected(t.id),header:t.header,docChecked:this.props.docChecked,isDeletable:t.isDeletable,docIdentifier:t.id},t.url?this.getUrlFragment("#"+t.url):t.url)},this)}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e+=" show-select"),u.default.createElement("div",{className:e},u.default.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return u.default.createElement("div",null,u.default.createElement(y.default,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,title:"Select all docs that can be..."}))}},{key:"render",value:function(){var e=null;return e=this.props.isLoading?u.default.createElement("div",{className:"loading-lines-wrapper"},u.default.createElement(O,null)):this.props.hasResults?this.props.selectedLayout===p.default.LAYOUT_ORIENTATION.JSON?this.getDocumentStyleView():this.getTableStyleView():u.default.createElement(E.default,{text:this.props.textEmptyIndex}),u.default.createElement("div",{className:"document-result-screen"},u.default.createElement(g.ResultsToolBar,this.props),e)}}]),t}(u.default.Component);t.default=S},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(2),h=a(p),m=n(14),_=a(m),g=n(92),b=a(g),E=_.default.Copy,v=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={checked:n.props.isSelected},n}return i(t,e),s(t,[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,a){var o="tableview-data-cell-"+t+e+a+n[e],r=-1!==["object","boolean"].indexOf(l(n[e]))?JSON.stringify(n[e],null,"  "):n[e];return f.default.createElement("td",{key:o,title:r,onClick:this.onClick.bind(this)},r)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return f.default.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?f.default.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,a=null,o=Object.keys(e._conflicts||{}).length,r=null,i=null;return t&&(a=1===t?t+" Attachment":t+" Attachments",n=f.default.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:a},f.default.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(i=1===o?o+" Conflict":o+" Conflicts",r=f.default.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:i},f.default.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),f.default.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},r,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return f.default.createElement("td",{title:t,className:"tableview-el-copy"},f.default.createElement(E,{title:t,text:t,uniqueKey:b.default.v4(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){h.default.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return f.default.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}]),t}(f.default.Component);t.default=v,v.propTypes={docIdentifier:c.default.string.isRequired,docChecked:c.default.func.isRequired,isSelected:c.default.bool.isRequired,index:c.default.number.isRequired,data:c.default.object.isRequired,onClick:c.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(561),d=a(c),f=n(563),p=a(f),h=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"getContentRows",value:function(){return this.props.data.results.map(function(e,t){return u.default.createElement(d.default,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return u.default.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map(function(e,t){return u.default.createElement("th",{key:"header-el-"+t},e)})}},{key:"getDropdown",value:function(e,t,n,a,o){return u.default.createElement(p.default,{selectedField:e,notSelectedFields:t,index:n,changeField:a,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return u.default.createElement("tr",{key:"tableview-content-row-header"},u.default.createElement("th",{className:"tableview-header-el-checkbox"}),u.default.createElement("th",{className:"tableview-el-copy"}),t,u.default.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return u.default.createElement("div",{className:"table-view-docs"},u.default.createElement("table",{className:"table table-striped"},u.default.createElement("thead",null,this.getHeader()),u.default.createElement("tbody",null,this.getContentRows())))}}]),t}(u.default.Component);t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.selectedField,n=e.notSelectedFields,a=e.index,o=e.changeField,r=e.selectedFields,l=n.map(function(e){return{value:e,label:e}});return i.default.createElement("div",{className:"table-container-autocomplete"},i.default.createElement("div",{className:"table-select-wrapper"},i.default.createElement(s.default,{value:t,options:l,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:a},r)}})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(0),i=a(r),l=n(77),s=a(l)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(23),l=n(52),s=a(l),u=n(557),c=a(u),d=n(98),f=n(305),p=n(306),h=n(100),m=function(e,t){return s.default.selectedViewContainsReduceFunction(e,t)},_=function(e,t){var n=e.indexResults,a=e.sidebar,o=(0,h.getQueryOptionsPanel)(n);return{contentVisible:o.isVisible,includeDocs:o.includeDocs,showReduce:m(a.designDocs,t.selectedNavItem),reduce:o.reduce,groupLevel:o.groupLevel,showByKeys:o.showByKeys,showBetweenKeys:o.showBetweenKeys,betweenKeys:o.betweenKeys,byKeys:o.byKeys,descending:o.descending,skip:o.skip,limit:o.limit,stable:o.stable,update:o.update,fetchParams:(0,h.getFetchParams)(n),queryOptionsParams:(0,h.getQueryOptionsParams)(n),perPage:(0,h.getPerPage)(n),selectedLayout:(0,h.getSelectedLayout)(n),ddocsOnly:t.ddocsOnly}},g=function(e,t){return{resetPagination:function(t){e((0,f.resetPagination)(t))},queryOptionsToggleReduce:function(t){e((0,p.queryOptionsToggleReduce)(t))},queryOptionsUpdateGroupLevel:function(t){e((0,p.queryOptionsUpdateGroupLevel)(t))},queryOptionsToggleByKeys:function(t){e((0,p.queryOptionsToggleByKeys)(t))},queryOptionsToggleBetweenKeys:function(t){e((0,p.queryOptionsToggleBetweenKeys)(t))},queryOptionsUpdateBetweenKeys:function(t){e((0,p.queryOptionsUpdateBetweenKeys)(t))},queryOptionsUpdateByKeys:function(t){e((0,p.queryOptionsUpdateByKeys)(t))},queryOptionsToggleDescending:function(t){e((0,p.queryOptionsToggleDescending)(t))},queryOptionsUpdateSkip:function(t){e((0,p.queryOptionsUpdateSkip)(t))},queryOptionsUpdateLimit:function(t){e((0,p.queryOptionsUpdateLimit)(t))},queryOptionsToggleIncludeDocs:function(t){e((0,p.queryOptionsToggleIncludeDocs)(t))},queryOptionsToggleVisibility:function(t){e((0,p.queryOptionsToggleVisibility)(t))},queryOptionsExecute:function(n,a){e((0,p.queryOptionsExecute)(t.queryDocs,n,a))},queryOptionsApplyFilterOnlyDdocs:function(){e((0,p.queryOptionsFilterOnlyDdocs)())},queryOptionsRemoveFilterOnlyDdocs:function(){e((0,p.queryOptionsRemoveFilterOnlyDdocs)())},queryOptionsToggleStable:function(t){e((0,p.queryOptionsToggleStable)(t))},queryOptionsChangeUpdate:function(t){e((0,p.queryOptionsChangeUpdate)(t))},changeLayout:function(t){e((0,d.changeLayout)(t))},resetState:function(){e((0,d.resetState)())}}},b=(0,i.connect)(_,g)(c.default);t.default=b,b.propTypes={queryDocs:r.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonViewData=void 0;var o=n(99),r=n(131),i=a(r);t.getJsonViewData=function(e,t){var n=t.databaseName,a=t.docType,r=t.deleteEnabled,l=void 0===r||r,s=e.map(function(e){if("MangoIndex"===a)return{header:i.default.getIndexName(e),content:i.default.getIndexContent(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?(0,o.getDocUrl)("app",e.id,n):null,isDeletable:!!l&&"special"!==e.type,isEditable:!1};var t=(0,o.getDocId)(e,a);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:(0,o.getDocRev)(e,a),keylabel:"id",url:t?(0,o.getDocUrl)("app",t,n):null,isDeletable:l,isEditable:!0}});return{displayedFields:null,hasBulkDeletableDoc:(0,o.hasBulkDeletableDoc)(e,a),results:s}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTableViewData=t.getMetaDataTableView=t.getFullTableViewData=t.getNotSelectedFields=t.sortByTwoFields=t.getPrioritizedFields=t.getPseudoSchema=void 0;var o=n(40),r=a(o),i=n(99),l=t.getPseudoSchema=function(e){var t=[];e.forEach(function(e){Object.keys(e).forEach(function(e){t.push(e)})}),t=_.uniq(t);var n=t.indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},s=t.getPrioritizedFields=function(e,t){var n=e.reduce(function(e,t){return e=e.concat(Object.keys(t))},[]);return n=_.countBy(n,function(e){return e}),delete n.id,delete n._rev,n=Object.keys(n).reduce(function(e,t){return e.push([n[t],t]),e},[]),n=u(n),n=n.slice(0,t),n.reduce(function(e,t){return e.push(t[1]),e},[])},u=t.sortByTwoFields=function(e){var t=function e(t,n,a){return t[a]===n[a]?a<2?e(t,n,a+1):0:1===a?t[a]<n[a]?-1:1:t[a]<n[a]?1:-1};return e.sort(function(e,n){return t(e,n,0)})},c=t.getNotSelectedFields=function(e,t){return _.without.bind(void 0,t).apply(void 0,e)},d=t.getFullTableViewData=function(e,t){var n=null,a=t.selectedFieldsTableView,o=t.showAllFieldsTableView,r=void 0,i=e.map(function(e){return e.doc||e});r=l(i),a&&0===a.length&&(a=s(i,5));var u=_.without(r,"_attachments");return n=c(a,u),o&&(n=null,a=u),{schema:r,normalizedDocs:i,selectedFieldsTableView:a,notSelectedFieldsTableView:n}},f=t.getMetaDataTableView=function(e){var t=l(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}};t.getTableViewData=function(e,t){var n=r.default.LAYOUT_ORIENTATION.METADATA===t.selectedLayout,a=n?f(e):d(e,t),o=a.schema,l=a.normalizedDocs,s=a.selectedFieldsTableView,u=a.notSelectedFieldsTableView,c=l.map(function(e){return{content:e,id:(0,i.getDocId)(e,t.docType),_rev:(0,i.getDocRev)(e,t.docType),header:"",keylabel:"",url:e._id||e.id?(0,i.getDocUrl)("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&(0,i.isJSONDocBulkDeletable)(e,t.docType),isEditable:(0,i.isJSONDocEditable)(e,t.docType)}});return{notSelectedFields:u,selectedFields:s,hasBulkDeletableDoc:!!t.deleteEnabled&&(0,i.hasBulkDeletableDoc)(l,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(s).length,allFieldCount:_.without(o,"_attachments").length}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=n(20),p="The number of documents examined is high in proportion to the number of results returned. Consider adding an index to improve this.",h=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return t-=60*n,n+"minute, "+t+"seconds"}},{key:"getWarning",value:function(e,t){return e&&!t&&e.results_returned&&(e.total_docs_examined||e.total_quorum_docs_examined)/e.results_returned>10?p:t}},{key:"warningPopupComponent",value:function(e){if(e)return u.default.createElement("div",{className:"warning"},u.default.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=0!==t||n?"true":"false";return u.default.createElement("div",{"data-status":o},e+": ",u.default.createElement("span",{className:"value"},t.toLocaleString()," ",a))}},{key:"executionStatsPopupComponent",value:function(e){return e?u.default.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",e.execution_time_ms,!1,"ms")):null}},{key:"popup",value:function(e,t){return u.default.createElement(f.Popover,{id:"popover-execution-stats",title:"Execution Statistics"},u.default.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,a=this.getWarning(t,n),o=null;a&&(o=u.default.createElement("i",{className:"fonticon-attention-circled"}));var r=null;t?r=u.default.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):a&&(r=u.default.createElement("span",{className:"execution-stats-component"},"Warning"));var i=this.popup(t,a);return u.default.createElement(f.OverlayTrigger,{trigger:["hover","focus","click"],placement:"right",overlay:i},u.default.createElement("span",{className:"execution-stats"},o,r))}}]),t}(u.default.Component);t.default=h,h.propTypes={executionStats:d.default.object,warning:d.default.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}]),t}(c.Component);t.default=f,f.propTypes={explainPlan:u.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(77),h=a(p);n(134);var m=n(11),_=a(m),g=n(2),b=a(g),E=n(14),v=a(E),y=v.default.PaddedBorderedBox,O=v.default.CodeEditorPanel,N=v.default.ConfirmButton,S=_.default.helpers.getDocUrl,D=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:l({},this.props.fetchParams,{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this,t="#"+b.default.urls("mango","query-app",encodeURIComponent(this.props.databaseName));return f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.saveIndex(t)}},f.default.createElement("div",{className:"padded-box"},f.default.createElement(h.default,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onTemplateSelected(t)}})),f.default.createElement(y,null,f.default.createElement(O,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:S("MANGO_INDEX"),defaultCode:this.props.queryIndexCode})),f.default.createElement("div",{className:"padded-box"},f.default.createElement("div",{className:"control-group"},f.default.createElement(N,{text:"Create index",id:"create-index-btn",showIcon:!1}),f.default.createElement("a",{className:"edit-link",href:t},"edit query")))))}},{key:"render",value:function(){return this.editor()}},{key:"saveIndex",value:function(e){if(e.preventDefault(),this.editorHasErrors())return void b.default.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0});this.props.saveIndex({databaseName:this.props.databaseName,indexCode:this.getEditorValue(),fetchParams:this.props.fetchParams})}}]),t}(d.Component);t.default=D,D.propTypes={databaseName:c.default.string.isRequired,saveIndex:c.default.func.isRequired,queryIndexCode:c.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n(78),l=o(i),s=n(98),u=o(s),c=n(569),d=a(c),f=n(131),p=a(f),h=n(311),m=a(h),_=n(130),g=o(_),b=function(e,t){var n=e.mangoQuery,a=e.indexResults;return{description:t.description,databaseName:t.databaseName,queryIndexCode:p.default.formatCode(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:a.fetchParams}},E=function(e,t){return{saveIndex:function(t){e(m.default.saveIndex(t))},loadIndexList:function(n){var a=function(e){return g.fetchIndexes(t.databaseName,e)};e(l.fetchDocs(a,n.fetchParams,{}))},clearResults:function(){e(u.resetState())},loadIndexTemplates:function(){e(m.default.loadIndexTemplates())}}},v=(0,r.connect)(b,E)(d.default);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1),c=a(u),d=n(0),f=a(d),p=n(77),h=a(p);n(134);var m=n(11),_=a(m),g=n(2),b=a(g),E=n(14),v=a(E),y=n(567),O=a(y),N=v.default.PaddedBorderedBox,S=v.default.CodeEditorPanel,D=_.default.helpers.getDocUrl,T=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults()}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},f.default.createElement("div",{className:"padded-box"},f.default.createElement(h.default,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),f.default.createElement(N,null,f.default.createElement(S,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:D("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),f.default.createElement("div",{className:"padded-box"},f.default.createElement("div",{className:"control-group"},f.default.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),f.default.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),f.default.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),f.default.createElement("div",null,f.default.createElement(O.default,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?f.default.createElement("div",{className:"mango-editor-wrapper"},f.default.createElement(v.default.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(b.default.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t="#"+b.default.urls("mango","index-app",encodeURIComponent(this.props.databaseName));b.default.navigate(t)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,queryCode:JSON.parse(this.getEditorValue()),fetchParams:l({},this.props.fetchParams,{skip:0})}))}}]),t}(d.Component);t.default=T,T.propTypes={description:c.default.string.isRequired,editorTitle:c.default.string.isRequired,queryFindCode:c.default.string.isRequired,queryFindCodeChanged:c.default.bool,databaseName:c.default.string.isRequired,runExplainQuery:c.default.func.isRequired,manageIndexes:c.default.func.isRequired}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n(2),l=o(i),s=n(78),u=a(s),c=n(98),d=a(c),f=n(571),p=o(f),h=n(131),m=o(h),_=n(311),g=o(_),b=n(130),E=a(b),v=function(e){var t=e.availableIndexes;return t?t.filter(function(e){return-1!==["json","special"].indexOf(e.type)}):[]},y=function(e){var t=e.additionalIndexes;if(!t)return[];var n=l.default.getExtensions("mango:additionalIndexes")[0];return n?t.filter(function(e){return-1!==e.get("type").indexOf(n.type)}):void 0},O=function(e,t){var n=e.mangoQuery,a=e.indexResults;return{databaseName:t.databaseName,queryFindCode:m.default.formatCode(n.queryFindCode),queryFindCodeChanged:n.queryFindCodeChanged,availableIndexes:v(n),additionalIndexes:y(n),isLoading:n.isLoading,history:n.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:a.fetchParams,executionStats:a.executionStats,warning:a.warning}},N=function(e){return{loadQueryHistory:function(t){e(g.default.loadQueryHistory(t))},runExplainQuery:function(t){e(g.default.runExplainQuery(t))},runQuery:function(t){var n=function(e){return E.mangoQueryDocs(t.databaseName,t.queryCode,e)};e(g.default.hideQueryExplain()),e(g.default.newQueryFindCode(t)),e(u.fetchDocs(n,t.fetchParams,{}))},clearResults:function(){e(d.resetState())},manageIndexes:function(){e(g.default.hideQueryExplain())}}},S=(0,r.connect)(O,N)(p.default);t.default=S},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(572),r=a(o),i=n(570),l=a(i),s=n(568),u=a(s);t.default={MangoIndexEditorContainer:l.default,MangoQueryEditorContainer:r.default,ExplainPage:u.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments[1],n=t.options;switch(t.type){case d.default.MANGO_SET_DB:return r({},e,{database:n.database,historyKey:n.database?n.database.id:"default"});case d.default.MANGO_LOAD_QUERY_HISTORY:var a=S(n.databaseName);return r({},e,{history:a,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(a[0].value)});case d.default.MANGO_NEW_QUERY_FIND_CODE:return r({},e,{queryFindCode:n.queryCode,history:D(e,n.queryCode)});case d.default.MANGO_RESET:return r({},e,{getLoadingIndexes:n.isLoading});case d.default.MANGO_LOAD_INDEX_TEMPLATES:var o=y();return r({},e,{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case d.default.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return r({},e,{queryIndexCode:n.code,queryIndexTemplates:T(e,n.code,n.label)});case d.default.MANGO_SHOW_EXPLAIN_RESULTS:return r({},e,{explainPlan:n.explainPlan});case d.default.MANGO_HIDE_EXPLAIN_RESULTS:return r({},e,{explainPlan:!1});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var i=n(11),l=a(i),s=n(2),u=a(s),c=n(312),d=a(c),f=n(131),p=a(f),h=n(574),m=a(h),_={index:{fields:["_id"]},type:"json"},g={selector:{_id:{$gt:null}}},b=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:p.default.formatCode(t),className:"mango-select-entry"}},E=function(){return[b(g)]},v=function(){return m.default.INDEX_TEMPLATES.map(function(e){var t=b(e.code);return t.label=e.label||t.label,t})},y=function(){var e=u.default.getExtensions("mango:indexTemplates")[0];return e?e.filter(function(e){return!!e.code}).map(function(e){var t=b(e.code);return t.label=e.label||t.label,t}):v()},O=5,N={queryFindCode:g,queryIndexCode:_,queryFindCodeChanged:!1,explainPlan:void 0,history:E(),historyKey:"default",queryIndexTemplates:v()},S=function(e){var t=e+"_queryhistory",n=l.default.utils.localStorageGet(t);return n||(n=u.default.getExtensions("mango:queryHistory")[0],n?n.filter(function(e){return!!e.code}).map(function(e){var t=b(e.code);return t.label=e.label||t.label,t}):E())},D=function(e,t,n){var a=e.historyKey,o=e.history,r=o.slice(),i=b(t);i.label=n||i.label;var s=r.findIndex(function(e){return e.value===i.value});return s>-1&&r.splice(s,1),r.unshift(i),r.length>O&&r.splice(O,1),l.default.utils.localStorageSet(a,r),r},T=function(e,t,n){var a=e.queryIndexTemplates,o=a.slice(),r=b(t);r.label=n||r.label,o.find(function(e){return e.value===r.value})||o.push(r)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MangoLayoutContainer=t.MangoContent=t.MangoHeader=t.MangoFooter=t.RightHeader=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=o(u),d=n(23),f=n(11),p=o(f),h=n(127),m=n(102),_=n(573),g=o(_),b=n(130),E=a(b),v=n(309),y=o(v),O=n(310),N=o(O),S=n(308),D=o(S),T=n(2),C=o(T),w=n(40),A=o(w),I=t.RightHeader=function(e){var t=e.docURL,n=e.endpoint,a=c.default.createElement(D.default,{docURL:t,endpoint:n,includeQueryOptionsParams:!1});return c.default.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},c.default.createElement("div",{id:"right-header",className:"flex-body"}),a,c.default.createElement("div",{id:"notification-center-btn"},c.default.createElement(m.NotificationCenterButton,null)))},R=t.MangoFooter=function(e){var t=e.databaseName,n=e.fetchUrl,a=e.queryDocs;return c.default.createElement("div",{id:"footer"},c.default.createElement(N.default,{databaseName:t,fetchUrl:n,queryDocs:a}))},P=t.MangoHeader=function(e){var t=e.crumbs,n=e.docURL,a=e.endpoint;return c.default.createElement("div",{className:"header-wrapper flex-layout flex-row"},c.default.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},c.default.createElement(h.Breadcrumbs,{crumbs:t})),c.default.createElement(I,{docURL:n,endpoint:a}))};P.defaultProps={crumbs:[]};var L=t.MangoContent=function(e){var t=e.edit,n=e.designDocs,a=e.explainPlan,o=e.databaseName,r=e.fetchUrl,i=e.queryDocs,l=e.docType,s=t?c.default.createElement(g.default.MangoIndexEditorContainer,{description:p.default.i18n.en_US["mango-descripton-index-editor"],databaseName:o}):c.default.createElement(g.default.MangoQueryEditorContainer,{description:p.default.i18n.en_US["mango-descripton"],editorTitle:p.default.i18n.en_US["mango-title-editor"],additionalIndexesText:p.default.i18n.en_US["mango-additional-indexes-heading"],databaseName:o}),u=c.default.createElement(y.default,{fetchUrl:r,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:i,docType:l}),d=c.default.createElement(R,{databaseName:o,fetchUrl:r,queryDocs:i});return a&&(u=c.default.createElement(g.default.ExplainPage,{explainPlan:a}),d=null),c.default.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},c.default.createElement("div",{id:"left-content",className:"flex-body"},s),c.default.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},c.default.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},u),d))},k=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,a=e.docURL,o=e.crumbs,r=e.designDocs,i=e.fetchUrl,l=e.databaseName,s=e.queryFindCode,u=this.props.endpoint;this.props.explainPlan&&(u=C.default.urls("mango","explain-apiurl",encodeURIComponent(t)));var d=function(e){return E.mangoQueryDocs(l,s,e)},f=A.default.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY;return n&&(d=function(e){return E.fetchIndexes(l,e)},f=A.default.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX),c.default.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},c.default.createElement(P,{docURL:a,endpoint:u,crumbs:o}),c.default.createElement(L,{edit:n,designDocs:r,explainPlan:this.props.explainPlan,databaseName:l,fetchUrl:i,queryDocs:d,docType:f}))}}]),t}(u.Component),M=function(e){var t=e.mangoQuery;return{explainPlan:t.explainPlan,queryFindCode:t.queryFindCode}};t.MangoLayoutContainer=(0,d.connect)(M)(k)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return e.reduce(function(e,n){return n[0]!==t&&e.push(n[0]),e},[]).filter(function(e){return-1===n.indexOf(e)})}function r(e,t){return{docs:t.map(function(t){return{_id:e,_rev:t,_deleted:!0}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectRevAsWinner=t.toggleConfirmModal=t.chooseLeaves=t.toggleDiffView=t.initDiffEditor=void 0;var i=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(2),s=a(l),u=n(24),c=n(313),d=a(c),f=n(1065),p=a(f),h=n(831),m=a(h),_=n(827),g=a(_);m.default.plugin(g.default);var b=void 0,E=(t.initDiffEditor=function(e,t){return function(n){var a=s.default.urls("databaseBaseURL","apiurl",e);b=(0,m.default)(a),Promise.all([b.get(t),(0,p.default)(b,t)]).then(function(t){var a=i(t,2),r=a[0],l=a[1],s=o(l.paths,l.winner,Object.keys(l.deleted)),u=s[0];if(!u)return n(E(l,r,s,null,e));b.get(r._id,{rev:u}).then(function(t){n(E(l,r,s,t,e))})})}},function(e,t,n,a,o){return{type:d.default.REV_BROWSER_REV_TREE_LOADED,options:{tree:e,doc:t,conflictDoc:a,conflictingRevs:n,databaseName:o}}}),v=(t.toggleDiffView=function(e){return{type:d.default.REV_BROWSER_DIFF_ENABLE_DIFF_VIEW,options:{enableDiff:e}}},t.chooseLeaves=function(e,t){return function(n){b.get(e._id,{rev:t}).then(function(t){n(v(e,t))})}},function(e,t){return{type:d.default.REV_BROWSER_DIFF_DOCS_READY,options:{theirs:t,ours:e}}}),y=t.toggleConfirmModal=function(e,t){return{type:d.default.REV_BROWSER_SHOW_CONFIRM_MODAL,options:{show:e,docToWin:t}}};t.selectRevAsWinner=function(e,t,n,a){return function(i){var l=o(n,a,[]),c=r(t,l);(0,u.post)(s.default.urls("bulk_docs","server",e,""),c).then(function(t){if(t.error)return s.default.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});s.default.addNotification({msg:"Conflicts successfully solved.",clear:!0}),i(y(!1,null)),s.default.navigate(s.default.urls("allDocs","app",e,""))})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(10),p=(a(f),n(14)),h=a(p),m=n(20),_=h.default.ConfirmButton,g=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={checked:!1},n.close=n.close.bind(n),n.onDeleteConflicts=n.onDeleteConflicts.bind(n),n}return i(t,e),l(t,[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return d.default.createElement(m.Modal,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},d.default.createElement(m.Modal.Header,{closeButton:!1},d.default.createElement(m.Modal.Title,null,"Solve Conflicts")),d.default.createElement(m.Modal.Body,null,d.default.createElement("p",null,d.default.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),d.default.createElement(m.Modal.Footer,null,d.default.createElement("div",{style:{float:"left",marginTop:"10px"}},d.default.createElement("label",null,d.default.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),d.default.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),d.default.createElement(_,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}]),t}(d.default.Component);t.default=g,g.propTypes={onConfirm:u.default.func.isRequired,toggleConfirmModal:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(10),l=(a(i),n(1)),s=a(l),u=n(77),c=a(u),d=function(e){var t=e.onClick,n=e.forward,a=n?"fonticon-right-open":"fonticon-left-open",o={height:"20px",width:"11px",marginTop:"7px"};return r.default.createElement("div",{style:o,className:a,onClick:t})};d.propTypes={onClick:s.default.func.isRequired};var f=function(e){var t=e.options,n=e.selected,a=e.onRevisionClick,o=e.onBackwardClick,i=e.onForwardClick;return r.default.createElement("div",{className:"conflicting-revs-dropdown"},r.default.createElement(d,{backward:!0,onClick:o}),r.default.createElement("div",{style:{width:"345px",margin:"0 5px"}},r.default.createElement(c.default,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:a})),r.default.createElement(d,{forward:!0,onClick:i}))};f.propTypes={options:s.default.array.isRequired,selected:s.default.string.isRequired,onRevisionClick:s.default.func.isRequired,onBackwardClick:s.default.func.isRequired,onForwardClick:s.default.func.isRequired},t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(581)),f=a(d),p=n(583),h=a(p),m=n(582),_=a(m),g=n(20),b=n(169),E=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleDiffViewFalse=n.toggleDiffView.bind(n,!1),n.toggleDiffViewTrue=n.toggleDiffView.bind(n,!0),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,a=e.theirs,o=e.conflictingRevs,r=e.isDiffViewEnabled;return t.length||a?a&&o.length?u.default.createElement("div",{className:"revision-wrapper scrollable"},u.default.createElement(f.default,this.props),u.default.createElement("div",{className:"revision-view-controls"},u.default.createElement(g.ButtonGroup,{className:"two-sides-toggle-button"},u.default.createElement(g.Button,{style:{width:"120px"},className:r?"active":"",onClick:this.toggleDiffViewTrue},u.default.createElement("i",{className:"icon-columns"})," Diff"),u.default.createElement(g.Button,{style:{width:"120px"},className:r?"":"active",onClick:this.toggleDiffViewFalse},u.default.createElement("i",{className:"icon-file-text"})," Document"))),r?u.default.createElement(_.default,{ours:n,theirs:a}):u.default.createElement(h.default,{ours:n,theirs:a})):u.default.createElement("div",{style:{textAlign:"center",color:"#fff"}},u.default.createElement("h2",null,"No conflicts")):u.default.createElement(b.LoadLines,null)}}]),t}(u.default.Component);t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(1)),f=a(d),p=n(11),h=a(p),m=n(14),_=a(m),g=n(579),b=a(g),E=n(578),v=a(E),y=_.default.ConfirmButton,O="deleteConflictsHideModal",N=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showModal:!1},n.selectAsWinner=n.selectAsWinner.bind(n),n.onSelectAsWinnerClickOurs=n.onSelectAsWinnerClick.bind(n,n.props.ours),n.onSelectAsWinnerClickTheirs=n.onSelectAsWinnerClick.bind(n,n.props.theirs),n.onRevisionClick=n.onRevisionClick.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n.onBackwardClick=n.onBackwardClick.bind(n),n}return i(t,e),l(t,[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&h.default.utils.localStorageSet(O,!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){if(!0!==h.default.utils.localStorageGet(O))return void this.props.toggleConfirmModal(!0,e);this.selectAsWinner(e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return u.default.createElement("div",{className:"revision-browser-controls"},u.default.createElement(v.default,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),u.default.createElement("table",{style:{margin:"10px 60px",width:"100%"}},u.default.createElement("tbody",null,u.default.createElement("tr",{style:{height:"60px"}},u.default.createElement("td",{style:t},"Server-Selected Rev: "),u.default.createElement("td",{style:t},u.default.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},u.default.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),u.default.createElement("td",null,u.default.createElement(y,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),u.default.createElement("tr",{style:{height:"60px"}},u.default.createElement("td",{style:t},"Conflicting Revisions: "),u.default.createElement("td",{style:t},u.default.createElement(b.default,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),u.default.createElement("td",null,u.default.createElement(y,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}]),t}(u.default.Component);t.default=N,N.propTypes={tree:f.default.object.isRequired,ours:f.default.object.isRequired,conflictingRevs:f.default.array.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(10),l=(a(i),n(1)),s=a(l),u=n(816),c=a(u),d=n(815),f=a(d);n(1060);var p=function(e){var t=e.ours,n=e.theirs;if(!t||!n)return r.default.createElement("div",null);var a=c.default.diff(t,n),o=f.default.format(a,t);return r.default.createElement("div",{className:"revision-diff-area"},r.default.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))};p.propTypes={ours:s.default.object,theirs:s.default.object,currentRev:s.default.string},t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(10),d=(a(c),n(180)),f=a(d);n(650);var p=f.default.acequire("ace/ext/static_highlight");n(181);var h=f.default.acequire("ace/mode/json").Mode;n(182);var m=f.default.acequire("ace/theme/idle_fingers"),_=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new h,n=this.revLeftOurs,a=this.revRightTheirs,o=p.render(e(this.props.ours),t,m,0,!0);n.innerHTML=o.html;var r=p.render(e(this.props.theirs),t,m,0,!0);a.innerHTML=r.html}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,a=t.theirs;return n&&a?u.default.createElement("div",{className:"revision-split-area"},u.default.createElement("div",{"data-id":"ours",style:{width:"50%"}},u.default.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),u.default.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),u.default.createElement("div",{"data-id":"theirs",style:{width:"50%"}},u.default.createElement("div",{style:{marginBottom:"20px"}},a._rev),u.default.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):u.default.createElement("div",null)}}]),t}(u.default.Component);t.default=_},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(580),i=a(r),l=n(314),s=n(577),u=function(e,t){var n=e.revisionBrowser;return{docId:t.docId,tree:(0,l.getTree)(n),doc:(0,l.getDoc)(n),conflictDoc:(0,l.getConflictDoc)(n),conflictingRevs:(0,l.getConflictingRev)(n),databaseName:(0,l.getDatabaseName)(n),ours:(0,l.getOurs)(n),theirs:(0,l.getTheirs)(n),showConfirmModal:(0,l.getShowConfirmModal)(n),dropdownData:(0,l.getDropdownData)(n),isDiffViewEnabled:(0,l.getIsDiffViewEnabled)(n),docToWin:(0,l.getDocToWin)(n)}},c=function(e,t){return{toggleConfirmModal:function(t,n){e((0,s.toggleConfirmModal)(t,n))},initDiffEditor:function(){e((0,s.initDiffEditor)(t.databaseName,t.docId))},chooseLeaves:function(t,n){e((0,s.chooseLeaves)(t,n))},selectRevAsWinner:function(n,a,o){e((0,s.selectRevAsWinner)(t.databaseName,n,o.paths,a))},toggleDiffView:function(t){e((0,s.toggleDiffView)(t))}}},d=(0,o.connect)(u,c)(i.default);t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(79),u=a(s),c=n(96),d=a(c),f=n(298),p=a(f),h=n(545),m=a(h),_=n(584),g=a(_),b=n(39),E=l.default.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new d.default.Model({id:this.databaseName}),this.doc=new u.default.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/new":"codeEditor"},revisionBrowser:function(e,t){var n=l.default.urls("allDocs","app",l.default.url.encode(this.database.safeID())),a=l.default.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return r.default.createElement(b.DocEditorLayout,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:a,component:r.default.createElement(g.default,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditor:function(e,t){var n=l.default.urls("allDocs","app",l.default.url.encode(e)),a=[{name:e,link:n},{name:t||"New Document"}];return this.database=new d.default.Model({id:e}),t&&(this.doc=new u.default.Doc({_id:t},{database:this.database,fetchConflicts:!0})),p.default.initDocEditor({doc:this.doc,database:this.database}),r.default.createElement(b.DocEditorLayout,{crumbs:a,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),component:r.default.createElement(m.default.DocEditorController,{database:this.database,isNewDoc:!t})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}});t.default={DocEditorRouteObject:E}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(171),u=a(s),c=n(292),d=a(c),f=n(96),p=a(f),h=n(79),m=a(h),_=n(64),g=a(_),b=n(295),E=a(b),v=n(95),y=a(v),O=n(170),N=u.default.extend({routes:{"database/:database/_all_docs(:extra)":{route:"allDocs",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_changes":"changes"},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new p.default.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadata:function(e,t){var n=new m.default.DdocInfo({_id:"_design/"+t},{database:this.database});E.default.fetchDesignDocInfo({ddocName:t,designDocInfo:n}),g.default.selectNavItem("designDoc",{designDocName:t,designDocSection:"metadata"});var a=this.getCrumbs(this.database);return r.default.createElement(O.ViewsTabsSidebarLayout,{showEditView:!1,docURL:n.documentation(),endpoint:n.url("apiurl"),dbName:this.database.id,dropDownLinks:a,database:this.database})},allDocs:function(e,t){var n=this.createParams(t),a=n.docParams,o=l.default.urls("allDocsSanitized","server",e);this.database.buildAllDocs(a);var i=!!(a.startkey&&a.startkey.indexOf("_design")>-1),s="all-docs";i&&(s="design-docs");var u={navItem:s};g.default.selectNavItem(u.navItem),y.default.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=this.database.allDocs.urlRef("apiurl",{}),d=l.default.constants.DOC_URLS.GENERAL,f=this.getCrumbs(this.database);return r.default.createElement(O.DocsTabsSidebarLayout,{docURL:d,endpoint:c,dbName:this.database.id,dropDownLinks:f,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:i,selectedNavItem:u})},changes:function(){return d.default.initChanges({databaseName:this.database.id}),g.default.selectNavItem("changes"),r.default.createElement(O.ChangesSidebarLayout,{endpoint:l.default.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database})}});t.default=N},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(171),u=a(s),c=n(128),d=a(c),f=n(96),p=a(f),h=n(64),m=a(h),_=n(170),g=u.default.extend({routes:{"database/:database/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new p.default.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showView:function(e,t,n){n=n.replace(/\?.*$/,""),d.default.clearIndex(),d.default.fetchDesignDocsBeforeEdit({viewName:n,newView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+t});var a={navItem:"designDoc",params:{designDocName:t,designDocSection:"Views",indexName:n}};m.default.selectNavItem(a.navItem,a.params);var o=l.default.urls("view","server",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)),i=l.default.urls("view","apiurl",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n)),s=l.default.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return r.default.createElement(_.DocsTabsSidebarLayout,{docURL:s,endpoint:i,dbName:this.database.id,dropDownLinks:u,database:this.database,fetchUrl:o,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:a})},createView:function(e,t){var n=!0,a="new-doc";t&&(a="_design/"+t,n=!1),d.default.fetchDesignDocsBeforeEdit({viewName:"new-view",newView:!0,database:this.database,designDocs:this.designDocs,designDocId:a,newDesignDoc:n}),m.default.selectNavItem("");var o=this.getCrumbs(this.database);return r.default.createElement(_.ViewsTabsSidebarLayout,{showIncludeAllDocs:!0,docURL:l.default.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:o,database:this.database})},editView:function(e,t,n){d.default.fetchDesignDocsBeforeEdit({viewName:n,newView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+t}),m.default.selectNavItem("designDoc",{designDocName:t,designDocSection:"Views",indexName:n});var a=l.default.constants.DOC_URLS.GENERAL,o=l.default.urls("view","apiurl",e,t,n),i=this.getCrumbs(this.database);return r.default.createElement(_.ViewsTabsSidebarLayout,{showIncludeAllDocs:!0,docURL:a,endpoint:o,dbName:this.database.id,dropDownLinks:i,database:this.database})}});t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(11),l=a(i),s=n(2),u=a(s),c=n(97),d=a(c),f=n(132),p=a(f),h=n(64),m=a(h),_=n(576),g=u.default.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new d.default.Model({id:n})},findUsingIndex:function(e){m.default.selectNavItem("mango-query");var t=u.default.urls("allDocs","app",encodeURIComponent(this.databaseName),"?limit="+u.default.constants.DATABASES.DOCUMENT_LIMIT),n="/"+encodeURIComponent(this.databaseName)+"/_find",a=[{name:e,link:t},{name:l.default.i18n.en_US["mango-title-editor"]}],o=u.default.urls("mango","query-apiurl",encodeURIComponent(this.databaseName));return r.default.createElement(_.MangoLayoutContainer,{database:e,crumbs:a,docURL:u.default.constants.DOC_URLS.MANGO_SEARCH,endpoint:o,edit:!1,databaseName:this.databaseName,fetchUrl:n})},createIndex:function(e){var t=new p.default.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),n=u.default.urls("allDocs","app",encodeURIComponent(this.databaseName),"?limit="+u.default.constants.DATABASES.DOCUMENT_LIMIT),a=u.default.urls("mango","index-apiurl",encodeURIComponent(this.databaseName)),o=[{name:e,link:n},{name:l.default.i18n.en_US["mango-indexeditor-title"]}];return r.default.createElement(_.MangoLayoutContainer,{showIncludeAllDocs:!1,crumbs:o,docURL:u.default.constants.DOC_URLS.MANGO_INDEX,endpoint:a,edit:!0,designDocs:t,databaseName:this.databaseName})}});t.default={MangoIndexEditorAndQueryEditor:g}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(132),r=a(o),i=n(586),l=a(i),s=n(585),u=a(s),c=n(587),d=a(c),f=n(588),p=a(f);r.default.RouteObjects=[u.default.DocEditorRouteObject,l.default,d.default,p.default.MangoIndexEditorAndQueryEditor],t.default=r.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(315),i=a(r),l=n(101),s=a(l),u=function(e){return{type:s.default.SIDEBAR_UPDATED_DESIGN_DOCS,options:{designDocs:Array.isArray(e)?e:[]}}},c=function(){return{}},d=function(e){return{reduxUpdatedDesignDocList:function(t){e(u(t))}}},f=(0,o.connect)(c,d)(i.default.SidebarController);t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.default.SIDEBAR_UPDATED_DESIGN_DOCS:return r({},e,{designDocs:t.options.designDocs});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=o;var i=n(101),l=a(i),s={designDocs:[]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(102),d=n(601),f=a(d),p=n(173),h=a(p),m=n(317),_=a(m),g=n(7),b=a(g),E=_.default.navBarStore,v=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&h.default.setNavbarActiveLink(n.state.routerOptions.selectedHeader),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",function(t){e.setState({routerOptions:t}),h.default.setNavbarActiveLink(e.state.routerOptions.selectedHeader)}),this.props.router.on("trigger-update",function(){e.forceUpdate()})}},{key:"render",value:function(){return this.state.routerOptions?this.state.routerOptions.component||null:null}}]),t}(u.default.Component),y=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStoreState(),n}return i(t,e),l(t,[{key:"getStoreState",value:function(){return{isPrimaryNavMinimized:E.isMinimized()}}},{key:"componentDidMount",value:function(){E.on("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){var e=(0,b.default)({closeMenu:this.state.isPrimaryNavMinimized});return u.default.createElement("div",null,u.default.createElement(c.PermanentNotification,null),u.default.createElement("div",{id:"notifications"},u.default.createElement(c.NotificationController,null)),u.default.createElement("div",{role:"main",id:"main",className:e},u.default.createElement("div",{id:"app-container"},u.default.createElement("div",{className:"wrapper"},u.default.createElement("div",{className:"pusher"},u.default.createElement(v,{router:this.props.router})),u.default.createElement("div",{id:"primary-navbar"},u.default.createElement(f.default,null))))))}}]),t}(u.default.Component);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(173),u=a(s);n(789);var c=l.default.addon();c.initialize=function(){var e=new c.VersionInfo;e.fetch().then(function(){u.default.setNavbarVersionInfo(e.get("version"))})},c.VersionInfo=Backbone.Model.extend({url:function(){return r.default.host}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(7),u=a(s),c=function(e){var t=e.isMinimized,n=(0,u.default)("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return l.default.createElement("div",{className:"faux-navbar__brand"},l.default.createElement("div",{className:n}))};c.propTypes={isMinimized:r.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(7),u=a(s),c=function(e){var t=e.toggleMenu,n=e.isMinimized,a=(0,u.default)("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return l.default.createElement("div",{className:a,onClick:t},l.default.createElement("i",{className:"faux-navbar__burger__icon "+o}))};c.propTypes={toggleMenu:r.default.func.isRequired,isMinimized:r.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=function(e){var t=e.version;return t?l.default.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on  ",l.default.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),l.default.createElement("div",null,"v. ",t)):null};s.propTypes={version:r.default.string},t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(7),u=a(s),c=function(e){var t=e.isMinimized,n=(0,u.default)("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return l.default.createElement("a",{className:"faux-login__link",href:"#/login"},l.default.createElement("div",{className:n},l.default.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};c.propTypes={isMinimized:r.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(7),u=a(s),c=n(19),d=a(c),f=function(e){var t=e.username,n=e.isMinimized,a=(0,u.default)("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return l.default.createElement("a",{className:"faux-logout__link",href:"#/logout"},l.default.createElement("div",{className:a},l.default.createElement("span",{className:"faux-navbar__logout__text"},"Log Out")," ",n?null:l.default.createElement("span",{className:"faux-navbar__logout__username"},d.default.escape(t))))};f.propTypes={username:r.default.string,isMinimized:r.default.bool.isRequired},t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(596),p=a(f),h=n(595),m=a(h),_=n(600),g=a(_),b=n(594),E=a(b),v=n(598),y=a(v),O=n(597),N=a(O),S=n(173),D=a(S),T=n(7),C=a(T),w=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,a=t.isMinimized;return e.map(function(e,t){return d.default.createElement(g.default,{key:t,link:e,active:n,isMinimized:a})})}},{key:"toggleMenu",value:function(){D.default.toggleNavbarMenu()}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,a=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,r=e.activeLink,i=e.username;if(!e.isNavBarVisible)return null;var l=this.createLinks(this.props.navLinks),s=this.createLinks(this.props.bottomNavLinks),u=this.createLinks(this.props.footerNavLinks),c=(0,C.default)("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),f=o?d.default.createElement(N.default,{active:r,isMinimized:t}):d.default.createElement(y.default,{username:i,isMinimized:t});return d.default.createElement("div",{className:c},d.default.createElement("nav",null,d.default.createElement("div",{className:"faux-navbar__linkcontainer"},d.default.createElement(m.default,{isMinimized:t,toggleMenu:this.toggleMenu}),d.default.createElement("div",{className:"faux-navbar__links"},l,s),d.default.createElement("div",{className:"faux-navbar__footer"},d.default.createElement(E.default,{isMinimized:t}),d.default.createElement("div",null,u),d.default.createElement(p.default,{version:n}),a?f:null))))}}]),t}(c.Component);w.propTypes={activeLink:u.default.string,isMinimized:u.default.bool.isRequired,version:u.default.string,username:u.default.string,navLinks:u.default.array,bottomNavLinks:u.default.array,footerNavLinks:u.default.array,isNavBarVisible:u.default.bool,isLoginSectionVisible:u.default.bool.isRequired,isLoginVisibleInsteadOfLogout:u.default.bool.isRequired},t.default=w},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=n(7),u=a(s),c=function(e){var t=e.link,n=e.active,a=e.isMinimized,o=(0,u.default)("faux-navbar__link",{"faux-navbar__link--active":n===t.title},{"faux-navbar__link--inactive":n!==t.title},{"faux-navbar--wide":!a},{"faux-navbar--narrow":a}),r=a?null:l.default.createElement("span",{className:"faux-navbar__text"},t.title),i=null;return t.icon&&(i=l.default.createElement("i",{className:(0,u.default)(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),l.default.createElement("a",{className:o,href:t.href,target:t.target?"_blank":null,"data-bypass":t.target?"true":null},l.default.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},i,r))};c.propTypes={link:r.default.object.isRequired,active:r.default.string,isMinimized:r.default.bool.isRequired},t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(2),c=a(u),d=n(0),f=a(d),p=n(10),h=(a(p),n(317)),m=a(h),_=n(599),g=a(_),b=m.default.navBarStore,E=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{navLinks:b.getNavLinks(),bottomNavLinks:b.getBottomNavLinks(),footerNavLinks:b.getFooterNavLinks(),activeLink:b.getActiveLink(),version:b.getVersion(),isMinimized:b.isMinimized(),isNavBarVisible:b.isNavBarVisible(),isLoginSectionVisible:b.getIsLoginSectionVisible(),isLoginVisibleInsteadOfLogout:b.getIsLoginVisibleInsteadOfLogout()}},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){b.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){b.off("change",this.onChange)}},{key:"render",value:function(){var e=c.default.session.user(),t=e&&e.name?e.name:"";return f.default.createElement(g.default,l({},this.state,{username:t}))}}]),t}(f.default.Component);t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){h.default.dispatch({type:_.default.ADD_NOTIFICATION,options:{info:e}})}function r(){h.default.dispatch({type:_.default.SHOW_NOTIFICATION_CENTER})}function i(){h.default.dispatch({type:_.default.HIDE_NOTIFICATION_CENTER})}function l(){h.default.dispatch({type:_.default.CLEAR_ALL_NOTIFICATIONS})}function s(e){h.default.dispatch({type:_.default.CLEAR_SINGLE_NOTIFICATION,options:{notificationId:e}})}function u(e){h.default.dispatch({type:_.default.SELECT_NOTIFICATION_FILTER,options:{filter:e}})}function c(e){h.default.dispatch({type:_.default.START_HIDING_NOTIFICATION,options:{notificationId:e}})}function d(e){h.default.dispatch({type:_.default.HIDE_NOTIFICATION,options:{notificationId:e}})}function f(){h.default.dispatch({type:_.default.HIDE_ALL_NOTIFICATIONS})}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=a(p),m=n(318),_=a(m);t.default={addNotification:o,showNotificationCenter:r,hideNotificationCenter:i,clearAllNotifications:l,clearSingleNotification:s,selectNotificationFilter:u,startHidingNotification:c,hideNotification:d,hideAllVisibleNotifications:f}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(11),l=a(i),s=n(318),u=a(s),c=n(214),d=a(c),f={},p=0,h=["success","error","info"];f.NotificationStore=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._notifications=[],this._notificationCenterVisible=!1,this._selectedNotificationFilter="all",this._permanentNotificationVisible=!1,this._permanentNotificationMessage=""},isNotificationCenterVisible:function(){return this._notificationCenterVisible},isPermanentNotificationVisible:function(){return this._permanentNotificationVisible},addNotification:function(e){if(_.isEmpty(e.type)||-1===_.indexOf(h,e.type))return void console.warn("Invalid message type: ",e);e.notificationId=++p,e.cleanMsg=l.default.utils.stripHTML(e.msg),e.time=(0,d.default)(),e.visible=!0,e.isHiding=!1,e.clear&&this._notifications.forEach(function(e){e.visible&&(e.isHiding=!0)}),this._notifications.unshift(e)},getNotifications:function(){return this._notifications},getPermanentNotificationMessage:function(){return this._permanentNotificationMessage},setPermanentNotificationMessage:function(e){this._permanentNotificationMessage=e},clearNotification:function(e){this._notifications=_.without(this._notifications,_.findWhere(this._notifications,{notificationId:e}))},clearNotifications:function(){this._notifications=[]},hideNotification:function(e){var t=_.findWhere(this._notifications,{notificationId:e});t.visible=!1,t.isHiding=!1},hideAllNotifications:function(){this._notifications.forEach(function(e){e.visible&&(e.isHiding=!0)})},startHidingNotification:function(e){_.findWhere(this._notifications,{notificationId:e}).isHiding=!0},getNotificationFilter:function(){return this._selectedNotificationFilter},setNotificationFilter:function(e){if((_.isEmpty(e)||-1===_.indexOf(h,e))&&"all"!==e)return void console.warn("Invalid notification filter: ",e);this._selectedNotificationFilter=e},dispatch:function(e){switch(e.type){case u.default.ADD_NOTIFICATION:this.addNotification(e.options.info);break;case u.default.CLEAR_ALL_NOTIFICATIONS:this.clearNotifications();break;case u.default.CLEAR_SINGLE_NOTIFICATION:this.clearNotification(e.options.notificationId);break;case u.default.START_HIDING_NOTIFICATION:this.startHidingNotification(e.options.notificationId);break;case u.default.HIDE_NOTIFICATION:this.hideNotification(e.options.notificationId);break;case u.default.HIDE_ALL_NOTIFICATIONS:this.hideAllNotifications();break;case u.default.SHOW_NOTIFICATION_CENTER:this._notificationCenterVisible=!0;break;case u.default.HIDE_NOTIFICATION_CENTER:this._notificationCenterVisible=!1;break;case u.default.SELECT_NOTIFICATION_FILTER:this.setNotificationFilter(e.options.filter);break;case u.default.SHOW_PERMANENT_NOTIFICATION:this._permanentNotificationVisible=!0,this.setPermanentNotificationMessage(e.options.msg);break;case u.default.HIDE_PERMANENT_NOTIFICATION:this._permanentNotificationVisible=!1;break;default:return}this.triggerChange()}}),f.notificationStore=new f.NotificationStore,f.notificationStore.dispatchToken=r.default.dispatcher.register(f.notificationStore.dispatch),t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(611),l=a(i),s=n(322),u=a(s);n(790),l.default.initialize=function(){},r.default.addReducers({permissions:u.default}),t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(607),p=a(f),h=n(319),m=n(169),_=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.url;t((0,h.fetchPermissions)(n))}},{key:"render",value:function(){return this.props.isLoading?d.default.createElement(m.LoadLines,null):d.default.createElement(p.default,this.props)}}]),t}(c.Component);t.default=_,_.propTypes={isLoading:u.default.bool.isRequired,adminRoles:u.default.array.isRequired,adminNames:u.default.array.isRequired,memberNames:u.default.array.isRequired,memberRoles:u.default.array.isRequired,security:u.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),i=n(0),l=a(i),s=function(e){var t=e.removeItem,n=e.section,a=e.type,o=e.value;return l.default.createElement("li",{className:"permissions__entry"},l.default.createElement("span",null,o),l.default.createElement("button",{onClick:function(){return t(n,a,o)},type:"button",className:"pull-right close"},"×"))};s.propTypes={value:r.default.string.isRequired,removeItem:r.default.func.isRequired},t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(1),d=a(c),f=n(0),p=a(f),h=n(608),m=a(h),_=n(319),g=n(321),b=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return i(t,e),l(t,[{key:"addItem",value:function(e){var t=e.section,n=e.type,a=e.value;if((0,g.isValueAlreadySet)(this.props.security,t,n,a))return u.default.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch((0,_.updatePermission)(this.props.url,this.props.security,t,n,a))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch((0,_.deletePermission)(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,a=e.memberRoles,o=e.memberNames;return p.default.createElement("div",{className:"permissions-page flex-body"},p.default.createElement("div",null,p.default.createElement(m.default,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),p.default.createElement(m.default,{roles:a,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}]),t}(f.Component);t.default=b,b.propTypes={security:d.default.object.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(2),d=a(c),f=n(11),p=a(f),h=n(19),m=a(h),_=n(606),g=a(_),b=p.default.helpers.getDocUrl,E=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={newRole:"",newName:""},a.getHelp=function(){return a.props.section,"Database members can access the database. If no members are defined, the database is public. "},a.isEmptyValue=function(e,t){return!!m.default.isEmpty(e)&&(d.default.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)},a.addNames=function(e){e.preventDefault(),a.isEmptyValue(a.state.newName,"names")||(a.props.addItem({type:"names",section:a.props.section,value:a.state.newName}),a.setState({newName:""}))},a.addRoles=function(e){e.preventDefault(),a.isEmptyValue(a.state.newRole,"roles")||(a.props.addItem({type:"roles",section:a.props.section,value:a.state.newRole}),a.setState({newRole:""}))},a.getItems=function(e,t){return e.map(function(e,n){return u.default.createElement(g.default,{key:n,value:e,section:a.props.section,type:t,removeItem:a.props.removeItem})})},a.getNames=function(){return a.getItems(a.props.names,"names")},a.getRoles=function(){return a.getItems(a.props.roles,"roles")},a.nameChange=function(e){a.setState({newName:e.target.value})},a.roleChange=function(e){a.setState({newRole:e.target.value})},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.section;return u.default.createElement("div",{className:"permissions__"+e},u.default.createElement("header",{className:"page-header"},u.default.createElement("h3",null,e),u.default.createElement("p",{className:"help"},this.getHelp(),u.default.createElement("a",{className:"help-link","data-bypass":"true",href:b("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},u.default.createElement("i",{className:"icon-question-sign"})))),u.default.createElement("div",{className:"row-fluid"},u.default.createElement("div",{className:"span6"},u.default.createElement("header",null,u.default.createElement("h4",null,"Users"),u.default.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),u.default.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},u.default.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),u.default.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),u.default.createElement("div",{className:"span6"},u.default.createElement("header",null,u.default.createElement("h4",null,"Roles"),u.default.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),u.default.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},u.default.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),u.default.createElement("button",{type:"submit",className:"btn btn-primary"},u.default.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),u.default.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}]),t}(u.default.Component);E.defaultProps={names:[],roles:[]},t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(605),i=a(r),l=n(322),s=function(e){var t=e.permissions;return{isLoading:(0,l.getIsLoading)(t),adminRoles:(0,l.getAdminRoles)(t),adminNames:(0,l.getAdminNames)(t),memberNames:(0,l.getMemberNames)(t),memberRoles:(0,l.getMemberRoles)(t),security:(0,l.getSecurity)(t)}};t.default=(0,o.connect)(s)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsLayout=void 0;var o=n(0),r=a(o),i=n(170),l=n(609),s=a(l),u=n(315),c=a(u),d=t.PermissionsLayout=function(e){var t=e.docURL,n=e.database,a=e.endpoint,o=e.dbName,l=e.dropDownLinks;return r.default.createElement("div",{id:"dashboard",className:"with-sidebar"},r.default.createElement(i.TabsSidebarHeader,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:a,dbName:o,dropDownLinks:l,database:n}),r.default.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},r.default.createElement("aside",{id:"sidebar-content",className:"scrollable"},r.default.createElement(c.default.SidebarController,null)),r.default.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},r.default.createElement(s.default,{url:a}))))};t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(2),l=a(i),s=n(96),u=a(s),c=n(171),d=a(c),f=n(610),p=a(f),h=n(0),m=a(h),_=d.default.extend({roles:["fx_loggedIn"],routes:{"database/:database/permissions":"permissions"},initialize:function(){r.default.getParams().include_docs=!0},permissions:function(e){this.database=new u.default.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var t=[{name:this.database.id,link:u.default.databaseUrl(e)},{name:"Permissions"}],n=encodeURIComponent(e),a=l.default.urls("permissions","server",n);return m.default.createElement(p.default,{docURL:l.default.constants.DOC_URLS.DB_PERMISSION,endpoint:a,dbName:this.database.id,dropDownLinks:t,database:this.database})}}),g={RouteObjects:[_]};t.default=g},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(18),l=a(i),s=n(624),u=a(s);n(791);var c=n(323),d=n(327),f=a(d);u.default.initialize=function(){r.default.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),r.default.session.isAuthenticated().then(function(){(0,c.checkForNewApi)()})},r.default.addReducers({replication:f.default}),r.default.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return l.default.getApiUrl("/_replicator")}}),t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(133),p=n(326),h=n(325),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1,unconfirmedDeleteDocId:null},n}return i(t,e),l(t,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find(function(t){return t._id===e.state.unconfirmedDeleteDocId});t.push(n)}else t=this.props.docs.filter(function(e){return e.selected});this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter(function(e){return e.selected}).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,a=e.changeActivitySort,o=e.docs,r=e.filter,i=e.selectAllDocs,l=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,c=this.state.modalVisible;return d.default.createElement("div",{className:"replication__activity"},d.default.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),d.default.createElement(h.ReplicationHeader,{filter:r,onFilterChange:t}),d.default.createElement(p.ReplicationTable,{someDocsSelected:l,allDocsSelected:s,selectAllDocs:i,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:a}),d.default.createElement(f.DeleteModal,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:c,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),t}(d.default.Component);t.default=m,m.propTypes={docs:u.default.array.isRequired,filter:u.default.string.isRequired,selectAllDocs:u.default.func.isRequired,allDocsSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,onFilterChange:u.default.func.isRequired,deleteDocs:u.default.func.isRequired,activitySort:u.default.object.isRequired,changeActivitySort:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserPasswordAuthInput=t.ReplicationAuth=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(2),d=a(c),f=n(11),p=a(f),h=n(0),m=a(h),_=n(56),g=a(_),b=n(14),E=a(b),v=E.default.StyledSelect,y=t.ReplicationAuth=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getAuthOptions=function(){var e=p.default.i18n.en_US["replication-user-password-auth-label"],t=[{value:g.default.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:g.default.REPLICATION_AUTH_METHOD.BASIC,label:e}];return n.customAuths.map(function(e){t.push({value:e.typeValue,label:e.typeLabel})}),t.map(function(e){return m.default.createElement("option",{value:e.value,key:e.value},e.label)})},n.onChangeType=n.onChangeType.bind(n),n.onChangeValue=n.onChangeValue.bind(n),n.customAuths=d.default.getExtensions("Replication:Auth"),n.customAuths||(n.customAuths=[]),n.customAuthTypes=n.customAuths.map(function(e){return e.typeValue}),n}return i(t,e),l(t,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==g.default.REPLICATION_AUTH_METHOD.BASIC)return m.default.createElement(O,{onChange:this.onChangeValue,auth:e,authId:n});var a=this.customAuths.filter(function(e){return e.typeValue===t});if(a&&a.length>0){var o=a[0].inputComponent;return m.default.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,a=t.authType,o=t.authId;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"replication__section"},m.default.createElement("div",{className:"replication__input-label"},"Authentication:"),m.default.createElement("div",{className:"replication__input-select"},m.default.createElement(v,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:a}))),this.getAuthInputFields(n,a))}}]),t}(m.default.Component);y.propTypes={authId:u.default.string.isRequired,authType:u.default.string.isRequired,credentials:u.default.object,onChangeAuth:u.default.func.isRequired,onChangeAuthType:u.default.func.isRequired},y.defaultProps={authType:g.default.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var O=t.UserPasswordAuthInput=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updatePassword=n.updatePassword.bind(n),n.updateUsername=n.updateUsername.bind(n),n.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},n}return i(t,e),l(t,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=p.default.i18n.en_US["replication-username-input-placeholder"],n=p.default.i18n.en_US["replication-password-input-placeholder"],a=this.props.authId;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"replication__section"},m.default.createElement("div",{className:"replication__input-label"}),m.default.createElement("div",null,m.default.createElement("input",{id:a+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),m.default.createElement("div",{className:"replication__section"},m.default.createElement("div",{className:"replication__input-label"}),m.default.createElement("div",null,m.default.createElement("input",{id:a+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),t}(m.default.Component);O.propTypes={auth:u.default.object.isRequired,onChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(178),u=a(s),c=n(0),d=a(c),f=n(18),p=a(f),h=n(24),m=n(2),g=a(m),b=n(618),E=n(620),v=n(616),y=n(619),O=n(614),N=n(56),S=a(N),D=n(133),T=n(19),C=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submit=n.submit.bind(n),n.checkAuth=n.checkAuth.bind(n),n.runReplicationChecks=n.runReplicationChecks.bind(n),n}return i(t,e),l(t,[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,a=t.replicationTarget,o=t.sourceAuthType,r=t.targetAuthType,i=t.sourceAuth,l=t.targetAuth,s=n===S.default.REPLICATION_SOURCE.LOCAL,u=a===S.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||a===S.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!g.default.session.isAdminParty()){if(s&&o===S.default.REPLICATION_AUTH_METHOD.NO_AUTH)return void g.default.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(u&&r===S.default.REPLICATION_AUTH_METHOD.NO_AUTH)return void g.default.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,i,"source",s).then(function(){e.checkLocalAccountCredentials(r,l,"target",u).then(function(){e.submit()},function(){})},function(){})}},{key:"checkLocalAccountCredentials",value:function(e,t,n,a){if(e!==S.default.REPLICATION_AUTH_METHOD.BASIC||!a)return g.default.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing "+n+" credentials.";return g.default.addNotification({msg:o,type:"error",clear:!0}),g.default.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then(function(e){if(e.error)throw e;return!0}).catch(function(e){throw g.default.addNotification({msg:"Your username or password for "+n+" database is incorrect.",type:"error",clear:!0}),e})}},{key:"checkCredentials",value:function(e,t){return(0,h.json)(p.default.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+u.default.encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,a=t.replicationDocName;(0,t.checkReplicationDocID)(a).then(function(t){if(t)return void n();e.checkAuth()})}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;if(this.checkSourceTargetDatabases())return e?void this.checkReplicationDocID():void this.checkAuth()}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,a=e.replicationTarget,o=e.localTarget,r=e.localSource,i=e.databases;if(a===S.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(i,o))return g.default.addNotification({msg:"The <code>"+o+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(a===S.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE||a===S.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var l="";if(/\s/.test(o)?l="The target database may not contain any spaces.":/^_/.test(o)&&(l="The target database may not start with an underscore."),l)return g.default.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if(!(0,T.isEmpty)(n)){var s="";try{""===new URL(n).pathname.slice(1)&&(s="Invalid source database URL. Database name is missing.")}catch(e){s="Invalid source database URL."}if(s)return g.default.addNotification({msg:s,type:"error",escape:!1,clear:!0}),!1}if(!(0,T.isEmpty)(t)){var u="";try{""===new URL(t).pathname.slice(1)&&(u="Invalid target database URL. Database name is missing.")}catch(e){u="Invalid target database URL."}if(u)return g.default.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!(0,T.isEmpty)(t)||r===o&&!(0,T.isEmpty)(r))||(g.default.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e=this.props,t=e.replicationTarget,n=e.replicationSource,a=e.replicationType,o=e.replicationDocName,r=e.remoteTarget,i=e.remoteSource,l=e.localTarget,s=e.localSource,u=e.sourceAuthType,c=e.sourceAuth,d=e.targetAuthType,f=e.targetAuth,p=void 0;if(o){var h=this.props.docs.find(function(e){return e._id===o});h&&(p=h._rev)}this.props.replicate({replicationTarget:t,replicationSource:n,replicationType:a,replicationDocName:o,localTarget:l,localSource:s,remoteTarget:r,remoteSource:i,_rev:p,sourceAuthType:u,sourceAuth:c,targetAuthType:d,targetAuth:f})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,a=e.replicationSource,o=e.replicationTarget,r=e.localTargetKnown,i=e.localTarget;return!(e.submittedNoChange||!a||!o||a===S.default.REPLICATION_SOURCE.LOCAL&&!n||o===S.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!r||o===S.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!i||a===S.default.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,a=e.replicationType,o=e.replicationDocName,r=e.conflictModalVisible,i=e.databases,l=e.localSource,s=e.remoteSource,u=e.remoteTarget,c=e.localTarget,f=e.updateFormField,p=e.clearReplicationForm,h=e.sourceAuthType,m=e.sourceAuth,_=e.targetAuthType,g=e.targetAuth;return d.default.createElement("div",{style:{paddingBottom:20}},d.default.createElement(b.ReplicationSource,{replicationSource:t,localSource:l,databases:i,remoteSource:s,onSourceSelect:f("replicationSource"),onRemoteSourceChange:f("remoteSource"),onLocalSourceChange:f("localSource")}),d.default.createElement(O.ReplicationAuth,{credentials:m,authType:h,onChangeAuthType:f("sourceAuthType"),onChangeAuth:f("sourceAuth"),authId:"replication-source-auth"}),d.default.createElement("hr",{className:"replication__seperator",size:"1"}),d.default.createElement(E.ReplicationTarget,{replicationTarget:n,onTargetChange:f("replicationTarget"),databases:i,localTarget:c,remoteTarget:u,onRemoteTargetChange:f("remoteTarget"),onLocalTargetChange:f("localTarget")}),d.default.createElement(O.ReplicationAuth,{credentials:g,authType:_,onChangeAuthType:f("targetAuthType"),onChangeAuth:f("targetAuth"),authId:"replication-target-auth"}),d.default.createElement("hr",{className:"replication__seperator",size:"1"}),d.default.createElement(v.ReplicationOptions,{replicationType:a,replicationDocName:o,onDocChange:f("replicationDocName"),onTypeChange:f("replicationType")}),d.default.createElement(y.ReplicationSubmit,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:p}),d.default.createElement(D.ConflictModal,{visible:r,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}]),t}(d.default.Component);t.default=C},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationOptions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(56),p=a(f),h=n(14),m=a(h),_=m.default.StyledSelect,g=function(){return[{value:p.default.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:p.default.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},b=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication type:"),d.default.createElement("div",{className:"replication__input-select"},d.default.createElement(_,{selectContent:g(),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};b.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var E=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Replication document:"),d.default.createElement("div",{className:"replication__doc-name"},d.default.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),d.default.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};E.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired},(t.ReplicationOptions=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,a=e.onDocChange,o=e.onTypeChange;return d.default.createElement("div",null,d.default.createElement("h3",null,"Options"),d.default.createElement(b,{onChange:o,value:t}),d.default.createElement(E,{onChange:a,value:n}))}}]),t}(d.default.Component)).propTypes={replicationDocName:u.default.string.isRequired,replicationType:u.default.string.isRequired,onDocChange:u.default.func.isRequired,onTypeChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(133),p=n(326),h=n(325),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalVisible:!1,unconfirmedDeleteDocId:null},n}return i(t,e),l(t,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find(function(t){return t._id===e.state.unconfirmedDeleteDocId});t.push(n)}else t=this.props.docs.filter(function(e){return e.selected});this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter(function(e){return e.selected}).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,a=e.changeActivitySort,o=e.docs,r=e.filter,i=e.selectAllDocs,l=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,c=this.state.modalVisible;return d.default.createElement("div",{className:"replication__activity"},d.default.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),d.default.createElement(h.ReplicationHeader,{filter:r,onFilterChange:t}),d.default.createElement(p.ReplicationTable,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:l,allDocsSelected:s,selectAllDocs:i,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:a}),d.default.createElement(f.DeleteModal,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:c,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),t}(d.default.Component);t.default=m,m.propTypes={docs:u.default.array.isRequired,filter:u.default.string.isRequired,selectAllDocs:u.default.func.isRequired,allDocsSelected:u.default.bool.isRequired,someDocsSelected:u.default.bool.isRequired,selectDoc:u.default.func.isRequired,onFilterChange:u.default.func.isRequired,deleteDocs:u.default.func.isRequired,activitySort:u.default.object.isRequired,changeActivitySort:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationSource=t.ReplicationSourceSelect=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(56),p=a(f),h=n(14),m=a(h),_=n(77),g=a(_),b=m.default.StyledSelect,E=function(e){var t=e.onChange,n=e.value;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Database URL:"),d.default.createElement("div",{className:""},d.default.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};E.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var v=function(e){var t=e.value,n=e.onChange,a=e.databases,o=a.map(function(e){return{value:e,label:e}});return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Name:"),d.default.createElement("div",{className:"replication__input-react-select"},d.default.createElement(g.default,{name:"source-name",value:t,placeholder:"Database name",options:o,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};v.propTypes={value:u.default.string.isRequired,databases:u.default.array.isRequired,onChange:u.default.func.isRequired};var y=function(e){var t=e.replicationSource,n=e.databases,a=e.localSource,o=e.remoteSource,r=e.onChangeRemote,i=e.onChangeLocal;return t===p.default.REPLICATION_SOURCE.LOCAL?d.default.createElement(v,{value:a,databases:n,onChange:i}):d.default.createElement(E,{value:o,onChange:r})};y.propTypes={replicationSource:u.default.string.isRequired,databases:u.default.array.isRequired,localSource:u.default.string.isRequired,remoteSource:u.default.string.isRequired,onChangeRemote:u.default.func.isRequired,onChangeLocal:u.default.func.isRequired};var O=function(){return[{value:"",label:"Select source type"},{value:p.default.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:p.default.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},N=t.ReplicationSourceSelect=function(e){var t=e.onChange,n=e.value;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Type:"),d.default.createElement("div",{className:"replication__input-select"},d.default.createElement(b,{selectContent:O(),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};N.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired},(t.ReplicationSource=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,a=e.onLocalSourceChange,o=e.onRemoteSourceChange,r=e.remoteSource,i=e.databases;return t?d.default.createElement(y,{replicationSource:t,databases:i,localSource:n,remoteSource:r,onChangeLocal:a,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return d.default.createElement("div",null,d.default.createElement("h3",null,"Source"),d.default.createElement(N,{onChange:n,value:t}),this.getReplicationSourceRow())}}]),t}(d.default.Component)).propTypes={replicationSource:u.default.string.isRequired,localSource:u.default.string.isRequired,remoteSource:u.default.string.isRequired,databases:u.default.array.isRequired,onLocalSourceChange:u.default.func.isRequired,onRemoteSourceChange:u.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationSubmit=void 0;var o=n(1),r=a(o),i=n(0),l=a(i),s=n(14),u=a(s),c=u.default.ConfirmButton;(t.ReplicationSubmit=function(e){var t=e.onClear,n=e.disabled,a=e.onClick;return l.default.createElement("div",{className:"replication__button-row"},l.default.createElement(c,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:a,disabled:n}),l.default.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))}).propTypes={disabled:r.default.bool.isRequired,onClick:r.default.func.isRequired,onClear:r.default.func.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicationTarget=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(56),p=a(f),h=n(14),m=a(h),_=n(77),g=a(_),b=m.default.StyledSelect,E=function(){return[{value:"",label:"Select target type"},{value:p.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:p.default.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map(function(e){return d.default.createElement("option",{value:e.value,key:e.value},e.label)})},v=function(e){var t=e.value,n=e.onChange;return d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},"Type:"),d.default.createElement("div",{id:"replication-target",className:"replication__input-select"},d.default.createElement(b,{selectContent:E(),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};v.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var y=function(e){var t=e.onChange,n=e.value;return d.default.createElement("div",null,d.default.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};y.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var O=function(e){var t=e.onChange,n=e.value,a=e.databases,o=a.map(function(e){return{value:e,label:e}});return d.default.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},d.default.createElement(g.default,{value:n,options:o,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};O.propTypes={value:u.default.string.isRequired,databases:u.default.array.isRequired,onChange:u.default.func.isRequired};var N=function(e){var t=e.onChange,n=e.value;return d.default.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};N.propTypes={value:u.default.string.isRequired,onChange:u.default.func.isRequired};var S=function(e){var t=e.replicationTarget,n=e.onLocalTargetChange,a=e.onRemoteTargetChange,o=e.localTarget,r=e.remoteTarget,i=e.databases;if(!t)return null;var l=void 0;t===p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(s="New database:",l=d.default.createElement(N,{value:o,onChange:n})):l=t===p.default.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?d.default.createElement(O,{onChange:n,databases:i,value:o}):d.default.createElement(y,{onChange:a,value:r,newRemote:p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE===t});var s="Name:";return t!==p.default.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&t!==p.default.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(s="New database:"),d.default.createElement("div",{className:"replication__section"},d.default.createElement("div",{className:"replication__input-label"},s),d.default.createElement("div",null,l))};S.propTypes={databases:u.default.array.isRequired,onLocalTargetChange:u.default.func.isRequired,onRemoteTargetChange:u.default.func.isRequired,remoteTarget:u.default.string.isRequired,localTarget:u.default.string.isRequired,replicationTarget:u.default.string.isRequired},(t.ReplicationTarget=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,a=e.onTargetChange,o=e.databases,r=e.localTarget,i=e.onRemoteTargetChange,l=e.remoteTarget;return d.default.createElement("div",null,d.default.createElement("h3",null,"Target"),d.default.createElement(v,{value:t,onChange:a}),d.default.createElement(S,{remoteTarget:l,replicationTarget:t,databases:o,localTarget:r,onRemoteTargetChange:i,onLocalTargetChange:n}))}}]),t}(d.default.Component)).propTypes={databases:u.default.array.isRequired,onTargetChange:u.default.func.isRequired,onLocalTargetChange:u.default.func.isRequired,onRemoteTargetChange:u.default.func.isRequired,remoteTarget:u.default.string.isRequired,localTarget:u.default.string.isRequired,replicationTarget:u.default.string.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(622),i=a(r),l=n(323),s=n(327),u=function(e,t){var n=e.replication;return{routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(0,s.isLoading)(n),activityLoading:(0,s.isActivityLoading)(n),databases:(0,s.getDatabases)(n),replicationSource:(0,s.getReplicationSource)(n),localSource:(0,s.getLocalSource)(n),localSourceKnown:(0,s.isLocalSourceKnown)(n),remoteSource:(0,s.getRemoteSource)(n),sourceAuthType:n.sourceAuthType,sourceAuth:n.sourceAuth,replicationTarget:(0,s.getReplicationTarget)(n),localTarget:(0,s.getLocalTarget)(n),localTargetKnown:(0,s.isLocalTargetKnown)(n),remoteTarget:(0,s.getRemoteTarget)(n),targetAuthType:n.targetAuthType,targetAuth:n.targetAuth,isConflictModalVisible:(0,s.isConflictModalVisible)(n),replicationType:(0,s.getReplicationType)(n),replicationDocName:(0,s.getReplicationDocName)(n),submittedNoChange:(0,s.getSubmittedNoChange)(n),statusDocs:(0,s.getFilteredReplicationStatus)(n),statusFilter:(0,s.getStatusFilter)(n),replicateFilter:(0,s.getReplicateFilter)(n),allDocsSelected:(0,s.getAllDocsSelected)(n),someDocsSelected:(0,s.getSomeDocsSelected)(n),username:(0,s.getUsername)(n),password:(0,s.getPassword)(n),activitySort:(0,s.getActivitySort)(n),checkingApi:(0,s.getCheckingApi)(n),supportNewApi:(0,s.supportNewApi)(n),replicateLoading:(0,s.isReplicateInfoLoading)(n),replicateInfo:(0,s.getReplicateInfo)(n),allReplicateSelected:(0,s.getAllReplicateSelected)(n),someReplicateSelected:(0,s.someReplicateSelected)(n)}},c=function(e){return{checkForNewApi:function(){return e((0,l.checkForNewApi)())},updateFormField:function(t){return function(n){e((0,l.updateFormField)(t,n))}},clearReplicationForm:function(){return e((0,l.clearReplicationForm)())},initReplicator:function(t){return e((0,l.initReplicator)(t))},getReplicationActivity:function(){return e((0,l.getReplicationActivity)())},getReplicateActivity:function(){return e((0,l.getReplicateActivity)())},getReplicationStateFrom:function(t){return e((0,l.getReplicationStateFrom)(t))},getDatabasesList:function(){return e((0,l.getDatabasesList)())},replicate:function(t){return e((0,l.replicate)(t))},showConflictModal:function(){return e((0,l.showConflictModal)())},hideConflictModal:function(){return e((0,l.hideConflictModal)())},filterReplicate:function(t){return e((0,l.filterReplicate)(t))},filterDocs:function(t){return e((0,l.filterDocs)(t))},selectDoc:function(t){return e((0,l.selectDoc)(t))},deleteDocs:function(t){return e((0,l.deleteDocs)(t))},selectAllDocs:function(){return e((0,l.selectAllDocs)())},changeActivitySort:function(t){return e((0,l.changeActivitySort)(t))},selectAllReplicates:function(){return e((0,l.selectAllReplicates)())},deleteReplicates:function(t){return e((0,l.deleteReplicates)(t))},selectReplicate:function(t){return e((0,l.selectReplicate)(t))}}};t.default=(0,o.connect)(u,c)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(2),u=a(s),c=n(0),d=a(c),f=n(18),p=a(f),h=n(14),m=a(h),_=n(615),g=a(_),b=n(613),E=a(b),v=n(174),y=n(39),O=n(126),N=n(617),S=a(N),D=m.default.LoadLines,T=m.default.Polling,C=m.default.RefreshBtn,w=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,a=e.replicationType,o=e.replicationDocName,r=e.databases,i=e.localSource,l=e.remoteSource,s=e.remoteTarget,u=e.localTarget,c=e.statusDocs,f=e.statusFilter,p=e.loading,h=e.allDocsSelected,m=e.someDocsSelected,_=e.showConflictModal,b=e.localSourceKnown,y=e.localTargetKnown,O=e.updateFormField,N=e.authenticated,T=e.activityLoading,C=e.submittedNoChange,w=e.activitySort,A=e.tabSection,I=e.replicateInfo,R=e.replicateLoading,P=e.replicateFilter,L=e.allReplicateSelected,k=e.someReplicateSelected,M=e.hideConflictModal,x=e.isConflictModalVisible,U=e.filterDocs,j=e.filterReplicate,B=e.replicate,F=e.clearReplicationForm,V=e.selectAllDocs,q=e.changeActivitySort,H=e.selectDoc,G=e.deleteDocs,W=e.deleteReplicates,K=e.selectAllReplicates,X=e.selectReplicate,z=e.sourceAuthType,Y=e.sourceAuth,Q=e.targetAuthType,J=e.targetAuth;return"new replication"===A?p?d.default.createElement(D,null):d.default.createElement(g.default,{docs:c,localTargetKnown:y,localSourceKnown:b,clearReplicationForm:F,replicate:B,replicationSource:t,replicationTarget:n,replicationType:a,replicationDocName:o,databases:r,localSource:i,remoteSource:l,remoteTarget:s,localTarget:u,sourceAuthType:z,sourceAuth:Y,targetAuthType:Q,targetAuth:J,updateFormField:O,conflictModalVisible:x,hideConflictModal:M,showConflictModal:_,checkReplicationDocID:v.checkReplicationDocID,authenticated:N,submittedNoChange:C}):"_replicate"===A?R?d.default.createElement(D,null):d.default.createElement(S.default,{docs:I,filter:P,onFilterChange:j,selectDoc:X,selectAllDocs:K,allDocsSelected:L,someDocsSelected:k,activitySort:w,changeActivitySort:q,deleteDocs:W}):T?d.default.createElement(D,null):d.default.createElement(E.default,{docs:c,filter:f,onFilterChange:U,selectAllDocs:V,selectDoc:H,allDocsSelected:h,someDocsSelected:m,deleteDocs:G,activitySort:w,changeActivitySort:q})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return p.default.isIE1X()&&(e+=" "+e+"--ie1X"),d.default.createElement("div",{className:e},d.default.createElement(T,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),d.default.createElement(C,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[d.default.createElement(O.TabElement,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(d.default.createElement(O.TabElement,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){u.default.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:d.default.createElement(O.TabElementWrapper,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?d.default.createElement(D,null):d.default.createElement(y.OnePane,null,d.default.createElement(y.OnePaneHeader,{crumbs:this.getCrumbs()},this.getHeaderComponents()),d.default.createElement(y.OnePaneContent,null,d.default.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),d.default.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}]),t}(d.default.Component);t.default=w},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=a(o),i=function(e){var t=r.default.isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()};t.default={getDatabaseLabel:i}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(621),u=a(s),c=l.default.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return r.default.createElement(u.default,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return r.default.createElement(u.default,{replicationId:e,section:"new replication"})},activityView:function(){return r.default.createElement(u.default,{section:"activity"})},replicateView:function(){return r.default.createElement(u.default,{section:"_replicate"})}});t.default={RouteObjects:[c]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(11),l=a(i),s=n(635),u=a(s),c=n(81),d=a(c);n(792),u.default.initialize=function(){r.default.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})},r.default.addReducers({setup:d.default}),r.default.registerUrls("cluster_setup",{server:function(){return l.default.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}}),t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(11),d=a(c),f=n(1),p=a(f),h=n(2),m=a(h),_=n(329),g=a(_),b=n(14),E=a(b),v=E.default.ConfirmButton,y=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.redirectToSingleNodeSetup=function(e){e.preventDefault(),m.default.navigate("#setup/singlenode")},a.redirectToMultiNodeSetup=function(e){e.preventDefault(),m.default.navigate("#setup/multinode")},i=n,r(a,i)}return i(t,e),l(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?u.default.createElement(g.default,this.props):u.default.createElement("div",{className:"setup-screen"},u.default.createElement("h2",null,"Welcome to ",d.default.i18n.en_US["couchdb-productname"],"!"),u.default.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),u.default.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),u.default.createElement("div",null,u.default.createElement(v,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),u.default.createElement(v,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}]),t}(u.default.Component);t.default=y,y.propTypes={clusterState:p.default.string}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(14),h=a(p),m=n(330),_=a(m),g=n(331),b=a(g),E=n(628),v=a(E),y=n(81),O=h.default.ConfirmButton,N=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getNodeList=function(){return a.props.nodeList.map(function(e,t){return c.default.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)},a)},a._addNode=function(){var e=a.props,t=e.username,n=e.password,o=e.setupNode,r=e.additionalNode;a.props.addNode(a.isAdminParty,{username:t,password:n},o,r)},a._alterPortAdditionalNode=function(e){a.props.alterPortAdditionalNode(e.target.value)},a._alterBindAddressAdditionalNode=function(e){a.props.alterBindAddressAdditionalNode(e.target.value)},a._alterRemoteAddressAdditionalNode=function(e){a.props.alterRemoteAddressAdditionalNode(e.target.value)},a._alterUsername=function(e){a.props.alterUsername(e.target.value)},a._alterPassword=function(e){a.props.alterPassword(e.target.value)},a._alterBindAddressSetupNode=function(e){a.props.alterBindAddressForSetupNode(e.target.value)},a._alterPortSetupNode=function(e){a.props.alterPortForSetupNode(e.target.value)},a._alterNodeCount=function(e){a.props.alterNodeCount(e.target.value)},a._finishClusterSetup=function(){a.props.finishClusterSetup("CouchDB Cluster set up!")},i=n,r(a,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.isAdminParty=(0,y.getIsAdminParty)()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return c.default.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",c.default.createElement("div",{className:"setup-setupnode-section"},c.default.createElement(_.default,l({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),c.default.createElement(b.default,l({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),c.default.createElement(v.default,l({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),c.default.createElement("hr",null),c.default.createElement("div",{className:"setup-add-nodes-section"},c.default.createElement("h2",null,"Add Nodes to the Cluster"),c.default.createElement("p",null,"Remote host"),c.default.createElement("input",{value:n.remoteAddress,onChange:this._alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),c.default.createElement(b.default,l({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),c.default.createElement("div",{className:"setup-add-button"},c.default.createElement(O,{onClick:this._addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),c.default.createElement("div",{className:"setup-nodelist"},this.getNodeList()),c.default.createElement("div",{className:"centered setup-finish"},c.default.createElement(O,{onClick:this._finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}]),t}(c.default.Component);t.default=N,N.propTypes={username:f.default.string.isRequired,password:f.default.string.isRequired,nodeList:f.default.array.isRequired,isAdminParty:f.default.bool.isRequired,setupNode:f.default.shape({bindAddress:f.default.string.isRequired,port:f.default.number.isRequired,nodeCount:f.default.number.isRequired}).isRequired,additionalNode:f.default.shape({bindAddress:f.default.string.isRequired,port:f.default.number.isRequired,remoteAddress:f.default.string.isRequired}).isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),u=a(s),c=n(1),d=a(c),f=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.handleNodeCountChange=function(e){a.props.onAlterNodeCount(e)},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"setup-node-count"},u.default.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),u.default.createElement("input",{className:"setup-input-nodecount",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}]),t}(u.default.Component);t.default=f,f.propTypes={onAlterNodeCount:d.default.func.isRequired,nodeCount:d.default.number.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=n(1),f=a(d),p=n(14),h=a(p),m=n(330),_=a(m),g=n(331),b=a(g),E=h.default.ConfirmButton,v=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChangeUsername=function(t){return e.props.alterUsername(t.target.value)},e.onChangePassword=function(t){return e.props.alterPassword(t.target.value)},e.onChangeBindAddress=function(t){return e.props.alterBindAddress(t.target.value)},e.onChangePort=function(t){return e.props.alterPort(t.target.value)},e.finishSingleNode=function(t){t.preventDefault();var n=e.props,a=n.username,o=n.password,r=n.port,i=n.bindAddress,l={username:a,password:o},s={port:r,bindAddress:i};e.props.setupSingleNode(l,s)},e.finishSingleNode=e.finishSingleNode.bind(e),e.onChangeUsername=e.onChangeUsername.bind(e),e.onChangePassword=e.onChangePassword.bind(e),e.onChangeBindAddress=e.onChangeBindAddress.bind(e),e.onChangePort=e.onChangePort.bind(e),e}return i(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"setup-nodes"},c.default.createElement("div",{className:"setup-setupnode-section"},c.default.createElement(_.default,l({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),c.default.createElement(b.default,l({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),c.default.createElement(E,l({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}]),t}(c.default.Component);t.default=v,v.propTypes={username:f.default.string.isRequired,password:f.default.string.isRequired,port:f.default.number.isRequired,bindAddress:f.default.string.isRequired,isAdminParty:f.default.bool.isRequired}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(329),i=a(r),l=n(81),s=function(e){var t=e.setup;return{clusterState:(0,l.getClusterState)(t)}};t.default=(0,o.connect)(s)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(626),i=a(r),l=n(81),s=n(175),u=function(e){var t=e.setup;return{clusterState:(0,l.getClusterState)(t)}},c=function(e){return{getClusterState:function(){e((0,s.getClusterStateFromCouch)())}}};t.default=(0,o.connect)(u,c)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(627),i=a(r),l=n(81),s=n(175),u=function(e){var t=e.setup;return{nodeList:(0,l.getNodeList)(t),isAdminParty:(0,l.getIsAdminParty)(t),setupNode:(0,l.getSetupNode)(t),username:(0,l.getUsername)(t),password:(0,l.getPassword)(t),additionalNode:(0,l.getAdditionalNode)(t)}},c=function(e){return{addNode:function(t,n,a,o){e((0,s.addNode)(t,n,a,o))},alterPortAdditionalNode:function(t){e((0,s.alterPortAdditionalNode)(t))},alterBindAddressAdditionalNode:function(t){e((0,s.alterBindAddressAdditionalNode)(t))},alterRemoteAddressAdditionalNode:function(t){e((0,s.alterRemoteAddressAdditionalNode)(t))},alterUsername:function(t){e((0,s.setUsername)(t))},alterPassword:function(t){e((0,s.setPassword)(t))},alterBindAddressForSetupNode:function(t){e((0,s.setBindAddressForSetupNode)(t))},alterPortForSetupNode:function(t){e((0,s.setPortForSetupNode)(t))},finishClusterSetup:function(t){e((0,s.finishClusterSetup)(t))},alterNodeCount:function(t){e((0,s.setNodeCount)(t))}}};t.default=(0,o.connect)(u,c)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=n(629),i=a(r),l=n(81),s=n(175),u=function(e){var t=e.setup;return{nodeList:(0,l.getNodeList)(t),isAdminParty:(0,l.getIsAdminParty)(t),setupNode:(0,l.getSetupNode)(t),username:(0,l.getUsername)(t),password:(0,l.getPassword)(t),port:(0,l.getPortForSetupNode)(t),bindAddress:(0,l.getBindAddressForSetupNode)(t)}},c=function(e){return{alterUsername:function(t){e((0,s.setUsername)(t))},alterPassword:function(t){e((0,s.setPassword)(t))},alterBindAddress:function(t){e((0,s.setBindAddressForSetupNode)(t))},alterPort:function(t){e((0,s.setPortForSetupNode)(t))},setupSingleNode:function(t,n){e((0,s.setupSingleNode)(t,n))}}};t.default=(0,o.connect)(u,c)(i.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return i.default.isEmpty(e.username)?"Admin name is required":i.default.isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&i.default.isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&i.default.isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}Object.defineProperty(t,"__esModule",{value:!0}),t.isInvalid=o;var r=n(19),i=a(r)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(11),l=a(i),s=n(2),u=a(s),c=n(94),d=a(c),f=n(39),p=n(630),h=a(p),m=n(631),_=a(m),g=n(633),b=a(g),E=n(632),v=a(E),y=u.default.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=u.default.urls("cluster_setup","apiurl");return d.default.fetchNodes(),r.default.createElement(f.OnePaneSimpleLayout,{component:r.default.createElement(_.default,null),endpoint:e,docURL:u.default.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=u.default.urls("cluster_setup","apiurl");return d.default.fetchNodes(),r.default.createElement(f.OnePaneSimpleLayout,{component:r.default.createElement(b.default,null),endpoint:e,docURL:u.default.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=u.default.urls("cluster_setup","apiurl");return d.default.fetchNodes(),r.default.createElement(f.OnePaneSimpleLayout,{component:r.default.createElement(v.default,null),endpoint:e,docURL:u.default.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=u.default.urls("cluster_setup","apiurl");return r.default.createElement(f.OnePaneSimpleLayout,{component:r.default.createElement(h.default,null),endpoint:e,docURL:u.default.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+l.default.i18n.en_US["couchdb-productname"]}]})}}),O={RouteObjects:[y]};t.default=O},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(638),l=a(i);n(793),l.default.initialize=function(){r.default.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},t.default=l.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(1),u=a(s),c=n(0),d=a(c),f=n(176),p=a(f),h=n(332),m=a(h),_=n(639),g=a(_),b=g.default.verifyInstallStore,E=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.getStoreState=function(){return{isVerifying:b.checkIsVerifying(),testResults:b.getTestResults()}},a.startVerification=function(){m.default.startVerification()},a.onChange=function(){a.setState(a.getStoreState())},a.state=a.getStoreState(),i=n,r(a,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){b.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){b.off("change",this.onChange)}},{key:"render",value:function(){return d.default.createElement("div",null,d.default.createElement(v,{verify:this.startVerification,isVerifying:this.state.isVerifying}),d.default.createElement(y,{testResults:this.state.testResults}))}}]),t}(d.default.Component),v=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}]),t}(d.default.Component);v.propTypes={verify:u.default.func.isRequired,isVerifying:u.default.bool.isRequired};var y=function(e){function t(){var e,n,a,i;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.showTestResult=function(e){return a.props.testResults[e].complete?a.props.testResults[e].success?d.default.createElement("span",null,"✓"):d.default.createElement("span",null,"✗"):""},i=n,r(a,i)}return i(t,e),l(t,[{key:"render",value:function(){return d.default.createElement("table",{className:"table table-striped table-bordered"},d.default.createElement("thead",null,d.default.createElement("tr",null,d.default.createElement("th",null,"Test"),d.default.createElement("th",null,"Status"))),d.default.createElement("tbody",null,d.default.createElement("tr",null,d.default.createElement("td",null,"Create Database"),d.default.createElement("td",{id:"js-test-create-db"},this.showTestResult(p.default.TESTS.CREATE_DATABASE))),d.default.createElement("tr",null,d.default.createElement("td",null,"Create Document"),d.default.createElement("td",{id:"js-test-create-doc"},this.showTestResult(p.default.TESTS.CREATE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Update Document"),d.default.createElement("td",{id:"js-test-update-doc"},this.showTestResult(p.default.TESTS.UPDATE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Delete Document"),d.default.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(p.default.TESTS.DELETE_DOCUMENT))),d.default.createElement("tr",null,d.default.createElement("td",null,"Create View"),d.default.createElement("td",{id:"js-test-create-view"},this.showTestResult(p.default.TESTS.CREATE_VIEW))),d.default.createElement("tr",null,d.default.createElement("td",null,"Replication"),d.default.createElement("td",{id:"js-test-replication"},this.showTestResult(p.default.TESTS.REPLICATION)))))}}]),t}(d.default.Component);y.propTypes={testResults:u.default.object.isRequired},t.default={VerifyInstallController:E,VerifyInstallButton:v,VerifyInstallResults:y}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=a(o),i=n(2),l=a(i),s=n(334),u=a(s),c=n(332),d=a(c),f=n(637),p=a(f),h=n(39),m=l.default.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return d.default.resetStore(),r.default.createElement(h.OnePaneSimpleLayout,{component:r.default.createElement(p.default.VerifyInstallController,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});u.default.RouteObjects=[m],t.default=u.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(176),l=a(i),s=n(333),u=a(s),c=r.default.Store.extend({initialize:function(){this.reset()},reset:function(){this._isVerifying=!1,this._tests={},_.each(Object.keys(l.default.TESTS),function(e){this._tests[l.default.TESTS[e]]={complete:!1}},this)},startVerification:function(){this._isVerifying=!0},stopVerification:function(){this._isVerifying=!1},checkIsVerifying:function(){return this._isVerifying},updateTestStatus:function(e,t){if(!_.has(this._tests,e))throw new Error("Invalid test name passed to updateTestStatus()");this._tests[e]={complete:!0,success:t}},getTestResults:function(){return this._tests},dispatch:function(e){switch(e.type){case u.default.VERIFY_INSTALL_START:this.startVerification(),this.triggerChange();break;case u.default.VERIFY_INSTALL_RESET:this.reset(),this.triggerChange();break;case u.default.VERIFY_INSTALL_SINGLE_TEST_COMPLETE:this.updateTestStatus(e.test,e.success),this.triggerChange();break;case u.default.VERIFY_INSTALL_ALL_TESTS_COMPLETE:this.stopVerification(),this.triggerChange();break;default:return}}}),d={};d.verifyInstallStore=new c,d.verifyInstallStore.dispatchToken=r.default.dispatcher.register(d.verifyInstallStore.dispatch),t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkAccess=t.authenticationDenied=t.authenticate=void 0;var o=n(336),r=a(o),i=n(179),l=a(i),s=t.authenticate=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},u=t.authenticationDenied=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&r.default.navigate("/login?urlback="+e,{replace:!0}),r.default.navigate("/login",{replace:!0})};t.checkAccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new l.default(function(t,n){return r.default.session.getSession().then(function(){if(s(r.default.session,e))return void t();n()}).catch(function(e){n(e),u()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregister=t.dispatch=t.register=void 0;var a=n(19),o=[],r=0,i=t.register=function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return r+=1,o.push(e),e.dispatchId=r,r},l=t.dispatch=function(e){o.forEach(function(t){return t(e)})},s=t.unregister=function(e){var t=(0,a.findIndex)(o,function(t){return t.dispatchId===e});-1!==t&&o.splice(t,1)};t.default={register:i,dispatch:l,unregister:s}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(10),i=(a(r),n(73)),l=a(i),s=n(19),u=a(s),c=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};c.extend=l.default.Model.extend;var d=["routes","roles"];u.default.extend(c.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return u.default.isFunction(this[e])?this[e]():this[e]},_configure:function(e){u.default.each(u.default.intersection(u.default.keys(e),d),function(t){this[t]=e[t]},this)},getRouteUrls:function(){return u.default.keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n,a=this.get("routes"),r=a[e];return n="object"===(void 0===r?"undefined":o(r))?this[r.route]:this[r],n.apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===(void 0===t?"undefined":o(t))&&t.roles?t.roles:this.roles}}),t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(640),r=n(73),i=a(r),l=n(19),s=a(l),u={};t.default=i.default.Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){u[e]=t},removeBeforeUnload:function(e){delete u[e]},navigate:function(e,t){var n=!0,a=s.default.find(s.default.map(u,function(e){return e()}),function(e){if(e)return!0});if(a&&(n=window.confirm(a)),t&&t.redirect)return window.location=e;n&&(i.default.Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach(function(a){t.route(a,a.toString(),function(){for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];var s=e.prototype.getRouteRoles(a);(0,o.checkAccess)(s).then(function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(a)||(n.activeRouteObject=new e(a,i));var o=n.activeRouteObject,r=o.routeCallback(a,i);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:r,roles:s,route:a.toString()},n.trigger("new-component",t.currentRouteOptions)},function(){})})})},setModuleRoutes:function(e){s.default.each(e,function(e){e&&(e.initialize(),e.RouteObjects&&s.default.each(e.RouteObjects,this.addModuleRouteObject,this))},this)},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],i.default.history.on("route",function(){this.lastPages.push(i.default.history.fragment),this.lastPages.length>2&&this.lastPages.shift()},this)}})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),r=a(o),i=n(19),l=a(i),s=function(){this.initialize.apply(this,arguments),l.default.bindAll(this)};s.extend=r.default.Model.extend,l.default.extend(s.prototype,r.default.Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}}),t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(593),r=a(o),i=n(504),l=a(i),s=n(96),u=a(s),c=n(537),d=a(c),f=n(625),p=a(f),h=n(486),m=a(h),_=n(501),g=a(_),b=n(520),E=a(b),v=n(612),y=a(v),O=n(527),N=a(O),S=n(604),D=a(S),T=n(492),C=a(T),w=n(636),A=a(w),I=n(534),R=a(I);t.default=[r.default,l.default,u.default,d.default,p.default,m.default,g.default,E.default,y.default,N.default,D.default,C.default,A.default,R.default]},function(e,t,n){"use strict";var a,o;!function(){function n(e,t){return new r(e,t).beautify()}function r(e,t){function n(e,t){var n=0;return e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!s()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:X.length,had_comment:!1,ternary_depth:0}}function a(){return{text:[]}}function o(e){if(e=void 0!==e&&e,X.length)for(r(X[X.length-1],e);e&&X.length>1&&0===X[X.length-1].text.length;)X.pop(),r(X[X.length-1],e)}function r(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===$||e.text[e.text.length-1]===be);)e.text.pop()}function i(e){return e.replace(/^\s+|\s+$/g,"")}function l(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function s(){return 0===X[X.length-1].text.length}function u(){return!!s()&&(1===X.length||0===X[X.length-2].text.length)}function c(e){if(e=void 0!==e&&e,ge.wrap_line_length&&!e){var t=X[X.length-1];t.text.length>0&&t.text.join("").length+z.length+(de?1:0)>=ge.wrap_line_length&&(e=!0)}(ge.preserve_newlines&&ue||e)&&!s()&&(d(!1,!0),v(Z.mode)||y(Z.mode)||(ce=!0))}function d(e,t){if(ce=!1,de=!1,!t&&";"!==Z.last_text)for(;Z.mode===_e.Statement&&!Z.if_block&&!Z.do_block;)O();1===X.length&&s()||!e&&s()||(Z.multiline_frame=!0,X.push(a()))}function f(){if(s()){var e=X[X.length-1];if(ge.keep_array_indentation&&v(Z.mode)&&ue){e.text.push("");for(var t=0;t<he.length;t+=1)e.text.push(he[t])}else be&&e.text.push(be),p(Z.indentation_level+(Z.var_line&&Z.var_line_reindented?1:0)+(ce?1:0))}}function p(e){if(X.length>1){var t=X[X.length-1];Z.line_indent_level=e;for(var n=0;n<e;n+=1)t.text.push($)}}function h(){var e=X[X.length-1];if(de&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==$&&e.text.push(" ")}}function m(e){e=e||z,f(),ce=!1,h(),de=!1,X[X.length-1].text.push(e)}function _(){Z.indentation_level+=1}function g(){Z.indentation_level>0&&(!Z.parent||Z.indentation_level>Z.parent.indentation_level)&&(Z.indentation_level-=1)}function b(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,a=0;n<X.length;)t=X[n],n++,0!==t.text.length&&(a=be&&t.text[0]===be?1:0,t.text[a]===$&&t.text.splice(a,1))}function E(e){Z?(te.push(Z),ee=Z):ee=n(null,e),Z=n(ee,e)}function v(e){return e===_e.ArrayLiteral}function y(e){return C(e,[_e.Expression,_e.ForInitializer,_e.Conditional])}function O(){te.length>0&&(ee=Z,Z=te.pop())}function N(){return Z.mode===_e.ObjectLiteral&&":"===Z.last_text&&0===Z.ternary_depth}function S(){return("do"===Z.last_text||"else"===Z.last_text&&"if"!==z||"TK_END_EXPR"===Q&&(ee.mode===_e.ForInitializer||ee.mode===_e.Conditional))&&(c(C(z,["do","for","if","while"])),E(_e.Statement),s()&&(_(),ce=!1),!0)}function D(e,t){for(var n=0;n<e.length;n++)if(i(e[n]).charAt(0)!==t)return!1;return!0}function T(e){return C(e,["case","return","do","if","throw","else"])}function C(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function w(e){for(var t,n=!1,a="",o=0,r="",i=0;n||o<e.length;)if(t=e.charAt(o),o++,n){if(n=!1,"x"===t)r=e.substr(o,2),o+=2;else{if("u"!==t){a+="\\"+t;continue}r=e.substr(o,4),o+=4}if(!r.match(/^[0123456789abcdefABCDEF]+$/))return e;if((i=parseInt(r,16))>=0&&i<32){a+="x"===t?"\\x"+r:"\\u"+r;continue}if(34===i||39===i||92===i)a+="\\"+String.fromCharCode(i);else{if("x"===t&&i>126&&i<=255)return e;a+=String.fromCharCode(i)}}else"\\"===t?n=!0:a+=t;return a}function A(e){for(var t=re,n=K.charAt(t);C(n,ne)&&n!==e;){if(++t>=fe)return!1;n=K.charAt(t)}return n===e}function I(){var e;if(pe=0,re>=fe)return["","TK_EOF"];ue=!1,he=[];var t=K.charAt(re);for(re+=1;C(t,ne);){if("\n"===t?(pe+=1,he=[]):pe&&(t===$?he.push($):"\r"!==t&&he.push(" ")),re>=fe)return["","TK_EOF"];t=K.charAt(re),re+=1}if(C(t,ae)){if(re<fe)for(;C(K.charAt(re),ae)&&(t+=K.charAt(re),(re+=1)!==fe););if(re!==fe&&t.match(/^[0-9]+[Ee]$/)&&("-"===K.charAt(re)||"+"===K.charAt(re))){var n=K.charAt(re);return re+=1,t+=n+I()[0],[t,"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var a="",o=!0;if("*"===K.charAt(re)){if((re+=1)<fe)for(;re<fe&&("*"!==K.charAt(re)||!K.charAt(re+1)||"/"!==K.charAt(re+1))&&(t=K.charAt(re),a+=t,"\n"!==t&&"\r"!==t||(o=!1),!((re+=1)>=fe)););return re+=2,o&&0===pe?["/*"+a+"*/","TK_INLINE_COMMENT"]:["/*"+a+"*/","TK_BLOCK_COMMENT"]}if("/"===K.charAt(re)){for(a=t;"\r"!==K.charAt(re)&&"\n"!==K.charAt(re)&&(a+=K.charAt(re),!((re+=1)>=fe)););return[a,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||ge.e4x&&"<"===t&&K.slice(re-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===Q&&T(Z.last_text)||"TK_END_EXPR"===Q&&C(ee.mode,[_e.Conditional,_e.ForInitializer])||C(Q,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var r=t,l=!1,s=!1;if(e=t,re<fe)if("/"===r){for(var u=!1;l||u||K.charAt(re)!==r;)if(e+=K.charAt(re),l?l=!1:(l="\\"===K.charAt(re),"["===K.charAt(re)?u=!0:"]"===K.charAt(re)&&(u=!1)),(re+=1)>=fe)return[e,"TK_STRING"]}else if(ge.e4x&&"<"===r){var c=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,d=K.slice(re-1),f=c.exec(d);if(f&&0===f.index){for(var p=f[2],h=0;f;){var m=!!f[1],_=f[2],g=!!f[f.length-1]||"![CDATA["===_.slice(0,8);if(_!==p||g||(m?--h:++h),h<=0)break;f=c.exec(d)}var b=f?f.index+f[0].length:d.length;return re+=b-1,[d.slice(0,b),"TK_STRING"]}}else for(;l||K.charAt(re)!==r;)if(e+=K.charAt(re),l?("x"!==K.charAt(re)&&"u"!==K.charAt(re)||(s=!0),l=!1):l="\\"===K.charAt(re),(re+=1)>=fe)return[e,"TK_STRING"];if(re+=1,e+=r,s&&ge.unescape_strings&&(e=w(e)),"/"===r)for(;re<fe&&C(K.charAt(re),ae);)e+=K.charAt(re),re+=1;return[e,"TK_STRING"]}if("#"===t){if(1===X.length&&0===X[0].text.length&&"!"===K.charAt(re)){for(e=t;re<fe&&"\n"!==t;)t=K.charAt(re),e+=t,re+=1;return[i(e)+"\n","TK_UNKNOWN"]}var E="#";if(re<fe&&C(K.charAt(re),le)){do{t=K.charAt(re),E+=t,re+=1}while(re<fe&&"#"!==t&&"="!==t);return"#"===t||("["===K.charAt(re)&&"]"===K.charAt(re+1)?(E+="[]",re+=2):"{"===K.charAt(re)&&"}"===K.charAt(re+1)&&(E+="{}",re+=2)),[E,"TK_WORD"]}}if("<"===t&&"\x3c!--"===K.substring(re-1,re+3)){for(re+=3,t="\x3c!--";"\n"!==K.charAt(re)&&re<fe;)t+=K.charAt(re),re++;return Z.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&Z.in_html_comment&&"--\x3e"===K.substring(re-1,re+2))return Z.in_html_comment=!1,re+=2,["--\x3e","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(C(t,oe)){for(;re<fe&&C(t+K.charAt(re),oe)&&(t+=K.charAt(re),!((re+=1)>=fe)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}function R(){S();var e=_e.Expression;if("["===z){if("TK_WORD"===Q||")"===Z.last_text)return C(Z.last_text,ie)&&(de=!0),E(e),m(),_(),void(ge.space_in_paren&&(de=!0));e=_e.ArrayLiteral,v(Z.mode)&&("["!==Z.last_text&&(","!==Z.last_text||"]"!==J&&"}"!==J)||ge.keep_array_indentation||d())}else"for"===Z.last_text?e=_e.ForInitializer:C(Z.last_text,["if","while"])&&(e=_e.Conditional);";"===Z.last_text||"TK_START_BLOCK"===Q?d():"TK_END_EXPR"===Q||"TK_START_EXPR"===Q||"TK_END_BLOCK"===Q||"."===Z.last_text?(c(ue),ce=!1):"TK_WORD"!==Q&&"TK_OPERATOR"!==Q?de=!0:"function"===Z.last_word||"typeof"===Z.last_word?ge.jslint_happy&&(de=!0):(C(Z.last_text,ie)||"catch"===Z.last_text)&&ge.space_before_conditional&&(de=!0),"("===z&&("TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||N()||c()),E(e),m(),ge.space_in_paren&&(de=!0),_()}function P(){for(;Z.mode===_e.Statement;)O();"]"===z&&v(Z.mode)&&Z.multiline_frame&&!ge.keep_array_indentation&&d(),Z.multiline_frame&&c(),ge.space_in_paren&&("TK_START_EXPR"===Q?(o(),de=!1):de=!0),"]"===z&&ge.keep_array_indentation?(m(),O()):(O(),m()),b(ee),Z.do_while&&ee.mode===_e.Conditional&&(ee.mode=_e.Expression,Z.do_block=!1,Z.do_while=!1)}function L(){E(_e.BlockStatement);var e=A("}"),t=e&&"function"===Z.last_word&&"TK_END_EXPR"===Q;"expand"===ge.brace_style?"TK_OPERATOR"!==Q&&(t||"TK_EQUALS"===Q||T(Z.last_text)&&"else"!==Z.last_text)?de=!0:d():"TK_OPERATOR"!==Q&&"TK_START_EXPR"!==Q?"TK_START_BLOCK"===Q?d():de=!0:v(ee.mode)&&","===Z.last_text&&("}"===J?de=!0:d()),m(),_()}function k(){for(;Z.mode===_e.Statement;)O();var e="TK_START_BLOCK"===Q;"expand"===ge.brace_style?e||d():e||(v(Z.mode)&&ge.keep_array_indentation?(ge.keep_array_indentation=!1,d(),ge.keep_array_indentation=!0):d()),O(),m()}function M(){if(S()||!ue||y(Z.mode)||"TK_OPERATOR"===Q&&"--"!==Z.last_text&&"++"!==Z.last_text||"TK_EQUALS"===Q||!ge.preserve_newlines&&"var"===Z.last_text||d(),Z.do_block&&!Z.do_while){if("while"===z)return de=!0,m(),de=!0,void(Z.do_while=!0);d(),Z.do_block=!1}if(Z.if_block&&"else"!==z){for(;Z.mode===_e.Statement;)O();Z.if_block=!1}if("case"===z||"default"===z&&Z.in_case_statement)return d(),(Z.case_body||ge.jslint_happy)&&(g(),Z.case_body=!1),m(),Z.in_case=!0,void(Z.in_case_statement=!0);if("function"===z&&(Z.var_line&&"TK_EQUALS"!==Q&&(Z.var_line_reindented=!0),(C(Z.last_text,["}",";"])||s()&&!C(Z.last_text,["{",":","=",","]))&&(u()||Z.had_comment||(d(),d(!0))),"TK_WORD"===Q?"get"===Z.last_text||"set"===Z.last_text||"new"===Z.last_text||"return"===Z.last_text?de=!0:d():"TK_OPERATOR"===Q||"="===Z.last_text?de=!0:y(Z.mode)||d()),"TK_COMMA"!==Q&&"TK_START_EXPR"!==Q&&"TK_EQUALS"!==Q&&"TK_OPERATOR"!==Q||N()||c(),"function"===z)return m(),void(Z.last_word=z);if(se="NONE","TK_END_BLOCK"===Q?C(z,["else","catch","finally"])?"expand"===ge.brace_style||"end-expand"===ge.brace_style?se="NEWLINE":(se="SPACE",de=!0):se="NEWLINE":"TK_SEMICOLON"===Q&&Z.mode===_e.BlockStatement?se="NEWLINE":"TK_SEMICOLON"===Q&&y(Z.mode)?se="SPACE":"TK_STRING"===Q?se="NEWLINE":"TK_WORD"===Q?se="SPACE":"TK_START_BLOCK"===Q?se="NEWLINE":"TK_END_EXPR"===Q&&(de=!0,se="NEWLINE"),C(z,ie)&&")"!==Z.last_text&&(se="else"===Z.last_text?"SPACE":"NEWLINE"),C(z,["else","catch","finally"]))if("TK_END_BLOCK"!==Q||"expand"===ge.brace_style||"end-expand"===ge.brace_style)d();else{o(!0);var e=X[X.length-1];"}"!==e.text[e.text.length-1]&&d(),de=!0}else"NEWLINE"===se?T(Z.last_text)?de=!0:"TK_END_EXPR"!==Q?"TK_START_EXPR"===Q&&"var"===z||":"===Z.last_text||("if"===z&&"else"===Z.last_word&&"{"!==Z.last_text?de=!0:(Z.var_line=!1,Z.var_line_reindented=!1,d())):C(z,ie)&&")"!==Z.last_text&&(Z.var_line=!1,Z.var_line_reindented=!1,d()):v(Z.mode)&&","===Z.last_text&&"}"===J?d():"SPACE"===se&&(de=!0);m(),Z.last_word=z,"var"===z&&(Z.var_line=!0,Z.var_line_reindented=!1,Z.var_line_tainted=!1),"do"===z&&(Z.do_block=!0),"if"===z&&(Z.if_block=!0)}function x(){for(S()&&(de=!1);Z.mode===_e.Statement&&!Z.if_block&&!Z.do_block;)O();m(),Z.var_line=!1,Z.var_line_reindented=!1,Z.mode===_e.ObjectLiteral&&(Z.mode=_e.BlockStatement)}function U(){S()?de=!0:"TK_WORD"===Q?de=!0:"TK_COMMA"===Q||"TK_START_EXPR"===Q||"TK_EQUALS"===Q||"TK_OPERATOR"===Q?N()||c():d(),m()}function j(){Z.var_line&&(Z.var_line_tainted=!0),de=!0,m(),de=!0}function B(){if(Z.var_line)return(y(Z.mode)||"TK_END_BLOCK"===Q)&&(Z.var_line_tainted=!1),Z.var_line&&(Z.var_line_reindented=!0),m(),void(Z.var_line_tainted?(Z.var_line_tainted=!1,d()):de=!0);"TK_END_BLOCK"===Q&&Z.mode!==_e.Expression?(m(),Z.mode===_e.ObjectLiteral&&"}"===Z.last_text?d():de=!0):Z.mode===_e.ObjectLiteral?(m(),d()):(m(),de=!0)}function F(){var e=!0,t=!0;return T(Z.last_text)?(de=!0,void m()):"*"!==z||"TK_DOT"!==Q||J.match(/^\d+$/)?":"===z&&Z.in_case?(Z.case_body=!0,_(),m(),d(),void(Z.in_case=!1)):"::"===z?void m():(!ue||"--"!==z&&"++"!==z||d(),C(z,["--","++","!"])||C(z,["-","+"])&&(C(Q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||C(Z.last_text,ie)||","===Z.last_text)?(e=!1,t=!1,";"===Z.last_text&&y(Z.mode)&&(e=!0),"TK_WORD"===Q&&C(Z.last_text,ie)&&(e=!0),Z.mode!==_e.BlockStatement&&Z.mode!==_e.Statement||"{"!==Z.last_text&&";"!==Z.last_text||d()):":"===z?0===Z.ternary_depth?(Z.mode===_e.BlockStatement&&(Z.mode=_e.ObjectLiteral),e=!1):Z.ternary_depth-=1:"?"===z&&(Z.ternary_depth+=1),de=de||e,m(),void(de=t)):void m()}function V(){var e,t=l(z),n=!1;for(d(!1,!0),t.length>1&&D(t.slice(1),"*")&&(n=!0),m(t[0]),e=1;e<t.length;e++)d(!1,!0),n?m(" "+i(t[e])):X[X.length-1].text.push(t[e]);d(!1,!0)}function q(){de=!0,m(),de=!0}function H(){ue?d(!1,!0):o(!0),de=!0,m(),d(!1,!0)}function G(){T(Z.last_text)?de=!0:c(")"===Z.last_text&&ge.break_chained_methods),m()}function W(){m(),"\n"===z[z.length-1]&&d()}var K,X,z,Y,Q,J,$,Z,ee,te,ne,ae,oe,re,ie,le,se,ue,ce,de,fe,pe,he,me,_e,ge,be="";for(ne="\n\r\t ".split(""),ae="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),le="0123456789".split(""),oe="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",oe+=" <%= <% %> <?= <? ?>",oe=oe.split(" "),ie="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),_e={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},me={TK_START_EXPR:R,TK_END_EXPR:P,TK_START_BLOCK:L,TK_END_BLOCK:k,TK_WORD:M,TK_SEMICOLON:x,TK_STRING:U,TK_EQUALS:j,TK_OPERATOR:F,TK_COMMA:B,TK_BLOCK_COMMENT:V,TK_INLINE_COMMENT:q,TK_COMMENT:H,TK_DOT:G,TK_UNKNOWN:W},t=t||{},ge={},void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(ge.brace_style=t.braces_on_own_line?"expand":"collapse"),ge.brace_style=t.brace_style?t.brace_style:ge.brace_style?ge.brace_style:"collapse","expand-strict"===ge.brace_style&&(ge.brace_style="expand"),ge.indent_size=t.indent_size?parseInt(t.indent_size,10):4,ge.indent_char=t.indent_char?t.indent_char:" ",ge.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,ge.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,ge.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),ge.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,ge.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,ge.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,ge.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,ge.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,ge.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),ge.e4x=void 0!==t.e4x&&t.e4x,t.indent_with_tabs&&(ge.indent_char="\t",ge.indent_size=1),$="";ge.indent_size>0;)$+=ge.indent_char,ge.indent_size-=1;for(;e&&(" "===e.charAt(0)||"\t"===e.charAt(0));)be+=e.charAt(0),e=e.substring(1);K=e,fe=e.length,Q="TK_START_BLOCK",J="",X=[a()],ce=!1,de=!1,he=[],te=[],E(_e.BlockStatement),re=0,this.beautify=function(){for(var e,t,n,a;e=I(),z=e[0],"TK_EOF"!==(Y=e[1]);){if(n=ge.keep_array_indentation&&v(Z.mode),ue=pe>0,n)for(t=0;t<pe;t+=1)d(t>0);else if(ge.max_preserve_newlines&&pe>ge.max_preserve_newlines&&(pe=ge.max_preserve_newlines),ge.preserve_newlines&&pe>1)for(d(),t=1;t<pe;t+=1)d(!0);me[Y](),"TK_INLINE_COMMENT"!==Y&&"TK_COMMENT"!==Y&&"TK_BLOCK_COMMENT"!==Y&&"TK_UNKNOWN"!==Y&&(J=Z.last_text,Q=Y,Z.last_text=z),Z.had_comment="TK_INLINE_COMMENT"===Y||"TK_COMMENT"===Y||"TK_BLOCK_COMMENT"===Y}a=X[0].text.join("");for(var o=1;o<X.length;o++)a+="\n"+X[o].text.join("");return a=a.replace(/[\r\n ]+$/,"")}}a=[],void 0!==(o=function(){return n}.apply(t,a))&&(e.exports=o)}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PagingCollection=void 0;var o=n(19),r=a(o),i=n(116),l=(a(i),n(73)),s=a(l),u=n(11),c=a(u),d=t.PagingCollection=s.default.Collection.extend({constructor:function(){s.default.Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=r.default.result(this,"url").split("?")[1]||"";this.paging=r.default.defaults(t.paging||{},{defaultParams:r.default.defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=r.default.clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var a=r.default.clone(e);return a.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(a.limit=Math.min(this.paging.defaultParams.limit,a.limit)),a.limit=n+1,a.skip=Math.max(a.skip,0),a},pageSizeReset:function(e,t){var n=r.default.defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return r.default.reduce(t,function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e},{})},_iterate:function(e,t){var n=r.default.defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=r.default.result(this,"url").split("?")[0];r.default.each(["startkey","endkey","key"],function(t){r.default.has(e,t)&&this.shouldStringify(e[t])&&(e[t]=JSON.stringify(e[t]))},this),this.url=t+"?"+c.default.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),s.default.Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});t.default=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(479),n(482),n(483),n(480),n(484),n(481),n(485),e.exports=n(478)}],[1075]);